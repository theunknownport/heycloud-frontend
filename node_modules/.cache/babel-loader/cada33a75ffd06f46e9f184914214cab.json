{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './ResizeHandlers';\n/**\n * @hidden\n */\n\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\n\nvar InternalTile =\n/** @class */\nfunction (_super) {\n  __extends(InternalTile, _super);\n\n  function InternalTile() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      rtl: false\n    };\n    _this.oldSize = {};\n    _this.draggable = null;\n    _this.dragging = false;\n    _this.resizing = false;\n    _this.element = null;\n    _this.ignoreDrag = false;\n    _this.pressOffset = {\n      x: 0,\n      y: 0\n    };\n    _this.pressXY = {\n      x: 0,\n      y: 0\n    };\n    _this.currentTranslate = {\n      x: 0,\n      y: 0\n    };\n    _this.preventDataOps = undefined;\n\n    _this.handleResize = function (e, q) {\n      if (q.end) {\n        _this.handleRelease();\n\n        return;\n      }\n\n      if (!_this.element) {\n        return;\n      }\n\n      var x = e.clientX;\n      var y = e.clientY;\n      _this.resizing = true;\n      var dX = (q.direction !== 'ns' ? x - _this.pressXY.x : 0) * (_this.state.rtl ? -1 : 1);\n      var dY = q.direction !== 'ew' ? y - _this.pressXY.y : 0;\n\n      if (_this.dragElement) {\n        if (_this.state.rtl) {\n          _this.dragElement.style.marginLeft = -dX + 'px';\n        } else {\n          _this.dragElement.style.marginRight = -dX + 'px';\n        }\n\n        _this.dragElement.style.height = \"calc(100% + \".concat(dY, \"px)\");\n      }\n\n      _this.element.classList.add('k-layout-item-hint', 'k-layout-item-hint-resize');\n\n      if (_this.preventDataOps) {\n        return;\n      }\n\n      var col = 0;\n      var row = 0;\n\n      var wrapBox = _this.element.getBoundingClientRect();\n\n      if (dX > wrapBox.width / _this.props.defaultPosition.colSpan / 3) {\n        col = 1;\n      }\n\n      if (dX < -wrapBox.width / _this.props.defaultPosition.colSpan / 1.25) {\n        col = -1;\n      } // vertical\n\n\n      if (dY > wrapBox.height / _this.props.defaultPosition.rowSpan / 3) {\n        row = 1;\n      }\n\n      if (dY < -wrapBox.height / _this.props.defaultPosition.rowSpan / 1.25) {\n        row = -1;\n      }\n\n      if (col !== 0 || row !== 0) {\n        _this.props.update(_this.props.index, 0, 0, row, col);\n      }\n    };\n\n    _this.handlePress = function (e) {\n      if (!_this.dragElement) {\n        return;\n      }\n\n      _this.ignoreDrag = false;\n\n      if (_this.props.ignoreDrag && _this.props.ignoreDrag(e.event.originalEvent)) {\n        _this.ignoreDrag = true;\n        return;\n      }\n\n      if (_this.element) {\n        _this.element.style.zIndex = '10';\n\n        _this.element.classList.add('k-layout-item-hint');\n      }\n\n      _this.dragElement.classList.remove('k-cursor-grab');\n\n      _this.dragElement.classList.add('k-cursor-grabbing');\n\n      var rec = _this.dragElement.getBoundingClientRect();\n\n      _this.pressXY = {\n        x: e.event.clientX,\n        y: e.event.clientY\n      };\n      _this.pressOffset = {\n        x: e.event.clientX - rec.x,\n        y: e.event.clientY - rec.y\n      };\n    };\n\n    _this.handleDrag = function (e) {\n      if (_this.ignoreDrag) {\n        return;\n      }\n\n      var dragElement = _this.dragElement;\n\n      if (e.event.originalEvent.defaultPrevented || !dragElement) {\n        return;\n      }\n\n      _this.dragging = true;\n      e.event.originalEvent.preventDefault();\n      var rec = dragElement.getBoundingClientRect();\n      _this.currentTranslate = {\n        x: e.event.clientX - rec.x - _this.pressOffset.x + _this.currentTranslate.x,\n        y: e.event.clientY - rec.y - _this.pressOffset.y + _this.currentTranslate.y\n      };\n      dragElement.style.transform = \"translate(\".concat(_this.currentTranslate.x, \"px, \").concat(_this.currentTranslate.y, \"px)\");\n      dragElement.style.transition = 'transform 0s';\n\n      if (_this.preventDataOps) {\n        return;\n      }\n\n      var col = 0;\n      var row = 0;\n\n      if (_this.currentTranslate.y > 0.7 * rec.height / _this.props.defaultPosition.rowSpan) {\n        row = 1;\n      }\n\n      if (_this.currentTranslate.y < 0.7 * -rec.height / _this.props.defaultPosition.rowSpan) {\n        row = -1;\n      }\n\n      if (_this.currentTranslate.x > 0.7 * rec.width / _this.props.defaultPosition.colSpan) {\n        col = 1;\n      }\n\n      if (_this.currentTranslate.x < 0.7 * -rec.width / _this.props.defaultPosition.colSpan) {\n        col = -1;\n      }\n\n      _this.props.update(_this.props.index, row, _this.state.rtl ? -col : col, 0, 0);\n    };\n\n    _this.handleRelease = function () {\n      _this.dragging = _this.resizing = false;\n      _this.currentTranslate = {\n        x: 0,\n        y: 0\n      };\n\n      if (_this.element) {\n        _this.element.style.zIndex = '1';\n\n        _this.element.classList.remove('k-layout-item-hint', 'k-layout-item-hint-resize');\n      }\n\n      var dragElement = _this.dragElement;\n\n      if (dragElement) {\n        dragElement.style.transform = 'translate(0px, 0px)';\n        dragElement.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n        dragElement.style.marginRight = '0px';\n        dragElement.style.marginLeft = '0px';\n        dragElement.style.height = '100%';\n        dragElement.classList.remove('k-cursor-grabbing');\n        dragElement.classList.add('k-cursor-grab');\n      }\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(InternalTile.prototype, \"reorderable\", {\n    get: function () {\n      return this.props.reorderable !== undefined ? this.props.reorderable : InternalTile.defaultProps.reorderable;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(InternalTile.prototype, \"dragElement\", {\n    get: function () {\n      return this.draggable ? this.draggable.element : undefined;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  InternalTile.prototype.componentDidMount = function () {\n    if (!this.element) {\n      return;\n    }\n\n    if (getComputedStyle(this.element).direction === 'rtl') {\n      this.setState({\n        rtl: true\n      });\n    }\n  };\n\n  InternalTile.prototype.render = function () {\n    var _this = this;\n\n    if (clearTimeout && typeof clearTimeout === 'function') {\n      clearTimeout(this.preventDataOps);\n      this.preventDataOps = window.setTimeout(function () {\n        _this.preventDataOps = undefined;\n      }, 200);\n    }\n\n    var position = this.props.defaultPosition;\n    var resizable = this.props.resizable !== undefined ? this.props.resizable : InternalTile.defaultProps.resizable;\n\n    var itemStyles = __assign({\n      gridColumnStart: position.col,\n      gridColumnEnd: \"span \".concat(position.colSpan),\n      gridRowStart: position.row,\n      gridRowEnd: \"span \".concat(position.rowSpan),\n      outline: 'none',\n      order: position.order\n    }, this.props.hintStyle);\n\n    var card = React.createElement(\"div\", {\n      ref: function (e) {\n        _this.draggable = e ? {\n          element: e\n        } : null;\n      },\n      className: classNames('k-tilelayout-item k-card', {\n        'k-cursor-grab': this.reorderable\n      }, this.props.className),\n      style: __assign({\n        height: '100%'\n      }, this.props.style)\n    }, this.props.children, React.createElement(ResizeHandlers, {\n      onPress: this.handlePress,\n      onResize: this.handleResize,\n      resizable: resizable,\n      rtl: this.state.rtl\n    }));\n    return React.createElement(\"div\", {\n      ref: function (e) {\n        _this.element = e;\n      },\n      style: itemStyles,\n      className: this.props.hintClassName\n    }, React.createElement(Draggable, {\n      ref: function (e) {\n        _this.draggable = e;\n      },\n      onDrag: this.props.reorderable ? this.handleDrag : undefined,\n      onRelease: this.props.reorderable ? this.handleRelease : undefined,\n      onPress: this.props.reorderable ? this.handlePress : undefined\n    }, card));\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.prototype.getSnapshotBeforeUpdate = function (_) {\n    this.oldSize = {};\n\n    if (this.dragElement) {\n      this.oldSize = this.dragElement.getBoundingClientRect();\n    }\n\n    return null;\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.prototype.componentDidUpdate = function (prevProps) {\n    var _this = this;\n\n    var dragElement = this.dragElement;\n\n    if (!dragElement) {\n      return;\n    }\n\n    var newBox = dragElement.getBoundingClientRect();\n    var oldBox = this.oldSize;\n\n    if (this.resizing) {\n      var diffCol = newBox.width - oldBox.width;\n\n      if (this.state.rtl) {\n        var currentM = parseFloat(dragElement.style.marginLeft || '0');\n        dragElement.style.marginLeft = currentM - diffCol + 'px';\n      } else {\n        var currentM = parseFloat(dragElement.style.marginRight || '0');\n        dragElement.style.marginRight = currentM + diffCol + 'px';\n      }\n\n      this.pressXY.x += this.state.rtl ? -diffCol : diffCol;\n      var diffRow = newBox.height - oldBox.height;\n      var currentBot = parseFloat(dragElement.style.height.substring(12));\n      dragElement.style.height = \"calc(100% + \".concat(currentBot + diffRow, \"px)\");\n      this.pressXY.y += diffRow;\n    }\n\n    var deltaX = oldBox.left - newBox.left;\n    var deltaY = oldBox.top - newBox.top;\n\n    if (deltaX === 0 && deltaY === 0) {\n      return;\n    }\n\n    if (this.dragging) {\n      if (prevProps.defaultPosition.order !== this.props.defaultPosition.order || prevProps.defaultPosition.col !== this.props.defaultPosition.col) {\n        this.currentTranslate.x = 0;\n        this.currentTranslate.y = 0;\n        dragElement.style.transform = '';\n      }\n\n      return;\n    }\n\n    if (Math.abs(deltaY) < 15 && Math.abs(deltaX) < 15) {\n      // improves performance and removes random flickering\n      return;\n    }\n\n    requestAnimationFrame(function () {\n      var domNode = _this.element;\n\n      if (!domNode) {\n        return;\n      }\n\n      domNode.style.transform = \"translate(\".concat(deltaX, \"px, \").concat(deltaY, \"px)\");\n      domNode.style.transition = 'transform 0s';\n      requestAnimationFrame(function () {\n        domNode.style.transform = '';\n        domNode.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n      });\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  InternalTile.propTypes = {\n    defaultPosition: PropTypes.object.isRequired,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    hintStyle: PropTypes.object,\n    hintClassName: PropTypes.string,\n    header: PropTypes.any,\n    body: PropTypes.any,\n    item: PropTypes.any,\n    resizable: PropTypes.oneOf(['horizontal', 'vertical', true, false]),\n    reorderable: PropTypes.bool\n  };\n  /**\n   * @hidden\n   */\n\n  InternalTile.displayName = 'KendoTileLayoutItem';\n  /**\n   * @hidden\n   */\n\n  InternalTile.defaultProps = {\n    resizable: true,\n    reorderable: true\n  };\n  return InternalTile;\n}(React.Component);\n\nexport { InternalTile };","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-layout/dist/es/tilelayout/InternalTile.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","React","PropTypes","classNames","Draggable","ResizeHandlers","ANIMATION_DURATION","InternalTile","_super","_this","state","rtl","oldSize","draggable","dragging","resizing","element","ignoreDrag","pressOffset","x","y","pressXY","currentTranslate","preventDataOps","undefined","handleResize","e","q","end","handleRelease","clientX","clientY","dX","direction","dY","dragElement","style","marginLeft","marginRight","height","concat","classList","add","col","row","wrapBox","getBoundingClientRect","width","props","defaultPosition","colSpan","rowSpan","update","index","handlePress","event","originalEvent","zIndex","remove","rec","handleDrag","defaultPrevented","preventDefault","transform","transition","defineProperty","get","reorderable","defaultProps","enumerable","configurable","componentDidMount","getComputedStyle","setState","render","clearTimeout","window","setTimeout","position","resizable","itemStyles","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","outline","order","hintStyle","card","createElement","ref","className","children","onPress","onResize","hintClassName","onDrag","onRelease","getSnapshotBeforeUpdate","_","componentDidUpdate","prevProps","newBox","oldBox","diffCol","currentM","parseFloat","diffRow","currentBot","substring","deltaX","left","deltaY","top","Math","abs","requestAnimationFrame","domNode","propTypes","object","isRequired","string","header","any","body","item","oneOf","bool","displayName","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Draggable } from '@progress/kendo-react-common';\nimport { ResizeHandlers } from './ResizeHandlers';\n/**\n * @hidden\n */\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\nvar InternalTile = /** @class */ (function (_super) {\n    __extends(InternalTile, _super);\n    function InternalTile() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            rtl: false\n        };\n        _this.oldSize = {};\n        _this.draggable = null;\n        _this.dragging = false;\n        _this.resizing = false;\n        _this.element = null;\n        _this.ignoreDrag = false;\n        _this.pressOffset = { x: 0, y: 0 };\n        _this.pressXY = { x: 0, y: 0 };\n        _this.currentTranslate = { x: 0, y: 0 };\n        _this.preventDataOps = undefined;\n        _this.handleResize = function (e, q) {\n            if (q.end) {\n                _this.handleRelease();\n                return;\n            }\n            if (!_this.element) {\n                return;\n            }\n            var x = e.clientX;\n            var y = e.clientY;\n            _this.resizing = true;\n            var dX = (q.direction !== 'ns' ? x - _this.pressXY.x : 0) * (_this.state.rtl ? -1 : 1);\n            var dY = q.direction !== 'ew' ? y - _this.pressXY.y : 0;\n            if (_this.dragElement) {\n                if (_this.state.rtl) {\n                    _this.dragElement.style.marginLeft = -dX + 'px';\n                }\n                else {\n                    _this.dragElement.style.marginRight = -dX + 'px';\n                }\n                _this.dragElement.style.height = \"calc(100% + \".concat(dY, \"px)\");\n            }\n            _this.element.classList.add('k-layout-item-hint', 'k-layout-item-hint-resize');\n            if (_this.preventDataOps) {\n                return;\n            }\n            var col = 0;\n            var row = 0;\n            var wrapBox = _this.element.getBoundingClientRect();\n            if (dX > wrapBox.width / _this.props.defaultPosition.colSpan / 3) {\n                col = 1;\n            }\n            if (dX < -wrapBox.width / _this.props.defaultPosition.colSpan / 1.25) {\n                col = -1;\n            }\n            // vertical\n            if (dY > wrapBox.height / _this.props.defaultPosition.rowSpan / 3) {\n                row = 1;\n            }\n            if (dY < -wrapBox.height / _this.props.defaultPosition.rowSpan / 1.25) {\n                row = -1;\n            }\n            if (col !== 0 || row !== 0) {\n                _this.props.update(_this.props.index, 0, 0, row, col);\n            }\n        };\n        _this.handlePress = function (e) {\n            if (!_this.dragElement) {\n                return;\n            }\n            _this.ignoreDrag = false;\n            if (_this.props.ignoreDrag && _this.props.ignoreDrag(e.event.originalEvent)) {\n                _this.ignoreDrag = true;\n                return;\n            }\n            if (_this.element) {\n                _this.element.style.zIndex = '10';\n                _this.element.classList.add('k-layout-item-hint');\n            }\n            _this.dragElement.classList.remove('k-cursor-grab');\n            _this.dragElement.classList.add('k-cursor-grabbing');\n            var rec = _this.dragElement.getBoundingClientRect();\n            _this.pressXY = {\n                x: e.event.clientX,\n                y: e.event.clientY\n            };\n            _this.pressOffset = {\n                x: e.event.clientX - rec.x,\n                y: e.event.clientY - rec.y\n            };\n        };\n        _this.handleDrag = function (e) {\n            if (_this.ignoreDrag) {\n                return;\n            }\n            var dragElement = _this.dragElement;\n            if (e.event.originalEvent.defaultPrevented || !dragElement) {\n                return;\n            }\n            _this.dragging = true;\n            e.event.originalEvent.preventDefault();\n            var rec = dragElement.getBoundingClientRect();\n            _this.currentTranslate = {\n                x: e.event.clientX - rec.x - _this.pressOffset.x + _this.currentTranslate.x,\n                y: e.event.clientY - rec.y - _this.pressOffset.y + _this.currentTranslate.y\n            };\n            dragElement.style.transform = \"translate(\".concat(_this.currentTranslate.x, \"px, \").concat(_this.currentTranslate.y, \"px)\");\n            dragElement.style.transition = 'transform 0s';\n            if (_this.preventDataOps) {\n                return;\n            }\n            var col = 0;\n            var row = 0;\n            if (_this.currentTranslate.y > 0.7 * rec.height / _this.props.defaultPosition.rowSpan) {\n                row = 1;\n            }\n            if (_this.currentTranslate.y < 0.7 * -rec.height / _this.props.defaultPosition.rowSpan) {\n                row = -1;\n            }\n            if (_this.currentTranslate.x > 0.7 * rec.width / _this.props.defaultPosition.colSpan) {\n                col = 1;\n            }\n            if (_this.currentTranslate.x < 0.7 * -rec.width / _this.props.defaultPosition.colSpan) {\n                col = -1;\n            }\n            _this.props.update(_this.props.index, row, _this.state.rtl ? -col : col, 0, 0);\n        };\n        _this.handleRelease = function () {\n            _this.dragging = _this.resizing = false;\n            _this.currentTranslate = { x: 0, y: 0 };\n            if (_this.element) {\n                _this.element.style.zIndex = '1';\n                _this.element.classList.remove('k-layout-item-hint', 'k-layout-item-hint-resize');\n            }\n            var dragElement = _this.dragElement;\n            if (dragElement) {\n                dragElement.style.transform = 'translate(0px, 0px)';\n                dragElement.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n                dragElement.style.marginRight = '0px';\n                dragElement.style.marginLeft = '0px';\n                dragElement.style.height = '100%';\n                dragElement.classList.remove('k-cursor-grabbing');\n                dragElement.classList.add('k-cursor-grab');\n            }\n        };\n        return _this;\n    }\n    Object.defineProperty(InternalTile.prototype, \"reorderable\", {\n        get: function () {\n            return this.props.reorderable !== undefined ? this.props.reorderable : InternalTile.defaultProps.reorderable;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(InternalTile.prototype, \"dragElement\", {\n        get: function () {\n            return this.draggable ? this.draggable.element : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    InternalTile.prototype.componentDidMount = function () {\n        if (!this.element) {\n            return;\n        }\n        if (getComputedStyle(this.element).direction === 'rtl') {\n            this.setState({\n                rtl: true\n            });\n        }\n    };\n    InternalTile.prototype.render = function () {\n        var _this = this;\n        if (clearTimeout && typeof (clearTimeout) === 'function') {\n            clearTimeout(this.preventDataOps);\n            this.preventDataOps = window.setTimeout(function () { _this.preventDataOps = undefined; }, 200);\n        }\n        var position = this.props.defaultPosition;\n        var resizable = this.props.resizable !== undefined ? this.props.resizable : InternalTile.defaultProps.resizable;\n        var itemStyles = __assign({ gridColumnStart: position.col, gridColumnEnd: \"span \".concat(position.colSpan), gridRowStart: position.row, gridRowEnd: \"span \".concat(position.rowSpan), outline: 'none', order: position.order }, this.props.hintStyle);\n        var card = (React.createElement(\"div\", { ref: function (e) { _this.draggable = e ? ({ element: e }) : null; }, className: classNames('k-tilelayout-item k-card', { 'k-cursor-grab': this.reorderable }, this.props.className), style: __assign({ height: '100%' }, this.props.style) },\n            this.props.children,\n            React.createElement(ResizeHandlers, { onPress: this.handlePress, onResize: this.handleResize, resizable: resizable, rtl: this.state.rtl })));\n        return (React.createElement(\"div\", { ref: function (e) { _this.element = e; }, style: itemStyles, className: this.props.hintClassName },\n            React.createElement(Draggable, { ref: function (e) { _this.draggable = e; }, onDrag: this.props.reorderable ? this.handleDrag : undefined, onRelease: this.props.reorderable ? this.handleRelease : undefined, onPress: this.props.reorderable ? this.handlePress : undefined }, card)));\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.prototype.getSnapshotBeforeUpdate = function (_) {\n        this.oldSize = {};\n        if (this.dragElement) {\n            this.oldSize = this.dragElement.getBoundingClientRect();\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.prototype.componentDidUpdate = function (prevProps) {\n        var _this = this;\n        var dragElement = this.dragElement;\n        if (!dragElement) {\n            return;\n        }\n        var newBox = dragElement.getBoundingClientRect();\n        var oldBox = this.oldSize;\n        if (this.resizing) {\n            var diffCol = newBox.width - oldBox.width;\n            if (this.state.rtl) {\n                var currentM = parseFloat(dragElement.style.marginLeft || '0');\n                dragElement.style.marginLeft = (currentM - diffCol) + 'px';\n            }\n            else {\n                var currentM = parseFloat(dragElement.style.marginRight || '0');\n                dragElement.style.marginRight = (currentM + diffCol) + 'px';\n            }\n            this.pressXY.x += this.state.rtl ? -diffCol : diffCol;\n            var diffRow = newBox.height - oldBox.height;\n            var currentBot = parseFloat(dragElement.style.height.substring(12));\n            dragElement.style.height = \"calc(100% + \".concat((currentBot + diffRow), \"px)\");\n            this.pressXY.y += diffRow;\n        }\n        var deltaX = oldBox.left - newBox.left;\n        var deltaY = oldBox.top - newBox.top;\n        if (deltaX === 0 && deltaY === 0) {\n            return;\n        }\n        if (this.dragging) {\n            if ((prevProps.defaultPosition.order !== this.props.defaultPosition.order ||\n                prevProps.defaultPosition.col !== this.props.defaultPosition.col)) {\n                this.currentTranslate.x = 0;\n                this.currentTranslate.y = 0;\n                dragElement.style.transform = '';\n            }\n            return;\n        }\n        if (Math.abs(deltaY) < 15 && Math.abs(deltaX) < 15) {\n            // improves performance and removes random flickering\n            return;\n        }\n        requestAnimationFrame(function () {\n            var domNode = _this.element;\n            if (!domNode) {\n                return;\n            }\n            domNode.style.transform = \"translate(\".concat(deltaX, \"px, \").concat(deltaY, \"px)\");\n            domNode.style.transition = 'transform 0s';\n            requestAnimationFrame(function () {\n                domNode.style.transform = '';\n                domNode.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n            });\n        });\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.propTypes = {\n        defaultPosition: PropTypes.object.isRequired,\n        style: PropTypes.object,\n        className: PropTypes.string,\n        hintStyle: PropTypes.object,\n        hintClassName: PropTypes.string,\n        header: PropTypes.any,\n        body: PropTypes.any,\n        item: PropTypes.any,\n        resizable: PropTypes.oneOf(['horizontal', 'vertical', true, false]),\n        reorderable: PropTypes.bool\n    };\n    /**\n     * @hidden\n     */\n    InternalTile.displayName = 'KendoTileLayoutItem';\n    /**\n     * @hidden\n     */\n    InternalTile.defaultProps = {\n        resizable: true,\n        reorderable: true\n    };\n    return InternalTile;\n}(React.Component));\nexport { InternalTile };\n"]},"metadata":{},"sourceType":"module"}