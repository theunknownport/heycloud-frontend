{"ast":null,"code":"import { addEventListener } from '@datadog/browser-core';\nvar trackFirstHiddenSingleton;\nvar stopListeners;\nexport function trackFirstHidden(emitter) {\n  if (emitter === void 0) {\n    emitter = window;\n  }\n\n  if (!trackFirstHiddenSingleton) {\n    if (document.visibilityState === 'hidden') {\n      trackFirstHiddenSingleton = {\n        timeStamp: 0\n      };\n    } else {\n      trackFirstHiddenSingleton = {\n        timeStamp: Infinity\n      };\n      stopListeners = addEventListener(emitter, \"pagehide\"\n      /* PAGE_HIDE */\n      , function (_a) {\n        var timeStamp = _a.timeStamp;\n        trackFirstHiddenSingleton.timeStamp = timeStamp;\n      }, {\n        capture: true,\n        once: true\n      }).stop;\n    }\n  }\n\n  return trackFirstHiddenSingleton;\n}\nexport function resetFirstHidden() {\n  if (stopListeners) {\n    stopListeners();\n  }\n\n  trackFirstHiddenSingleton = undefined;\n}","map":{"version":3,"sources":["../../../../src/domain/rumEventsCollection/view/trackFirstHidden.ts"],"names":[],"mappings":"AAAA,SAAS,gBAAT,QAAwE,uBAAxE;AAEA,IAAI,yBAAJ;AACA,IAAI,aAAJ;AAEA,OAAM,SAAU,gBAAV,CAA2B,OAA3B,EAAyD;AAA9B,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,MAAA;AAA8B;;AAC7D,MAAI,CAAC,yBAAL,EAAgC;AAC9B,QAAI,QAAQ,CAAC,eAAT,KAA6B,QAAjC,EAA2C;AACzC,MAAA,yBAAyB,GAAG;AAAE,QAAA,SAAS,EAAE;AAAb,OAA5B;AACD,KAFD,MAEO;AACL,MAAA,yBAAyB,GAAG;AAC1B,QAAA,SAAS,EAAE;AADe,OAA5B;AAGU,MAAA,aAAa,GAAK,gBAAgB,CAC1C,OAD0C,EACnC;AAAA;AADmC,QAG1C,UAAC,EAAD,EAAc;YAAX,SAAS,GAAA,EAAA,CAAA,S;AACV,QAAA,yBAA0B,CAAC,SAA3B,GAAuC,SAAvC;AACD,OALyC,EAM1C;AAAE,QAAA,OAAO,EAAE,IAAX;AAAiB,QAAA,IAAI,EAAE;AAAvB,OAN0C,CAAhB,CAAL,IAAtB;AAQF;AACF;;AAED,SAAO,yBAAP;AACD;AAED,OAAM,SAAU,gBAAV,GAA0B;AAC9B,MAAI,aAAJ,EAAmB;AACjB,IAAA,aAAa;AACd;;AACD,EAAA,yBAAyB,GAAG,SAA5B;AACD","sourceRoot":"","sourcesContent":["import { addEventListener } from '@datadog/browser-core';\nvar trackFirstHiddenSingleton;\nvar stopListeners;\nexport function trackFirstHidden(emitter) {\n    if (emitter === void 0) { emitter = window; }\n    if (!trackFirstHiddenSingleton) {\n        if (document.visibilityState === 'hidden') {\n            trackFirstHiddenSingleton = { timeStamp: 0 };\n        }\n        else {\n            trackFirstHiddenSingleton = {\n                timeStamp: Infinity,\n            };\n            (stopListeners = addEventListener(emitter, \"pagehide\" /* PAGE_HIDE */, function (_a) {\n                var timeStamp = _a.timeStamp;\n                trackFirstHiddenSingleton.timeStamp = timeStamp;\n            }, { capture: true, once: true }).stop);\n        }\n    }\n    return trackFirstHiddenSingleton;\n}\nexport function resetFirstHidden() {\n    if (stopListeners) {\n        stopListeners();\n    }\n    trackFirstHiddenSingleton = undefined;\n}\n//# sourceMappingURL=trackFirstHidden.js.map"]},"metadata":{},"sourceType":"module"}