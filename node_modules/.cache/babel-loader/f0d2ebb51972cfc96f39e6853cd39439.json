{"ast":null,"code":"/* eslint-disable */\nimport { greedy, sequence } from './parsing/combinators';\nimport { literal, mask as maskParser, rawLiteral, rawMask, token, unliteral, unmask } from './parsing/parsers';\n/**\n * @hidden\n */\n\nvar MaskingService =\n/** @class */\nfunction () {\n  function MaskingService() {\n    this.rules = {};\n    this.prompt = '_';\n    this.mask = '';\n    this.promptPlaceholder = ' ';\n    this.includeLiterals = false;\n    this.maskTokens = [];\n    this.unmaskTokens = [];\n    this.rawTokens = [];\n    this.validationTokens = [];\n  }\n\n  MaskingService.prototype.update = function (_a) {\n    var _b = _a.mask,\n        mask = _b === void 0 ? '' : _b,\n        _c = _a.prompt,\n        prompt = _c === void 0 ? '' : _c,\n        _d = _a.promptPlaceholder,\n        promptPlaceholder = _d === void 0 ? ' ' : _d,\n        _e = _a.rules,\n        rules = _e === void 0 ? {} : _e,\n        _f = _a.includeLiterals,\n        includeLiterals = _f === void 0 ? false : _f;\n    this.mask = mask;\n    this.prompt = prompt;\n    this.promptPlaceholder = promptPlaceholder;\n    this.rules = rules;\n    this.includeLiterals = includeLiterals;\n    this.tokenize();\n  };\n\n  MaskingService.prototype.validationValue = function (maskedValue) {\n    if (maskedValue === void 0) {\n      maskedValue = '';\n    }\n\n    var value = maskedValue;\n    sequence(this.validationTokens).run(maskedValue).fold(function (unmasked) {\n      value = unmasked.join('');\n    });\n    return value;\n  };\n\n  MaskingService.prototype.rawValue = function (maskedValue) {\n    if (maskedValue === void 0) {\n      maskedValue = '';\n    }\n\n    var value = maskedValue;\n\n    if (!this.rawTokens.length) {\n      return value;\n    }\n\n    sequence(this.rawTokens).run(maskedValue).fold(function (unmasked) {\n      value = unmasked.join('');\n    });\n    return value;\n  };\n  /**\n   * @hidden\n   */\n\n\n  MaskingService.prototype.maskRaw = function (rawValue) {\n    if (rawValue === void 0) {\n      rawValue = '';\n    }\n\n    var value = rawValue;\n\n    if (!this.maskTokens.length) {\n      return value;\n    }\n\n    sequence(this.maskTokens).run(rawValue).fold(function (masked) {\n      value = masked.join('');\n    });\n    return value;\n  };\n\n  MaskingService.prototype.maskInput = function (input, control, splitPoint) {\n    if (input.length < control.length) {\n      return this.maskRemoved(input, control, splitPoint);\n    }\n\n    return this.maskInserted(input, control, splitPoint);\n  };\n\n  MaskingService.prototype.maskInRange = function (pasted, oldValue, start, end) {\n    var value = '';\n    var selection = end;\n    var beforeChange = oldValue.split('').slice(0, start);\n    var afterChange = oldValue.split('').slice(end);\n    sequence(this.maskTokens.slice(start, end)).run(pasted).fold(function (masked) {\n      value = beforeChange.concat(masked).concat(afterChange).join('');\n    });\n    return {\n      selection: selection,\n      value: value\n    };\n  };\n\n  MaskingService.prototype.maskRemoved = function (input, control, splitPoint) {\n    var _this = this;\n\n    var value = '';\n    var selection = splitPoint;\n    var unchanged = input.split('').slice(splitPoint);\n    var changed = input.split('').slice(0, splitPoint).join('');\n    var take = this.maskTokens.length - (input.length - splitPoint);\n    sequence(this.maskTokens.slice(0, take)).run(changed, control).fold(function (masked) {\n      selection = _this.adjustPosition(masked, selection);\n      value = masked.concat(unchanged).join('');\n    });\n    return {\n      selection: selection,\n      value: value\n    };\n  };\n\n  MaskingService.prototype.adjustPosition = function (input, selection) {\n    var caretChar = input[selection];\n    var isLiteral = this.maskTokens[selection].isLiteral(caretChar);\n\n    if (!isLiteral && caretChar !== this.prompt) {\n      return selection + 1;\n    }\n\n    return selection;\n  };\n\n  MaskingService.prototype.maskInserted = function (input, control, splitPoint) {\n    var _this = this;\n\n    var value = '';\n    var selection = splitPoint;\n    var changed = input.slice(0, splitPoint);\n    sequence(this.unmaskTokens).run(changed, control).chain(function (unmasked) {\n      selection = unmasked.join('').length;\n      var unchanged = control.slice(selection);\n      return sequence(_this.maskTokens).run(unmasked.join('') + unchanged, control);\n    }).fold(function (masked) {\n      value = masked.join('');\n    });\n    return {\n      selection: selection,\n      value: value\n    };\n  };\n\n  Object.defineProperty(MaskingService.prototype, \"maskTokenCreator\", {\n    get: function () {\n      var _a = this,\n          prompt = _a.prompt,\n          promptPlaceholder = _a.promptPlaceholder;\n\n      return {\n        literal: function (rule) {\n          return literal(rule);\n        },\n        mask: function (rule) {\n          return maskParser({\n            prompt: prompt,\n            promptPlaceholder: promptPlaceholder\n          })(rule);\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MaskingService.prototype, \"unmaskTokenCreator\", {\n    get: function () {\n      var _this = this;\n\n      return {\n        literal: function (rule) {\n          return unliteral(rule);\n        },\n        mask: function (rule) {\n          return unmask(_this.prompt)(rule);\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MaskingService.prototype, \"rawTokenCreator\", {\n    get: function () {\n      var _a = this,\n          prompt = _a.prompt,\n          promptPlaceholder = _a.promptPlaceholder,\n          includeLiterals = _a.includeLiterals;\n\n      return {\n        literal: function (_) {\n          return rawLiteral(includeLiterals);\n        },\n        mask: function (_) {\n          return rawMask({\n            prompt: prompt,\n            promptPlaceholder: promptPlaceholder\n          });\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MaskingService.prototype, \"validationTokenCreator\", {\n    get: function () {\n      var prompt = this.prompt;\n      return {\n        literal: function (_) {\n          return rawLiteral(false);\n        },\n        mask: function (_) {\n          return rawMask({\n            prompt: prompt,\n            promptPlaceholder: ''\n          });\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  MaskingService.prototype.tokenize = function () {\n    var _this = this;\n\n    greedy(token(this.rules, this.maskTokenCreator)).run(this.mask).fold(function (tokens, _) {\n      _this.maskTokens = tokens;\n    });\n    greedy(token(this.rules, this.unmaskTokenCreator)).run(this.mask).fold(function (tokens, _) {\n      _this.unmaskTokens = tokens;\n    });\n    greedy(token(this.rules, this.rawTokenCreator)).run(this.mask).fold(function (tokens, _) {\n      _this.rawTokens = tokens;\n    });\n    greedy(token(this.rules, this.validationTokenCreator)).run(this.mask).fold(function (tokens, _) {\n      _this.validationTokens = tokens;\n    });\n  };\n\n  return MaskingService;\n}();\n\nexport { MaskingService };","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-inputs-common/dist/es/maskedtextbox/masking.service.js"],"names":["greedy","sequence","literal","mask","maskParser","rawLiteral","rawMask","token","unliteral","unmask","MaskingService","rules","prompt","promptPlaceholder","includeLiterals","maskTokens","unmaskTokens","rawTokens","validationTokens","prototype","update","_a","_b","_c","_d","_e","_f","tokenize","validationValue","maskedValue","value","run","fold","unmasked","join","rawValue","length","maskRaw","masked","maskInput","input","control","splitPoint","maskRemoved","maskInserted","maskInRange","pasted","oldValue","start","end","selection","beforeChange","split","slice","afterChange","concat","_this","unchanged","changed","take","adjustPosition","caretChar","isLiteral","chain","Object","defineProperty","get","rule","enumerable","configurable","_","maskTokenCreator","tokens","unmaskTokenCreator","rawTokenCreator","validationTokenCreator"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport { greedy, sequence } from './parsing/combinators';\nimport { literal, mask as maskParser, rawLiteral, rawMask, token, unliteral, unmask } from './parsing/parsers';\n/**\n * @hidden\n */\nvar MaskingService = /** @class */ (function () {\n    function MaskingService() {\n        this.rules = {};\n        this.prompt = '_';\n        this.mask = '';\n        this.promptPlaceholder = ' ';\n        this.includeLiterals = false;\n        this.maskTokens = [];\n        this.unmaskTokens = [];\n        this.rawTokens = [];\n        this.validationTokens = [];\n    }\n    MaskingService.prototype.update = function (_a) {\n        var _b = _a.mask, mask = _b === void 0 ? '' : _b, _c = _a.prompt, prompt = _c === void 0 ? '' : _c, _d = _a.promptPlaceholder, promptPlaceholder = _d === void 0 ? ' ' : _d, _e = _a.rules, rules = _e === void 0 ? {} : _e, _f = _a.includeLiterals, includeLiterals = _f === void 0 ? false : _f;\n        this.mask = mask;\n        this.prompt = prompt;\n        this.promptPlaceholder = promptPlaceholder;\n        this.rules = rules;\n        this.includeLiterals = includeLiterals;\n        this.tokenize();\n    };\n    MaskingService.prototype.validationValue = function (maskedValue) {\n        if (maskedValue === void 0) { maskedValue = ''; }\n        var value = maskedValue;\n        sequence(this.validationTokens)\n            .run(maskedValue)\n            .fold(function (unmasked) {\n            value = unmasked.join('');\n        });\n        return value;\n    };\n    MaskingService.prototype.rawValue = function (maskedValue) {\n        if (maskedValue === void 0) { maskedValue = ''; }\n        var value = maskedValue;\n        if (!this.rawTokens.length) {\n            return value;\n        }\n        sequence(this.rawTokens)\n            .run(maskedValue)\n            .fold(function (unmasked) {\n            value = unmasked.join('');\n        });\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    MaskingService.prototype.maskRaw = function (rawValue) {\n        if (rawValue === void 0) { rawValue = ''; }\n        var value = rawValue;\n        if (!this.maskTokens.length) {\n            return value;\n        }\n        sequence(this.maskTokens)\n            .run(rawValue)\n            .fold(function (masked) {\n            value = masked.join('');\n        });\n        return value;\n    };\n    MaskingService.prototype.maskInput = function (input, control, splitPoint) {\n        if (input.length < control.length) {\n            return this.maskRemoved(input, control, splitPoint);\n        }\n        return this.maskInserted(input, control, splitPoint);\n    };\n    MaskingService.prototype.maskInRange = function (pasted, oldValue, start, end) {\n        var value = '';\n        var selection = end;\n        var beforeChange = oldValue.split('').slice(0, start);\n        var afterChange = oldValue.split('').slice(end);\n        sequence(this.maskTokens.slice(start, end))\n            .run(pasted)\n            .fold(function (masked) {\n            value = beforeChange\n                .concat(masked)\n                .concat(afterChange)\n                .join('');\n        });\n        return {\n            selection: selection,\n            value: value\n        };\n    };\n    MaskingService.prototype.maskRemoved = function (input, control, splitPoint) {\n        var _this = this;\n        var value = '';\n        var selection = splitPoint;\n        var unchanged = input.split('').slice(splitPoint);\n        var changed = input.split('').slice(0, splitPoint).join('');\n        var take = this.maskTokens.length - (input.length - splitPoint);\n        sequence(this.maskTokens.slice(0, take))\n            .run(changed, control)\n            .fold(function (masked) {\n            selection = _this.adjustPosition(masked, selection);\n            value = masked.concat(unchanged).join('');\n        });\n        return {\n            selection: selection,\n            value: value\n        };\n    };\n    MaskingService.prototype.adjustPosition = function (input, selection) {\n        var caretChar = input[selection];\n        var isLiteral = this.maskTokens[selection].isLiteral(caretChar);\n        if (!isLiteral && caretChar !== this.prompt) {\n            return selection + 1;\n        }\n        return selection;\n    };\n    MaskingService.prototype.maskInserted = function (input, control, splitPoint) {\n        var _this = this;\n        var value = '';\n        var selection = splitPoint;\n        var changed = input.slice(0, splitPoint);\n        sequence(this.unmaskTokens)\n            .run(changed, control)\n            .chain(function (unmasked) {\n            selection = unmasked.join('').length;\n            var unchanged = control.slice(selection);\n            return sequence(_this.maskTokens)\n                .run(unmasked.join('') + unchanged, control);\n        })\n            .fold(function (masked) {\n            value = masked.join('');\n        });\n        return {\n            selection: selection,\n            value: value\n        };\n    };\n    Object.defineProperty(MaskingService.prototype, \"maskTokenCreator\", {\n        get: function () {\n            var _a = this, prompt = _a.prompt, promptPlaceholder = _a.promptPlaceholder;\n            return {\n                literal: function (rule) { return literal(rule); },\n                mask: function (rule) { return maskParser({ prompt: prompt, promptPlaceholder: promptPlaceholder })(rule); }\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MaskingService.prototype, \"unmaskTokenCreator\", {\n        get: function () {\n            var _this = this;\n            return {\n                literal: function (rule) { return unliteral(rule); },\n                mask: function (rule) { return unmask(_this.prompt)(rule); }\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MaskingService.prototype, \"rawTokenCreator\", {\n        get: function () {\n            var _a = this, prompt = _a.prompt, promptPlaceholder = _a.promptPlaceholder, includeLiterals = _a.includeLiterals;\n            return {\n                literal: function (_) { return rawLiteral(includeLiterals); },\n                mask: function (_) { return rawMask({ prompt: prompt, promptPlaceholder: promptPlaceholder }); }\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MaskingService.prototype, \"validationTokenCreator\", {\n        get: function () {\n            var prompt = this.prompt;\n            return {\n                literal: function (_) { return rawLiteral(false); },\n                mask: function (_) { return rawMask({ prompt: prompt, promptPlaceholder: '' }); }\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MaskingService.prototype.tokenize = function () {\n        var _this = this;\n        greedy(token(this.rules, this.maskTokenCreator))\n            .run(this.mask)\n            .fold(function (tokens, _) {\n            _this.maskTokens = tokens;\n        });\n        greedy(token(this.rules, this.unmaskTokenCreator))\n            .run(this.mask)\n            .fold(function (tokens, _) {\n            _this.unmaskTokens = tokens;\n        });\n        greedy(token(this.rules, this.rawTokenCreator))\n            .run(this.mask)\n            .fold(function (tokens, _) {\n            _this.rawTokens = tokens;\n        });\n        greedy(token(this.rules, this.validationTokenCreator))\n            .run(this.mask)\n            .fold(function (tokens, _) {\n            _this.validationTokens = tokens;\n        });\n    };\n    return MaskingService;\n}());\nexport { MaskingService };\n"]},"metadata":{},"sourceType":"module"}