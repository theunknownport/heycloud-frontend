{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, useDir, Keys, getTabIndex, createPropsContext, usePropsContext } from '@progress/kendo-react-common';\nimport { RatingItem } from './RatingItem';\nimport { ratingReducer, RATING_ACTION } from './rating-reducer';\nimport { isSelected, isHalf, calcIsFirstHalf, isCorrectValue, toRound, getRemainder } from './utils';\nimport { messages, ratingAriaLabel } from '../messages';\nimport { useLocalization } from '@progress/kendo-react-intl';\n/**\n * @hidden\n */\n\nvar useRating = function (defaultValue, args, callback) {\n  var _a = React.useState(defaultValue),\n      state = _a[0],\n      setState = _a[1];\n\n  var handleDispatchAction = function (action) {\n    var newState = ratingReducer(args.state || state, __assign(__assign({}, action), args));\n\n    if (callback) {\n      callback(newState, action.event);\n    }\n\n    setState(newState);\n  };\n\n  return [state, handleDispatchAction];\n};\n/**\n * Represents the PropsContext of the `Rating` component.\n * Used for global configuration of all `Rating` instances.\n *\n * For more information, refer to the [Inputs Props Context]({% slug props-context_inputs %}) article.\n */\n\n\nexport var RatingPropsContext = createPropsContext();\n/**\n * Represents the [KendoReact Rating component]({% slug overview_rating %}).\n *\n * Accepts properties of type [RatingProps]({% slug api_inputs_ratingprops %}).\n * Obtaining the `ref` returns an object of type [RatingHandle]({% slug api_inputs_ratinghandle %}).\n */\n\nexport var Rating = React.forwardRef(function (directProps, ref) {\n  var _a, _b, _c, _d;\n\n  var props = usePropsContext(RatingPropsContext, directProps);\n  var localization = useLocalization();\n  var target = React.useRef(null);\n  var ratingRef = React.useRef(null);\n  var dir = useDir(ratingRef, props.dir);\n  React.useImperativeHandle(target, function () {\n    return {\n      element: ratingRef.current,\n      props: props\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return target.current;\n  });\n  var handleChange = React.useCallback(function (newValue, event) {\n    if (props.onChange && target.current) {\n      props.onChange.call(undefined, {\n        value: newValue,\n        target: target.current,\n        syntheticEvent: event\n      });\n    }\n  }, [props.onChange]);\n  var min = React.useMemo(function () {\n    return props.min !== undefined ? props.min : defaultProps.min;\n  }, [props.min]);\n  var max = React.useMemo(function () {\n    return props.max !== undefined ? props.max : defaultProps.max;\n  }, [props.max]);\n  var precision = React.useMemo(function () {\n    return props.precision || defaultProps.precision;\n  }, [props.precision]);\n  var step = React.useMemo(function () {\n    return props.step !== undefined ? props.step : defaultProps.step;\n  }, [props.step]);\n  var readonly = React.useMemo(function () {\n    return props.readonly || defaultProps.readonly;\n  }, [props.readonly]);\n  var disabled = React.useMemo(function () {\n    return props.disabled || defaultProps.disabled;\n  }, [props.disabled]);\n  var Item = React.useMemo(function () {\n    return props.item || defaultProps.item;\n  }, [props.item]);\n\n  var _e = useRating(props.defaultValue || defaultProps.defaultValue, {\n    state: props.value,\n    min: min,\n    max: max,\n    step: precision === 'half' ? step / 2 : step\n  }, handleChange),\n      stateValue = _e[0],\n      dispatchStateValue = _e[1];\n\n  var _f = useRating(null, {\n    state: props.value,\n    min: min,\n    max: max,\n    step: precision === 'half' ? step / 2 : step,\n    precision: precision\n  }),\n      stateHover = _f[0],\n      dispatchStateHover = _f[1];\n\n  var value = React.useMemo(function () {\n    return props.value || stateValue;\n  }, [props.value, stateValue]);\n  var hoveredValue = React.useMemo(function () {\n    return stateHover;\n  }, [stateHover]);\n  var selection = React.useMemo(function () {\n    return props.selection || defaultProps.selection;\n  }, [props.selection]);\n  var base = React.useMemo(function () {\n    return step / (precision === 'half' ? 2 : 1);\n  }, [step, precision]);\n  var handleItemClick = React.useCallback(function (event) {\n    if (!event.target || !event.target.element || readonly || disabled) {\n      return;\n    }\n\n    if (precision === 'half') {\n      var rect = event.target.element.getBoundingClientRect();\n      var isFirstHalf = calcIsFirstHalf(dir ? dir : 'ltr', rect, event.syntheticEvent.clientX);\n      var payload = isFirstHalf ? toRound(event.target.value - step / 2, base) : event.target.value;\n      dispatchStateValue({\n        type: RATING_ACTION.select,\n        payload: payload,\n        event: event.syntheticEvent\n      });\n    } else {\n      dispatchStateValue({\n        type: RATING_ACTION.select,\n        payload: event.target.value,\n        event: event.syntheticEvent\n      });\n    }\n\n    if (props.onClick) {\n      var ev = {\n        value: value,\n        target: target.current,\n        syntheticEvent: event.syntheticEvent\n      };\n      props.onClick.call(undefined, ev);\n    }\n  }, [props.onClick, dispatchStateValue, value]);\n  var handleKeyDown = React.useCallback(function (syntheticEvent) {\n    if (readonly || disabled) {\n      return;\n    }\n\n    switch (syntheticEvent.keyCode) {\n      case Keys.right:\n        syntheticEvent.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RATING_ACTION.decrease : RATING_ACTION.increase,\n          event: syntheticEvent\n        });\n        break;\n\n      case Keys.left:\n        syntheticEvent.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RATING_ACTION.increase : RATING_ACTION.decrease,\n          event: syntheticEvent\n        });\n        break;\n\n      case Keys.home:\n        syntheticEvent.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RATING_ACTION.min : RATING_ACTION.max,\n          event: syntheticEvent\n        });\n        break;\n\n      case Keys.end:\n        syntheticEvent.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RATING_ACTION.max : RATING_ACTION.min,\n          event: syntheticEvent\n        });\n        break;\n\n      case Keys.esc:\n        syntheticEvent.preventDefault();\n        dispatchStateValue({\n          type: RATING_ACTION.deselect,\n          event: syntheticEvent\n        });\n        break;\n\n      default:\n        break;\n    }\n\n    if (props.onKeyDown) {\n      props.onKeyDown.call(undefined, {\n        value: value,\n        target: target.current,\n        syntheticEvent: syntheticEvent\n      });\n    }\n  }, [props.onKeyDown, dispatchStateValue, value]);\n  var handleFocus = React.useCallback(function (syntheticEvent) {\n    if (props.onFocus) {\n      var ev = {\n        target: target.current,\n        syntheticEvent: syntheticEvent\n      };\n      props.onFocus.call(undefined, ev);\n    }\n  }, [props.onFocus]);\n  var handleBlur = React.useCallback(function (syntheticEvent) {\n    if (props.onBlur) {\n      var ev = {\n        target: target.current,\n        syntheticEvent: syntheticEvent\n      };\n      props.onBlur.call(undefined, ev);\n    }\n  }, [props.onBlur]);\n  var handleItemMouseMove = React.useCallback(function (event) {\n    if (!event.target || !event.target.element) {\n      return;\n    }\n\n    if (precision === 'half') {\n      var rect = event.target.element.getBoundingClientRect();\n      var isFirstHalf = calcIsFirstHalf(dir ? dir : 'ltr', rect, event.syntheticEvent.clientX);\n      var payload = isFirstHalf ? event.target.value - step / 2 : event.target.value;\n      dispatchStateHover({\n        type: RATING_ACTION.select,\n        payload: payload,\n        event: event.syntheticEvent\n      });\n    } else {\n      dispatchStateHover({\n        type: RATING_ACTION.select,\n        payload: event.target.value,\n        event: event.syntheticEvent\n      });\n    }\n  }, [precision, step, dir]);\n  var handleMouseLeave = React.useCallback(function (event) {\n    dispatchStateHover({\n      type: RATING_ACTION.reset,\n      event: event.syntheticEvent\n    });\n  }, []);\n  var items = [];\n  var remainder = getRemainder(toRound(max - min, base), step);\n\n  for (var i = min; i <= max; i = toRound(i + step, base)) {\n    var itemValue = toRound(i + remainder, base);\n    var half = precision === 'half' ? isHalf(itemValue, hoveredValue !== null ? hoveredValue : value !== null ? value : 0, step) : false;\n    var selectedValue = isSelected(itemValue, value, step, selection);\n    var selected = isSelected(itemValue, hoveredValue !== null ? hoveredValue : value, step, selection);\n    var hovered = isSelected(itemValue, hoveredValue, step, selection);\n    items.push(React.createElement(Item, {\n      key: itemValue,\n      value: itemValue,\n      dir: dir,\n      title: String(half ? toRound(itemValue - step / 2, base) : itemValue),\n      icon: props.icon,\n      half: half,\n      selected: selectedValue || selected,\n      hovered: hovered,\n      onClick: handleItemClick,\n      onMouseMove: handleItemMouseMove,\n      onMouseLeave: handleMouseLeave\n    }, half && React.createElement(\"span\", {\n      className: 'k-rating-precision-complement',\n      style: (_a = {\n        width: '12px'\n      }, _a[dir === 'rtl' ? 'right' : 'left'] = '50%', _a)\n    }, React.createElement(\"span\", {\n      className: classNames('k-icon', (_b = {\n        'k-i-star-outline': !props.icon\n      }, _b[\"\".concat(props.icon, \"-outline\")] = props.icon, _b))\n    })), half && React.createElement(\"span\", {\n      className: 'k-rating-precision-part',\n      style: {\n        width: '12px'\n      }\n    }, React.createElement(\"span\", {\n      className: classNames('k-icon', (_c = {\n        'k-i-star': !props.icon\n      }, _c[\"\".concat(props.icon)] = props.icon, _c))\n    })), half && React.createElement(\"span\", {\n      style: {\n        width: '24px',\n        height: '24px',\n        display: 'block'\n      }\n    }), !half && React.createElement(\"span\", {\n      className: classNames('k-icon', (_d = {\n        'k-i-star': !props.icon && (hovered || selected && !hovered),\n        'k-i-star-outline': !props.icon && !hovered\n      }, _d[\"\".concat(props.icon)] = props.icon && (hovered || selected && !hovered), _d[\"\".concat(props.icon, \"-outline\")] = props.icon && !hovered, _d))\n    })));\n  }\n\n  return React.createElement(\"span\", {\n    id: props.id,\n    style: props.style,\n    ref: ratingRef,\n    role: \"slider\",\n    dir: dir,\n    tabIndex: getTabIndex(props.tabIndex, props.disabled, undefined),\n    className: classNames('k-rating k-widget', {\n      'k-rtl': dir === 'rtl',\n      'k-readonly': readonly,\n      'k-disabled': disabled\n    }, props.className),\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    \"aria-valuenow\": value !== null ? value : undefined,\n    \"aria-disabled\": disabled ? 'true' : undefined,\n    \"aria-label\": localization.toLanguageString(ratingAriaLabel, messages[ratingAriaLabel]),\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy\n  }, React.createElement(\"input\", {\n    id: 'rating',\n    className: 'k-hidden',\n    readOnly: readonly,\n    disabled: disabled\n  }), React.createElement(\"span\", {\n    className: 'k-rating-container'\n  }, items), props.label && React.createElement(\"span\", {\n    className: 'k-rating-label'\n  }, props.label));\n});\nvar propTypes = {\n  id: PropTypes.string,\n  dir: PropTypes.oneOf(['ltr', 'rtl']),\n  selection: PropTypes.oneOf(['continues', 'single']),\n  precision: PropTypes.oneOf(['item', 'half']),\n  value: function (props, propName, componentName) {\n    if (props.value && props.min && props.max && props.step) {\n      var correctValue = props.precision === 'half' ? isCorrectValue(props.min, props.max, props.step / 2, props.value) : isCorrectValue(props.min, props.max, props.step, props.value);\n\n      if (!correctValue && props.precision === 'half') {\n        return new Error(\"Invalid prop + \".concat(propName, \" supplied to \").concat(componentName, \".\\n                    The value of the { value } property is not correct, please check your values.\\n                    \"));\n      }\n    }\n\n    return null;\n  },\n  defaultValue: PropTypes.number,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: function (props, propName, componentName) {\n    if (props.step !== undefined && props.step <= 0) {\n      return new Error(\"Invalid prop + \".concat(propName, \" supplied to \").concat(componentName, \".\\n                The value of the { step } property is cannot be equal or less than \\\"0\\\", please check your values.\\n                \"));\n    }\n\n    return null;\n  },\n  hovered: PropTypes.number,\n  label: PropTypes.string,\n  readonly: PropTypes.bool,\n  disabled: PropTypes.bool,\n  half: PropTypes.bool,\n  icon: PropTypes.string,\n  ariaDescribedBy: PropTypes.string\n};\nvar defaultProps = {\n  dir: 'ltr',\n  min: 1,\n  max: 5,\n  step: 1,\n  item: RatingItem,\n  defaultValue: null,\n  readonly: false,\n  disabled: false,\n  selection: 'continues',\n  precision: 'item'\n};\nRating.displayName = 'KendoReactRating'; // TODO: delete casting when @types/react is updated!\n\nRating.propTypes = propTypes;\nRating.defaultProps = defaultProps;","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-inputs/dist/es/rating/Rating.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","classNames","useDir","Keys","getTabIndex","createPropsContext","usePropsContext","RatingItem","ratingReducer","RATING_ACTION","isSelected","isHalf","calcIsFirstHalf","isCorrectValue","toRound","getRemainder","messages","ratingAriaLabel","useLocalization","useRating","defaultValue","args","callback","_a","useState","state","setState","handleDispatchAction","action","newState","event","RatingPropsContext","Rating","forwardRef","directProps","ref","_b","_c","_d","props","localization","target","useRef","ratingRef","dir","useImperativeHandle","element","current","handleChange","useCallback","newValue","onChange","undefined","value","syntheticEvent","min","useMemo","defaultProps","max","precision","step","readonly","disabled","Item","item","_e","stateValue","dispatchStateValue","_f","stateHover","dispatchStateHover","hoveredValue","selection","base","handleItemClick","rect","getBoundingClientRect","isFirstHalf","clientX","payload","type","select","onClick","ev","handleKeyDown","keyCode","right","preventDefault","decrease","increase","left","home","end","esc","deselect","onKeyDown","handleFocus","onFocus","handleBlur","onBlur","handleItemMouseMove","handleMouseLeave","reset","items","remainder","itemValue","half","selectedValue","selected","hovered","push","createElement","key","title","String","icon","onMouseMove","onMouseLeave","className","style","width","concat","height","display","id","role","tabIndex","toLanguageString","ariaLabelledBy","ariaDescribedBy","readOnly","label","propTypes","string","oneOf","propName","componentName","correctValue","Error","number","bool","displayName"],"mappings":"AAAA,IAAIA,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAII,CAAT,IAAcL,CAAd,EAAiB,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AACP;;AACD,WAAON,CAAP;AACH,GAPD;;AAQA,SAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACH,CAVD;;AAWA,OAAO,KAAKO,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,WAAnC,EAAgDC,kBAAhD,EAAoEC,eAApE,QAA2F,8BAA3F;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,kBAA7C;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,eAA7B,EAA8CC,cAA9C,EAA8DC,OAA9D,EAAuEC,YAAvE,QAA2F,SAA3F;AACA,SAASC,QAAT,EAAmBC,eAAnB,QAA0C,aAA1C;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA;AACA;AACA;;AACA,IAAIC,SAAS,GAAG,UAAUC,YAAV,EAAwBC,IAAxB,EAA8BC,QAA9B,EAAwC;AACpD,MAAIC,EAAE,GAAGxB,KAAK,CAACyB,QAAN,CAAeJ,YAAf,CAAT;AAAA,MAAuCK,KAAK,GAAGF,EAAE,CAAC,CAAD,CAAjD;AAAA,MAAsDG,QAAQ,GAAGH,EAAE,CAAC,CAAD,CAAnE;;AACA,MAAII,oBAAoB,GAAG,UAAUC,MAAV,EAAkB;AACzC,QAAIC,QAAQ,GAAGrB,aAAa,CAACa,IAAI,CAACI,KAAL,IAAcA,KAAf,EAAsBxC,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK2C,MAAL,CAAT,EAAuBP,IAAvB,CAA9B,CAA5B;;AACA,QAAIC,QAAJ,EAAc;AACVA,MAAAA,QAAQ,CAACO,QAAD,EAAWD,MAAM,CAACE,KAAlB,CAAR;AACH;;AACDJ,IAAAA,QAAQ,CAACG,QAAD,CAAR;AACH,GAND;;AAOA,SAAO,CAACJ,KAAD,EAAQE,oBAAR,CAAP;AACH,CAVD;AAWA;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAO,IAAII,kBAAkB,GAAG1B,kBAAkB,EAA3C;AACP;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAI2B,MAAM,GAAGjC,KAAK,CAACkC,UAAN,CAAiB,UAAUC,WAAV,EAAuBC,GAAvB,EAA4B;AAC7D,MAAIZ,EAAJ,EAAQa,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB;;AACA,MAAIC,KAAK,GAAGjC,eAAe,CAACyB,kBAAD,EAAqBG,WAArB,CAA3B;AACA,MAAIM,YAAY,GAAGtB,eAAe,EAAlC;AACA,MAAIuB,MAAM,GAAG1C,KAAK,CAAC2C,MAAN,CAAa,IAAb,CAAb;AACA,MAAIC,SAAS,GAAG5C,KAAK,CAAC2C,MAAN,CAAa,IAAb,CAAhB;AACA,MAAIE,GAAG,GAAG1C,MAAM,CAACyC,SAAD,EAAYJ,KAAK,CAACK,GAAlB,CAAhB;AACA7C,EAAAA,KAAK,CAAC8C,mBAAN,CAA0BJ,MAA1B,EAAkC,YAAY;AAAE,WAAQ;AACpDK,MAAAA,OAAO,EAAEH,SAAS,CAACI,OADiC;AAEpDR,MAAAA,KAAK,EAAEA;AAF6C,KAAR;AAG3C,GAHL;AAIAxC,EAAAA,KAAK,CAAC8C,mBAAN,CAA0BV,GAA1B,EAA+B,YAAY;AAAE,WAAOM,MAAM,CAACM,OAAd;AAAwB,GAArE;AACA,MAAIC,YAAY,GAAGjD,KAAK,CAACkD,WAAN,CAAkB,UAAUC,QAAV,EAAoBpB,KAApB,EAA2B;AAC5D,QAAIS,KAAK,CAACY,QAAN,IAAkBV,MAAM,CAACM,OAA7B,EAAsC;AAClCR,MAAAA,KAAK,CAACY,QAAN,CAAetD,IAAf,CAAoBuD,SAApB,EAA+B;AAC3BC,QAAAA,KAAK,EAAEH,QADoB;AAE3BT,QAAAA,MAAM,EAAEA,MAAM,CAACM,OAFY;AAG3BO,QAAAA,cAAc,EAAExB;AAHW,OAA/B;AAKH;AACJ,GARkB,EAQhB,CAACS,KAAK,CAACY,QAAP,CARgB,CAAnB;AASA,MAAII,GAAG,GAAGxD,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACgB,GAAN,KAAcH,SAAd,GAA0Bb,KAAK,CAACgB,GAAhC,GAAsCE,YAAY,CAACF,GAA1D;AAAgE,GAA5F,EAA8F,CAAChB,KAAK,CAACgB,GAAP,CAA9F,CAAV;AACA,MAAIG,GAAG,GAAG3D,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACmB,GAAN,KAAcN,SAAd,GAA0Bb,KAAK,CAACmB,GAAhC,GAAsCD,YAAY,CAACC,GAA1D;AAAgE,GAA5F,EAA8F,CAACnB,KAAK,CAACmB,GAAP,CAA9F,CAAV;AACA,MAAIC,SAAS,GAAG5D,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACoB,SAAN,IAAmBF,YAAY,CAACE,SAAvC;AAAmD,GAA/E,EAAiF,CAACpB,KAAK,CAACoB,SAAP,CAAjF,CAAhB;AACA,MAAIC,IAAI,GAAG7D,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACqB,IAAN,KAAeR,SAAf,GAA2Bb,KAAK,CAACqB,IAAjC,GAAwCH,YAAY,CAACG,IAA5D;AAAmE,GAA/F,EAAiG,CAACrB,KAAK,CAACqB,IAAP,CAAjG,CAAX;AACA,MAAIC,QAAQ,GAAG9D,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACsB,QAAN,IAAkBJ,YAAY,CAACI,QAAtC;AAAiD,GAA7E,EAA+E,CAACtB,KAAK,CAACsB,QAAP,CAA/E,CAAf;AACA,MAAIC,QAAQ,GAAG/D,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACuB,QAAN,IAAkBL,YAAY,CAACK,QAAtC;AAAiD,GAA7E,EAA+E,CAACvB,KAAK,CAACuB,QAAP,CAA/E,CAAf;AACA,MAAIC,IAAI,GAAGhE,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACyB,IAAN,IAAcP,YAAY,CAACO,IAAlC;AAAyC,GAArE,EAAuE,CAACzB,KAAK,CAACyB,IAAP,CAAvE,CAAX;;AACA,MAAIC,EAAE,GAAG9C,SAAS,CAACoB,KAAK,CAACnB,YAAN,IAAsBqC,YAAY,CAACrC,YAApC,EAAkD;AAChEK,IAAAA,KAAK,EAAEc,KAAK,CAACc,KADmD;AAEhEE,IAAAA,GAAG,EAAEA,GAF2D;AAGhEG,IAAAA,GAAG,EAAEA,GAH2D;AAIhEE,IAAAA,IAAI,EAAED,SAAS,KAAK,MAAd,GAAuBC,IAAI,GAAG,CAA9B,GAAkCA;AAJwB,GAAlD,EAKfZ,YALe,CAAlB;AAAA,MAKkBkB,UAAU,GAAGD,EAAE,CAAC,CAAD,CALjC;AAAA,MAKsCE,kBAAkB,GAAGF,EAAE,CAAC,CAAD,CAL7D;;AAMA,MAAIG,EAAE,GAAGjD,SAAS,CAAC,IAAD,EAAO;AACrBM,IAAAA,KAAK,EAAEc,KAAK,CAACc,KADQ;AAErBE,IAAAA,GAAG,EAAEA,GAFgB;AAGrBG,IAAAA,GAAG,EAAEA,GAHgB;AAIrBE,IAAAA,IAAI,EAAED,SAAS,KAAK,MAAd,GAAuBC,IAAI,GAAG,CAA9B,GAAkCA,IAJnB;AAKrBD,IAAAA,SAAS,EAAEA;AALU,GAAP,CAAlB;AAAA,MAMIU,UAAU,GAAGD,EAAE,CAAC,CAAD,CANnB;AAAA,MAMwBE,kBAAkB,GAAGF,EAAE,CAAC,CAAD,CAN/C;;AAOA,MAAIf,KAAK,GAAGtD,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACc,KAAN,IAAea,UAAtB;AAAmC,GAA/D,EAAiE,CAAC3B,KAAK,CAACc,KAAP,EAAca,UAAd,CAAjE,CAAZ;AACA,MAAIK,YAAY,GAAGxE,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOa,UAAP;AAAoB,GAAhD,EAAkD,CAACA,UAAD,CAAlD,CAAnB;AACA,MAAIG,SAAS,GAAGzE,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOjB,KAAK,CAACiC,SAAN,IAAmBf,YAAY,CAACe,SAAvC;AAAmD,GAA/E,EAAiF,CAACjC,KAAK,CAACiC,SAAP,CAAjF,CAAhB;AACA,MAAIC,IAAI,GAAG1E,KAAK,CAACyD,OAAN,CAAc,YAAY;AAAE,WAAOI,IAAI,IAAID,SAAS,KAAK,MAAd,GAAuB,CAAvB,GAA2B,CAA/B,CAAX;AAA+C,GAA3E,EAA6E,CAACC,IAAD,EAAOD,SAAP,CAA7E,CAAX;AACA,MAAIe,eAAe,GAAG3E,KAAK,CAACkD,WAAN,CAAkB,UAAUnB,KAAV,EAAiB;AACrD,QAAI,CAACA,KAAK,CAACW,MAAP,IAAiB,CAACX,KAAK,CAACW,MAAN,CAAaK,OAA/B,IAA0Ce,QAA1C,IAAsDC,QAA1D,EAAoE;AAChE;AACH;;AACD,QAAIH,SAAS,KAAK,MAAlB,EAA0B;AACtB,UAAIgB,IAAI,GAAG7C,KAAK,CAACW,MAAN,CAAaK,OAAb,CAAqB8B,qBAArB,EAAX;AACA,UAAIC,WAAW,GAAGjE,eAAe,CAACgC,GAAG,GAAGA,GAAH,GAAS,KAAb,EAAoB+B,IAApB,EAA0B7C,KAAK,CAACwB,cAAN,CAAqBwB,OAA/C,CAAjC;AACA,UAAIC,OAAO,GAAGF,WAAW,GAAG/D,OAAO,CAACgB,KAAK,CAACW,MAAN,CAAaY,KAAb,GAAsBO,IAAI,GAAG,CAA9B,EAAkCa,IAAlC,CAAV,GAAoD3C,KAAK,CAACW,MAAN,CAAaY,KAA1F;AACAc,MAAAA,kBAAkB,CAAC;AAAEa,QAAAA,IAAI,EAAEvE,aAAa,CAACwE,MAAtB;AAA8BF,QAAAA,OAAO,EAAEA,OAAvC;AAAgDjD,QAAAA,KAAK,EAAEA,KAAK,CAACwB;AAA7D,OAAD,CAAlB;AACH,KALD,MAMK;AACDa,MAAAA,kBAAkB,CAAC;AAAEa,QAAAA,IAAI,EAAEvE,aAAa,CAACwE,MAAtB;AAA8BF,QAAAA,OAAO,EAAEjD,KAAK,CAACW,MAAN,CAAaY,KAApD;AAA2DvB,QAAAA,KAAK,EAAEA,KAAK,CAACwB;AAAxE,OAAD,CAAlB;AACH;;AACD,QAAIf,KAAK,CAAC2C,OAAV,EAAmB;AACf,UAAIC,EAAE,GAAG;AACL9B,QAAAA,KAAK,EAAEA,KADF;AAELZ,QAAAA,MAAM,EAAEA,MAAM,CAACM,OAFV;AAGLO,QAAAA,cAAc,EAAExB,KAAK,CAACwB;AAHjB,OAAT;AAKAf,MAAAA,KAAK,CAAC2C,OAAN,CAAcrF,IAAd,CAAmBuD,SAAnB,EAA8B+B,EAA9B;AACH;AACJ,GArBqB,EAqBnB,CAAC5C,KAAK,CAAC2C,OAAP,EAAgBf,kBAAhB,EAAoCd,KAApC,CArBmB,CAAtB;AAsBA,MAAI+B,aAAa,GAAGrF,KAAK,CAACkD,WAAN,CAAkB,UAAUK,cAAV,EAA0B;AAC5D,QAAIO,QAAQ,IAAIC,QAAhB,EAA0B;AACtB;AACH;;AACD,YAAQR,cAAc,CAAC+B,OAAvB;AACI,WAAKlF,IAAI,CAACmF,KAAV;AACIhC,QAAAA,cAAc,CAACiC,cAAf;AACApB,QAAAA,kBAAkB,CAAC;AACfa,UAAAA,IAAI,EAAEpC,GAAG,KAAK,KAAR,GAAgBnC,aAAa,CAAC+E,QAA9B,GAAyC/E,aAAa,CAACgF,QAD9C;AACwD3D,UAAAA,KAAK,EAAEwB;AAD/D,SAAD,CAAlB;AAGA;;AACJ,WAAKnD,IAAI,CAACuF,IAAV;AACIpC,QAAAA,cAAc,CAACiC,cAAf;AACApB,QAAAA,kBAAkB,CAAC;AACfa,UAAAA,IAAI,EAAEpC,GAAG,KAAK,KAAR,GAAgBnC,aAAa,CAACgF,QAA9B,GAAyChF,aAAa,CAAC+E,QAD9C;AACwD1D,UAAAA,KAAK,EAAEwB;AAD/D,SAAD,CAAlB;AAGA;;AACJ,WAAKnD,IAAI,CAACwF,IAAV;AACIrC,QAAAA,cAAc,CAACiC,cAAf;AACApB,QAAAA,kBAAkB,CAAC;AACfa,UAAAA,IAAI,EAAEpC,GAAG,KAAK,KAAR,GAAgBnC,aAAa,CAAC8C,GAA9B,GAAoC9C,aAAa,CAACiD,GADzC;AAC8C5B,UAAAA,KAAK,EAAEwB;AADrD,SAAD,CAAlB;AAGA;;AACJ,WAAKnD,IAAI,CAACyF,GAAV;AACItC,QAAAA,cAAc,CAACiC,cAAf;AACApB,QAAAA,kBAAkB,CAAC;AACfa,UAAAA,IAAI,EAAEpC,GAAG,KAAK,KAAR,GAAgBnC,aAAa,CAACiD,GAA9B,GAAoCjD,aAAa,CAAC8C,GADzC;AAC8CzB,UAAAA,KAAK,EAAEwB;AADrD,SAAD,CAAlB;AAGA;;AACJ,WAAKnD,IAAI,CAAC0F,GAAV;AACIvC,QAAAA,cAAc,CAACiC,cAAf;AACApB,QAAAA,kBAAkB,CAAC;AACfa,UAAAA,IAAI,EAAEvE,aAAa,CAACqF,QADL;AACehE,UAAAA,KAAK,EAAEwB;AADtB,SAAD,CAAlB;AAGA;;AACJ;AACI;AAhCR;;AAkCA,QAAIf,KAAK,CAACwD,SAAV,EAAqB;AACjBxD,MAAAA,KAAK,CAACwD,SAAN,CAAgBlG,IAAhB,CAAqBuD,SAArB,EAAgC;AAC5BC,QAAAA,KAAK,EAAEA,KADqB;AAE5BZ,QAAAA,MAAM,EAAEA,MAAM,CAACM,OAFa;AAG5BO,QAAAA,cAAc,EAAEA;AAHY,OAAhC;AAKH;AACJ,GA7CmB,EA6CjB,CAACf,KAAK,CAACwD,SAAP,EAAkB5B,kBAAlB,EAAsCd,KAAtC,CA7CiB,CAApB;AA8CA,MAAI2C,WAAW,GAAGjG,KAAK,CAACkD,WAAN,CAAkB,UAAUK,cAAV,EAA0B;AAC1D,QAAIf,KAAK,CAAC0D,OAAV,EAAmB;AACf,UAAId,EAAE,GAAG;AACL1C,QAAAA,MAAM,EAAEA,MAAM,CAACM,OADV;AAELO,QAAAA,cAAc,EAAEA;AAFX,OAAT;AAIAf,MAAAA,KAAK,CAAC0D,OAAN,CAAcpG,IAAd,CAAmBuD,SAAnB,EAA8B+B,EAA9B;AACH;AACJ,GARiB,EAQf,CAAC5C,KAAK,CAAC0D,OAAP,CARe,CAAlB;AASA,MAAIC,UAAU,GAAGnG,KAAK,CAACkD,WAAN,CAAkB,UAAUK,cAAV,EAA0B;AACzD,QAAIf,KAAK,CAAC4D,MAAV,EAAkB;AACd,UAAIhB,EAAE,GAAG;AACL1C,QAAAA,MAAM,EAAEA,MAAM,CAACM,OADV;AAELO,QAAAA,cAAc,EAAEA;AAFX,OAAT;AAIAf,MAAAA,KAAK,CAAC4D,MAAN,CAAatG,IAAb,CAAkBuD,SAAlB,EAA6B+B,EAA7B;AACH;AACJ,GARgB,EAQd,CAAC5C,KAAK,CAAC4D,MAAP,CARc,CAAjB;AASA,MAAIC,mBAAmB,GAAGrG,KAAK,CAACkD,WAAN,CAAkB,UAAUnB,KAAV,EAAiB;AACzD,QAAI,CAACA,KAAK,CAACW,MAAP,IAAiB,CAACX,KAAK,CAACW,MAAN,CAAaK,OAAnC,EAA4C;AACxC;AACH;;AACD,QAAIa,SAAS,KAAK,MAAlB,EAA0B;AACtB,UAAIgB,IAAI,GAAG7C,KAAK,CAACW,MAAN,CAAaK,OAAb,CAAqB8B,qBAArB,EAAX;AACA,UAAIC,WAAW,GAAGjE,eAAe,CAACgC,GAAG,GAAGA,GAAH,GAAS,KAAb,EAAoB+B,IAApB,EAA0B7C,KAAK,CAACwB,cAAN,CAAqBwB,OAA/C,CAAjC;AACA,UAAIC,OAAO,GAAGF,WAAW,GAAG/C,KAAK,CAACW,MAAN,CAAaY,KAAb,GAAsBO,IAAI,GAAG,CAAhC,GAAqC9B,KAAK,CAACW,MAAN,CAAaY,KAA3E;AACAiB,MAAAA,kBAAkB,CAAC;AAAEU,QAAAA,IAAI,EAAEvE,aAAa,CAACwE,MAAtB;AAA8BF,QAAAA,OAAO,EAAEA,OAAvC;AAAgDjD,QAAAA,KAAK,EAAEA,KAAK,CAACwB;AAA7D,OAAD,CAAlB;AACH,KALD,MAMK;AACDgB,MAAAA,kBAAkB,CAAC;AAAEU,QAAAA,IAAI,EAAEvE,aAAa,CAACwE,MAAtB;AAA8BF,QAAAA,OAAO,EAAEjD,KAAK,CAACW,MAAN,CAAaY,KAApD;AAA2DvB,QAAAA,KAAK,EAAEA,KAAK,CAACwB;AAAxE,OAAD,CAAlB;AACH;AACJ,GAbyB,EAavB,CAACK,SAAD,EAAYC,IAAZ,EAAkBhB,GAAlB,CAbuB,CAA1B;AAcA,MAAIyD,gBAAgB,GAAGtG,KAAK,CAACkD,WAAN,CAAkB,UAAUnB,KAAV,EAAiB;AACtDwC,IAAAA,kBAAkB,CAAC;AAAEU,MAAAA,IAAI,EAAEvE,aAAa,CAAC6F,KAAtB;AAA6BxE,MAAAA,KAAK,EAAEA,KAAK,CAACwB;AAA1C,KAAD,CAAlB;AACH,GAFsB,EAEpB,EAFoB,CAAvB;AAGA,MAAIiD,KAAK,GAAG,EAAZ;AACA,MAAIC,SAAS,GAAGzF,YAAY,CAACD,OAAO,CAAC4C,GAAG,GAAGH,GAAP,EAAYkB,IAAZ,CAAR,EAA2Bb,IAA3B,CAA5B;;AACA,OAAK,IAAItE,CAAC,GAAGiE,GAAb,EAAkBjE,CAAC,IAAIoE,GAAvB,EAA4BpE,CAAC,GAAGwB,OAAO,CAACxB,CAAC,GAAGsE,IAAL,EAAWa,IAAX,CAAvC,EAAyD;AACrD,QAAIgC,SAAS,GAAG3F,OAAO,CAACxB,CAAC,GAAGkH,SAAL,EAAgB/B,IAAhB,CAAvB;AACA,QAAIiC,IAAI,GAAG/C,SAAS,KAAK,MAAd,GACLhD,MAAM,CAAC8F,SAAD,EAAYlC,YAAY,KAAK,IAAjB,GAAwBA,YAAxB,GAAwClB,KAAK,KAAK,IAAV,GAAiBA,KAAjB,GAAyB,CAA7E,EAAiFO,IAAjF,CADD,GAEL,KAFN;AAGA,QAAI+C,aAAa,GAAGjG,UAAU,CAAC+F,SAAD,EAAYpD,KAAZ,EAAmBO,IAAnB,EAAyBY,SAAzB,CAA9B;AACA,QAAIoC,QAAQ,GAAGlG,UAAU,CAAC+F,SAAD,EAAYlC,YAAY,KAAK,IAAjB,GAAwBA,YAAxB,GAAuClB,KAAnD,EAA0DO,IAA1D,EAAgEY,SAAhE,CAAzB;AACA,QAAIqC,OAAO,GAAGnG,UAAU,CAAC+F,SAAD,EAAYlC,YAAZ,EAA0BX,IAA1B,EAAgCY,SAAhC,CAAxB;AACA+B,IAAAA,KAAK,CAACO,IAAN,CAAW/G,KAAK,CAACgH,aAAN,CAAoBhD,IAApB,EAA0B;AAAEiD,MAAAA,GAAG,EAAEP,SAAP;AAAkBpD,MAAAA,KAAK,EAAEoD,SAAzB;AAAoC7D,MAAAA,GAAG,EAAEA,GAAzC;AAA8CqE,MAAAA,KAAK,EAAEC,MAAM,CAACR,IAAI,GAAG5F,OAAO,CAAC2F,SAAS,GAAI7C,IAAI,GAAG,CAArB,EAAyBa,IAAzB,CAAV,GAA2CgC,SAAhD,CAA3D;AAAuHU,MAAAA,IAAI,EAAE5E,KAAK,CAAC4E,IAAnI;AAAyIT,MAAAA,IAAI,EAAEA,IAA/I;AAAqJE,MAAAA,QAAQ,EAAED,aAAa,IAAIC,QAAhL;AAA0LC,MAAAA,OAAO,EAAEA,OAAnM;AAA4M3B,MAAAA,OAAO,EAAER,eAArN;AAAsO0C,MAAAA,WAAW,EAAEhB,mBAAnP;AAAwQiB,MAAAA,YAAY,EAAEhB;AAAtR,KAA1B,EACPK,IAAI,IAAK3G,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,MAAAA,SAAS,EAAE,+BAAb;AAA8CC,MAAAA,KAAK,GAAGhG,EAAE,GAAG;AAAEiG,QAAAA,KAAK,EAAE;AAAT,OAAL,EAAwBjG,EAAE,CAACqB,GAAG,KAAK,KAAR,GAAgB,OAAhB,GAA0B,MAA3B,CAAF,GAAuC,KAA/D,EAAsErB,EAAzE;AAAnD,KAA5B,EACLxB,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,MAAAA,SAAS,EAAErH,UAAU,CAAC,QAAD,GAAYmC,EAAE,GAAG;AACxD,4BAAoB,CAACG,KAAK,CAAC4E;AAD6B,OAAL,EAGvD/E,EAAE,CAAC,GAAGqF,MAAH,CAAUlF,KAAK,CAAC4E,IAAhB,EAAsB,UAAtB,CAAD,CAAF,GAAwC5E,KAAK,CAAC4E,IAHS,EAIvD/E,EAJ2C;AAAvB,KAA5B,CADK,CADF,EAOPsE,IAAI,IAAK3G,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,MAAAA,SAAS,EAAE,yBAAb;AAAwCC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT;AAA/C,KAA5B,EACLzH,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,MAAAA,SAAS,EAAErH,UAAU,CAAC,QAAD,GAAYoC,EAAE,GAAG;AACxD,oBAAY,CAACE,KAAK,CAAC4E;AADqC,OAAL,EAGvD9E,EAAE,CAAC,GAAGoF,MAAH,CAAUlF,KAAK,CAAC4E,IAAhB,CAAD,CAAF,GAA4B5E,KAAK,CAAC4E,IAHqB,EAIvD9E,EAJ2C;AAAvB,KAA5B,CADK,CAPF,EAaPqE,IAAI,IAAK3G,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEQ,MAAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBE,QAAAA,MAAM,EAAE,MAAzB;AAAiCC,QAAAA,OAAO,EAAE;AAA1C;AAAT,KAA5B,CAbF,EAcP,CAACjB,IAAD,IAAU3G,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,MAAAA,SAAS,EAAErH,UAAU,CAAC,QAAD,GAAYqC,EAAE,GAAG;AAClE,oBAAY,CAACC,KAAK,CAAC4E,IAAP,KAAgBN,OAAO,IAAKD,QAAQ,IAAI,CAACC,OAAzC,CADsD;AAElE,4BAAoB,CAACtE,KAAK,CAAC4E,IAAP,IAAgB,CAACN;AAF6B,OAAL,EAIjEvE,EAAE,CAAC,GAAGmF,MAAH,CAAUlF,KAAK,CAAC4E,IAAhB,CAAD,CAAF,GAA4B5E,KAAK,CAAC4E,IAAN,KAAeN,OAAO,IAAKD,QAAQ,IAAI,CAACC,OAAxC,CAJqC,EAKjEvE,EAAE,CAAC,GAAGmF,MAAH,CAAUlF,KAAK,CAAC4E,IAAhB,EAAsB,UAAtB,CAAD,CAAF,GAAwC5E,KAAK,CAAC4E,IAAN,IAAe,CAACN,OALS,EAMjEvE,EANqD;AAAvB,KAA5B,CAdH,CAAX;AAqBH;;AACD,SAAQvC,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEa,IAAAA,EAAE,EAAErF,KAAK,CAACqF,EAAZ;AAAgBL,IAAAA,KAAK,EAAEhF,KAAK,CAACgF,KAA7B;AAAoCpF,IAAAA,GAAG,EAAEQ,SAAzC;AAAoDkF,IAAAA,IAAI,EAAE,QAA1D;AAAoEjF,IAAAA,GAAG,EAAEA,GAAzE;AAA8EkF,IAAAA,QAAQ,EAAE1H,WAAW,CAACmC,KAAK,CAACuF,QAAP,EAAiBvF,KAAK,CAACuB,QAAvB,EAAiCV,SAAjC,CAAnG;AAAgJkE,IAAAA,SAAS,EAAErH,UAAU,CAAC,mBAAD,EAAsB;AACvN,eAAS2C,GAAG,KAAK,KADsM;AAEvN,oBAAciB,QAFyM;AAGvN,oBAAcC;AAHyM,KAAtB,EAIlMvB,KAAK,CAAC+E,SAJ4L,CAArK;AAIXvB,IAAAA,SAAS,EAAEX,aAJA;AAIea,IAAAA,OAAO,EAAED,WAJxB;AAIqCG,IAAAA,MAAM,EAAED,UAJ7C;AAIyD,qBAAiB3C,GAJ1E;AAI+E,qBAAiBG,GAJhG;AAIqG,qBAAiBL,KAAK,KAAK,IAAV,GAAiBA,KAAjB,GAAyBD,SAJ/I;AAI0J,qBAAiBU,QAAQ,GAAG,MAAH,GAAYV,SAJ/L;AAI0M,kBAAcZ,YAAY,CAACuF,gBAAb,CAA8B9G,eAA9B,EAA+CD,QAAQ,CAACC,eAAD,CAAvD,CAJxN;AAImS,uBAAmBsB,KAAK,CAACyF,cAJ5T;AAI4U,wBAAoBzF,KAAK,CAAC0F;AAJtW,GAA5B,EAKJlI,KAAK,CAACgH,aAAN,CAAoB,OAApB,EAA6B;AAAEa,IAAAA,EAAE,EAAE,QAAN;AAAgBN,IAAAA,SAAS,EAAE,UAA3B;AAAuCY,IAAAA,QAAQ,EAAErE,QAAjD;AAA2DC,IAAAA,QAAQ,EAAEA;AAArE,GAA7B,CALI,EAMJ/D,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,IAAAA,SAAS,EAAE;AAAb,GAA5B,EAAiEf,KAAjE,CANI,EAOJhE,KAAK,CAAC4F,KAAN,IACIpI,KAAK,CAACgH,aAAN,CAAoB,MAApB,EAA4B;AAAEO,IAAAA,SAAS,EAAE;AAAb,GAA5B,EAA6D/E,KAAK,CAAC4F,KAAnE,CARA,CAAR;AASH,CA7LmB,CAAb;AA8LP,IAAIC,SAAS,GAAG;AACZR,EAAAA,EAAE,EAAE5H,SAAS,CAACqI,MADF;AAEZzF,EAAAA,GAAG,EAAE5C,SAAS,CAACsI,KAAV,CAAgB,CAAC,KAAD,EAAQ,KAAR,CAAhB,CAFO;AAGZ9D,EAAAA,SAAS,EAAExE,SAAS,CAACsI,KAAV,CAAgB,CAAC,WAAD,EAAc,QAAd,CAAhB,CAHC;AAIZ3E,EAAAA,SAAS,EAAE3D,SAAS,CAACsI,KAAV,CAAgB,CAAC,MAAD,EAAS,MAAT,CAAhB,CAJC;AAKZjF,EAAAA,KAAK,EAAE,UAAUd,KAAV,EAAiBgG,QAAjB,EAA2BC,aAA3B,EAA0C;AAC7C,QAAIjG,KAAK,CAACc,KAAN,IAAed,KAAK,CAACgB,GAArB,IAA4BhB,KAAK,CAACmB,GAAlC,IAAyCnB,KAAK,CAACqB,IAAnD,EAAyD;AACrD,UAAI6E,YAAY,GAAGlG,KAAK,CAACoB,SAAN,KAAoB,MAApB,GACb9C,cAAc,CAAC0B,KAAK,CAACgB,GAAP,EAAYhB,KAAK,CAACmB,GAAlB,EAAuBnB,KAAK,CAACqB,IAAN,GAAa,CAApC,EAAuCrB,KAAK,CAACc,KAA7C,CADD,GAEbxC,cAAc,CAAC0B,KAAK,CAACgB,GAAP,EAAYhB,KAAK,CAACmB,GAAlB,EAAuBnB,KAAK,CAACqB,IAA7B,EAAmCrB,KAAK,CAACc,KAAzC,CAFpB;;AAGA,UAAI,CAACoF,YAAD,IAAiBlG,KAAK,CAACoB,SAAN,KAAoB,MAAzC,EAAiD;AAC7C,eAAO,IAAI+E,KAAJ,CAAU,kBAAkBjB,MAAlB,CAAyBc,QAAzB,EAAmC,eAAnC,EAAoDd,MAApD,CAA2De,aAA3D,EAA0E,4HAA1E,CAAV,CAAP;AACH;AACJ;;AACD,WAAO,IAAP;AACH,GAfW;AAgBZpH,EAAAA,YAAY,EAAEpB,SAAS,CAAC2I,MAhBZ;AAiBZpF,EAAAA,GAAG,EAAEvD,SAAS,CAAC2I,MAjBH;AAkBZjF,EAAAA,GAAG,EAAE1D,SAAS,CAAC2I,MAlBH;AAmBZ/E,EAAAA,IAAI,EAAE,UAAUrB,KAAV,EAAiBgG,QAAjB,EAA2BC,aAA3B,EAA0C;AAC5C,QAAIjG,KAAK,CAACqB,IAAN,KAAeR,SAAf,IAA4Bb,KAAK,CAACqB,IAAN,IAAc,CAA9C,EAAiD;AAC7C,aAAO,IAAI8E,KAAJ,CAAU,kBAAkBjB,MAAlB,CAAyBc,QAAzB,EAAmC,eAAnC,EAAoDd,MAApD,CAA2De,aAA3D,EAA0E,0IAA1E,CAAV,CAAP;AACH;;AACD,WAAO,IAAP;AACH,GAxBW;AAyBZ3B,EAAAA,OAAO,EAAE7G,SAAS,CAAC2I,MAzBP;AA0BZR,EAAAA,KAAK,EAAEnI,SAAS,CAACqI,MA1BL;AA2BZxE,EAAAA,QAAQ,EAAE7D,SAAS,CAAC4I,IA3BR;AA4BZ9E,EAAAA,QAAQ,EAAE9D,SAAS,CAAC4I,IA5BR;AA6BZlC,EAAAA,IAAI,EAAE1G,SAAS,CAAC4I,IA7BJ;AA8BZzB,EAAAA,IAAI,EAAEnH,SAAS,CAACqI,MA9BJ;AA+BZJ,EAAAA,eAAe,EAAEjI,SAAS,CAACqI;AA/Bf,CAAhB;AAiCA,IAAI5E,YAAY,GAAG;AACfb,EAAAA,GAAG,EAAE,KADU;AAEfW,EAAAA,GAAG,EAAE,CAFU;AAGfG,EAAAA,GAAG,EAAE,CAHU;AAIfE,EAAAA,IAAI,EAAE,CAJS;AAKfI,EAAAA,IAAI,EAAEzD,UALS;AAMfa,EAAAA,YAAY,EAAE,IANC;AAOfyC,EAAAA,QAAQ,EAAE,KAPK;AAQfC,EAAAA,QAAQ,EAAE,KARK;AASfU,EAAAA,SAAS,EAAE,WATI;AAUfb,EAAAA,SAAS,EAAE;AAVI,CAAnB;AAYA3B,MAAM,CAAC6G,WAAP,GAAqB,kBAArB,C,CACA;;AACA7G,MAAM,CAACoG,SAAP,GAAmBA,SAAnB;AACApG,MAAM,CAACyB,YAAP,GAAsBA,YAAtB","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, useDir, Keys, getTabIndex, createPropsContext, usePropsContext } from '@progress/kendo-react-common';\nimport { RatingItem } from './RatingItem';\nimport { ratingReducer, RATING_ACTION } from './rating-reducer';\nimport { isSelected, isHalf, calcIsFirstHalf, isCorrectValue, toRound, getRemainder } from './utils';\nimport { messages, ratingAriaLabel } from '../messages';\nimport { useLocalization } from '@progress/kendo-react-intl';\n/**\n * @hidden\n */\nvar useRating = function (defaultValue, args, callback) {\n    var _a = React.useState(defaultValue), state = _a[0], setState = _a[1];\n    var handleDispatchAction = function (action) {\n        var newState = ratingReducer(args.state || state, __assign(__assign({}, action), args));\n        if (callback) {\n            callback(newState, action.event);\n        }\n        setState(newState);\n    };\n    return [state, handleDispatchAction];\n};\n/**\n * Represents the PropsContext of the `Rating` component.\n * Used for global configuration of all `Rating` instances.\n *\n * For more information, refer to the [Inputs Props Context]({% slug props-context_inputs %}) article.\n */\nexport var RatingPropsContext = createPropsContext();\n/**\n * Represents the [KendoReact Rating component]({% slug overview_rating %}).\n *\n * Accepts properties of type [RatingProps]({% slug api_inputs_ratingprops %}).\n * Obtaining the `ref` returns an object of type [RatingHandle]({% slug api_inputs_ratinghandle %}).\n */\nexport var Rating = React.forwardRef(function (directProps, ref) {\n    var _a, _b, _c, _d;\n    var props = usePropsContext(RatingPropsContext, directProps);\n    var localization = useLocalization();\n    var target = React.useRef(null);\n    var ratingRef = React.useRef(null);\n    var dir = useDir(ratingRef, props.dir);\n    React.useImperativeHandle(target, function () { return ({\n        element: ratingRef.current,\n        props: props\n    }); });\n    React.useImperativeHandle(ref, function () { return target.current; });\n    var handleChange = React.useCallback(function (newValue, event) {\n        if (props.onChange && target.current) {\n            props.onChange.call(undefined, {\n                value: newValue,\n                target: target.current,\n                syntheticEvent: event\n            });\n        }\n    }, [props.onChange]);\n    var min = React.useMemo(function () { return props.min !== undefined ? props.min : defaultProps.min; }, [props.min]);\n    var max = React.useMemo(function () { return props.max !== undefined ? props.max : defaultProps.max; }, [props.max]);\n    var precision = React.useMemo(function () { return props.precision || defaultProps.precision; }, [props.precision]);\n    var step = React.useMemo(function () { return props.step !== undefined ? props.step : defaultProps.step; }, [props.step]);\n    var readonly = React.useMemo(function () { return props.readonly || defaultProps.readonly; }, [props.readonly]);\n    var disabled = React.useMemo(function () { return props.disabled || defaultProps.disabled; }, [props.disabled]);\n    var Item = React.useMemo(function () { return props.item || defaultProps.item; }, [props.item]);\n    var _e = useRating(props.defaultValue || defaultProps.defaultValue, {\n        state: props.value,\n        min: min,\n        max: max,\n        step: precision === 'half' ? step / 2 : step\n    }, handleChange), stateValue = _e[0], dispatchStateValue = _e[1];\n    var _f = useRating(null, {\n        state: props.value,\n        min: min,\n        max: max,\n        step: precision === 'half' ? step / 2 : step,\n        precision: precision\n    }), stateHover = _f[0], dispatchStateHover = _f[1];\n    var value = React.useMemo(function () { return props.value || stateValue; }, [props.value, stateValue]);\n    var hoveredValue = React.useMemo(function () { return stateHover; }, [stateHover]);\n    var selection = React.useMemo(function () { return props.selection || defaultProps.selection; }, [props.selection]);\n    var base = React.useMemo(function () { return step / (precision === 'half' ? 2 : 1); }, [step, precision]);\n    var handleItemClick = React.useCallback(function (event) {\n        if (!event.target || !event.target.element || readonly || disabled) {\n            return;\n        }\n        if (precision === 'half') {\n            var rect = event.target.element.getBoundingClientRect();\n            var isFirstHalf = calcIsFirstHalf(dir ? dir : 'ltr', rect, event.syntheticEvent.clientX);\n            var payload = isFirstHalf ? toRound(event.target.value - (step / 2), base) : event.target.value;\n            dispatchStateValue({ type: RATING_ACTION.select, payload: payload, event: event.syntheticEvent });\n        }\n        else {\n            dispatchStateValue({ type: RATING_ACTION.select, payload: event.target.value, event: event.syntheticEvent });\n        }\n        if (props.onClick) {\n            var ev = {\n                value: value,\n                target: target.current,\n                syntheticEvent: event.syntheticEvent\n            };\n            props.onClick.call(undefined, ev);\n        }\n    }, [props.onClick, dispatchStateValue, value]);\n    var handleKeyDown = React.useCallback(function (syntheticEvent) {\n        if (readonly || disabled) {\n            return;\n        }\n        switch (syntheticEvent.keyCode) {\n            case Keys.right:\n                syntheticEvent.preventDefault();\n                dispatchStateValue({\n                    type: dir === 'rtl' ? RATING_ACTION.decrease : RATING_ACTION.increase, event: syntheticEvent\n                });\n                break;\n            case Keys.left:\n                syntheticEvent.preventDefault();\n                dispatchStateValue({\n                    type: dir === 'rtl' ? RATING_ACTION.increase : RATING_ACTION.decrease, event: syntheticEvent\n                });\n                break;\n            case Keys.home:\n                syntheticEvent.preventDefault();\n                dispatchStateValue({\n                    type: dir === 'rtl' ? RATING_ACTION.min : RATING_ACTION.max, event: syntheticEvent\n                });\n                break;\n            case Keys.end:\n                syntheticEvent.preventDefault();\n                dispatchStateValue({\n                    type: dir === 'rtl' ? RATING_ACTION.max : RATING_ACTION.min, event: syntheticEvent\n                });\n                break;\n            case Keys.esc:\n                syntheticEvent.preventDefault();\n                dispatchStateValue({\n                    type: RATING_ACTION.deselect, event: syntheticEvent\n                });\n                break;\n            default:\n                break;\n        }\n        if (props.onKeyDown) {\n            props.onKeyDown.call(undefined, {\n                value: value,\n                target: target.current,\n                syntheticEvent: syntheticEvent\n            });\n        }\n    }, [props.onKeyDown, dispatchStateValue, value]);\n    var handleFocus = React.useCallback(function (syntheticEvent) {\n        if (props.onFocus) {\n            var ev = {\n                target: target.current,\n                syntheticEvent: syntheticEvent\n            };\n            props.onFocus.call(undefined, ev);\n        }\n    }, [props.onFocus]);\n    var handleBlur = React.useCallback(function (syntheticEvent) {\n        if (props.onBlur) {\n            var ev = {\n                target: target.current,\n                syntheticEvent: syntheticEvent\n            };\n            props.onBlur.call(undefined, ev);\n        }\n    }, [props.onBlur]);\n    var handleItemMouseMove = React.useCallback(function (event) {\n        if (!event.target || !event.target.element) {\n            return;\n        }\n        if (precision === 'half') {\n            var rect = event.target.element.getBoundingClientRect();\n            var isFirstHalf = calcIsFirstHalf(dir ? dir : 'ltr', rect, event.syntheticEvent.clientX);\n            var payload = isFirstHalf ? event.target.value - (step / 2) : event.target.value;\n            dispatchStateHover({ type: RATING_ACTION.select, payload: payload, event: event.syntheticEvent });\n        }\n        else {\n            dispatchStateHover({ type: RATING_ACTION.select, payload: event.target.value, event: event.syntheticEvent });\n        }\n    }, [precision, step, dir]);\n    var handleMouseLeave = React.useCallback(function (event) {\n        dispatchStateHover({ type: RATING_ACTION.reset, event: event.syntheticEvent });\n    }, []);\n    var items = [];\n    var remainder = getRemainder(toRound(max - min, base), step);\n    for (var i = min; i <= max; i = toRound(i + step, base)) {\n        var itemValue = toRound(i + remainder, base);\n        var half = precision === 'half'\n            ? isHalf(itemValue, hoveredValue !== null ? hoveredValue : (value !== null ? value : 0), step)\n            : false;\n        var selectedValue = isSelected(itemValue, value, step, selection);\n        var selected = isSelected(itemValue, hoveredValue !== null ? hoveredValue : value, step, selection);\n        var hovered = isSelected(itemValue, hoveredValue, step, selection);\n        items.push(React.createElement(Item, { key: itemValue, value: itemValue, dir: dir, title: String(half ? toRound(itemValue - (step / 2), base) : itemValue), icon: props.icon, half: half, selected: selectedValue || selected, hovered: hovered, onClick: handleItemClick, onMouseMove: handleItemMouseMove, onMouseLeave: handleMouseLeave },\n            half && (React.createElement(\"span\", { className: 'k-rating-precision-complement', style: (_a = { width: '12px' }, _a[dir === 'rtl' ? 'right' : 'left'] = '50%', _a) },\n                React.createElement(\"span\", { className: classNames('k-icon', (_b = {\n                            'k-i-star-outline': !props.icon\n                        },\n                        _b[\"\".concat(props.icon, \"-outline\")] = props.icon,\n                        _b)) }))),\n            half && (React.createElement(\"span\", { className: 'k-rating-precision-part', style: { width: '12px' } },\n                React.createElement(\"span\", { className: classNames('k-icon', (_c = {\n                            'k-i-star': !props.icon\n                        },\n                        _c[\"\".concat(props.icon)] = props.icon,\n                        _c)) }))),\n            half && (React.createElement(\"span\", { style: { width: '24px', height: '24px', display: 'block' } })),\n            !half && (React.createElement(\"span\", { className: classNames('k-icon', (_d = {\n                        'k-i-star': !props.icon && (hovered || (selected && !hovered)),\n                        'k-i-star-outline': !props.icon && (!hovered)\n                    },\n                    _d[\"\".concat(props.icon)] = props.icon && (hovered || (selected && !hovered)),\n                    _d[\"\".concat(props.icon, \"-outline\")] = props.icon && (!hovered),\n                    _d)) }))));\n    }\n    return (React.createElement(\"span\", { id: props.id, style: props.style, ref: ratingRef, role: \"slider\", dir: dir, tabIndex: getTabIndex(props.tabIndex, props.disabled, undefined), className: classNames('k-rating k-widget', {\n            'k-rtl': dir === 'rtl',\n            'k-readonly': readonly,\n            'k-disabled': disabled\n        }, props.className), onKeyDown: handleKeyDown, onFocus: handleFocus, onBlur: handleBlur, \"aria-valuemin\": min, \"aria-valuemax\": max, \"aria-valuenow\": value !== null ? value : undefined, \"aria-disabled\": disabled ? 'true' : undefined, \"aria-label\": localization.toLanguageString(ratingAriaLabel, messages[ratingAriaLabel]), \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy },\n        React.createElement(\"input\", { id: 'rating', className: 'k-hidden', readOnly: readonly, disabled: disabled }),\n        React.createElement(\"span\", { className: 'k-rating-container' }, items),\n        props.label &&\n            React.createElement(\"span\", { className: 'k-rating-label' }, props.label)));\n});\nvar propTypes = {\n    id: PropTypes.string,\n    dir: PropTypes.oneOf(['ltr', 'rtl']),\n    selection: PropTypes.oneOf(['continues', 'single']),\n    precision: PropTypes.oneOf(['item', 'half']),\n    value: function (props, propName, componentName) {\n        if (props.value && props.min && props.max && props.step) {\n            var correctValue = props.precision === 'half'\n                ? isCorrectValue(props.min, props.max, props.step / 2, props.value)\n                : isCorrectValue(props.min, props.max, props.step, props.value);\n            if (!correctValue && props.precision === 'half') {\n                return new Error(\"Invalid prop + \".concat(propName, \" supplied to \").concat(componentName, \".\\n                    The value of the { value } property is not correct, please check your values.\\n                    \"));\n            }\n        }\n        return null;\n    },\n    defaultValue: PropTypes.number,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: function (props, propName, componentName) {\n        if (props.step !== undefined && props.step <= 0) {\n            return new Error(\"Invalid prop + \".concat(propName, \" supplied to \").concat(componentName, \".\\n                The value of the { step } property is cannot be equal or less than \\\"0\\\", please check your values.\\n                \"));\n        }\n        return null;\n    },\n    hovered: PropTypes.number,\n    label: PropTypes.string,\n    readonly: PropTypes.bool,\n    disabled: PropTypes.bool,\n    half: PropTypes.bool,\n    icon: PropTypes.string,\n    ariaDescribedBy: PropTypes.string\n};\nvar defaultProps = {\n    dir: 'ltr',\n    min: 1,\n    max: 5,\n    step: 1,\n    item: RatingItem,\n    defaultValue: null,\n    readonly: false,\n    disabled: false,\n    selection: 'continues',\n    precision: 'item'\n};\nRating.displayName = 'KendoReactRating';\n// TODO: delete casting when @types/react is updated!\nRating.propTypes = propTypes;\nRating.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}