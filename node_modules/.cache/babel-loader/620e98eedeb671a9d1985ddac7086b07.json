{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport VirtualScroll from './VirtualScroll';\nimport { Navigation } from './Navigation';\nimport { scrollToItem, areSame } from './utils';\nimport { guid } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\n\nvar DropDownBase =\n/** @class */\nfunction () {\n  function DropDownBase(component) {\n    var _this = this;\n\n    this.wrapper = null;\n    this.list = null;\n    this.vs = new VirtualScroll();\n    this.navigation = new Navigation();\n\n    this.handleItemClick = function (index, event) {\n      var state = _this.initState();\n\n      state.syntheticEvent = event;\n      event.stopPropagation();\n\n      _this.component.handleItemSelect(index, state);\n\n      _this.togglePopup(state);\n\n      _this.applyState(state);\n    };\n\n    this.handleFocus = function (event) {\n      if (!_this.component.state.focused) {\n        var state = _this.initState();\n\n        state.data.focused = true;\n        state.events.push({\n          type: 'onFocus'\n        });\n        state.syntheticEvent = event;\n\n        _this.applyState(state);\n      }\n    };\n\n    this.filterChanged = function (text, state) {\n      var _a = _this.component.props,\n          textField = _a.textField,\n          filterable = _a.filterable;\n\n      if (filterable) {\n        state.events.push({\n          type: 'onFilterChange',\n          filter: {\n            field: textField,\n            operator: 'contains',\n            ignoreCase: true,\n            value: text\n          }\n        });\n      }\n    };\n\n    this.togglePopup = function (state) {\n      var props = _this.component.props;\n      var opened = props.opened !== undefined ? props.opened : _this.component.state.opened;\n\n      if (props.opened === undefined) {\n        state.data.opened = !opened;\n      }\n\n      if (opened) {\n        state.events.push({\n          type: 'onClose'\n        });\n      } else {\n        state.events.push({\n          type: 'onOpen'\n        });\n\n        _this.calculatePopupWidth();\n      }\n    };\n\n    this.pageChange = function (page, syntheticEvent) {\n      var state = _this.initState();\n\n      state.syntheticEvent = syntheticEvent;\n\n      _this.triggerOnPageChange(state, page.skip, page.take);\n\n      _this.applyState(state);\n    };\n\n    this.scrollToVirtualItem = function (virtual, selectedItemIndex) {\n      var vs = _this.vs;\n      vs.enabled = false;\n\n      if (virtual.skip === 0) {\n        vs.reset();\n      } else if (virtual.skip + virtual.pageSize === virtual.total) {\n        vs.scrollToEnd();\n      } else {\n        var scrollTop = vs.translate;\n\n        if (scrollTop === 0) {\n          vs.calcScrollElementHeight();\n          scrollTop = vs.itemHeight * virtual.skip;\n          vs.translateTo(scrollTop - vs.itemHeight);\n        }\n\n        if (vs.container) {\n          vs.container.scrollTop = scrollTop;\n        }\n\n        _this.scrollToItem(selectedItemIndex, true);\n      }\n\n      window.setTimeout(function () {\n        return vs.enabled = true;\n      }, 10);\n    };\n\n    this.renderScrollElement = function () {\n      var vs = _this.vs;\n      return vs.enabled && React.createElement(\"div\", {\n        ref: function (element) {\n          return vs.scrollElement = element;\n        },\n        key: 'scrollElementKey'\n      });\n    };\n\n    this.listBoxId = guid();\n    this.guid = guid();\n    this.component = component;\n    this.vs.PageChange = this.pageChange;\n  }\n\n  DropDownBase.prototype.didMount = function () {\n    var props = this.component.props;\n    var popupSettings = props.popupSettings || {};\n    var style = props.style || {};\n    var popupWidth = popupSettings.width;\n    var shouldUpdate = props.opened === true;\n\n    if (popupWidth === undefined) {\n      this.calculatePopupWidth();\n    }\n\n    if (props.dir === undefined && style.direction === undefined) {\n      this.calculateDir();\n      shouldUpdate = true;\n    }\n\n    if (shouldUpdate) {\n      this.component.forceUpdate();\n    }\n  };\n\n  DropDownBase.prototype.calculateDir = function () {\n    var element = this.component.element;\n\n    if (element && element.ownerDocument && element.ownerDocument.defaultView) {\n      this.dirCalculated = element.ownerDocument.defaultView.getComputedStyle(element).direction || undefined;\n    }\n  };\n\n  DropDownBase.prototype.calculatePopupWidth = function () {\n    if (this.wrapper) {\n      this.popupWidth = this.wrapper.offsetWidth + 'px';\n    }\n  };\n\n  DropDownBase.prototype.scrollToItem = function (itemIndex, vsEnabled) {\n    var list = this.list || this.vs.list;\n\n    if (list && itemIndex >= 0) {\n      var vs = this.vs;\n      var scrollElement = vs.container || list.parentNode;\n      var virtualScroll = vsEnabled !== undefined ? vsEnabled : vs.enabled;\n      scrollToItem(scrollElement, list, itemIndex, vs.translate, virtualScroll);\n    }\n  };\n\n  DropDownBase.prototype.initState = function () {\n    var state = {\n      data: {},\n      events: [],\n      syntheticEvent: undefined\n    };\n    return state;\n  };\n\n  DropDownBase.prototype.applyState = function (state) {\n    var _this = this;\n\n    if (Object.keys(state.data).length > 0) {\n      this.component.setState(state.data);\n    }\n\n    var eventArgs = {\n      syntheticEvent: state.syntheticEvent,\n      nativeEvent: state.syntheticEvent ? state.syntheticEvent.nativeEvent : undefined,\n      target: this.component,\n      value: this.component.value\n    };\n    state.events.forEach(function (eventData) {\n      var type = eventData.type;\n      delete eventData.type;\n      var handler = type && _this.component.props[type];\n\n      if (handler) {\n        handler.call(undefined, __assign(__assign({}, eventArgs), eventData));\n      }\n    });\n  };\n\n  DropDownBase.prototype.triggerOnPageChange = function (state, skip, take) {\n    var virtual = this.component.props.virtual;\n\n    if (virtual) {\n      var newSkip = Math.min(Math.max(0, skip), Math.max(0, virtual.total - take));\n\n      if (newSkip !== virtual.skip) {\n        state.events.push({\n          type: 'onPageChange',\n          page: {\n            skip: newSkip,\n            take: take\n          }\n        });\n      }\n    }\n  };\n\n  DropDownBase.prototype.triggerPageChangeCornerItems = function (item, state) {\n    var props = this.component.props;\n    var _a = props.data,\n        data = _a === void 0 ? [] : _a,\n        dataItemKey = props.dataItemKey,\n        virtual = props.virtual;\n    var opened = props.opened !== undefined ? props.opened : this.component.state.opened;\n\n    if (item && virtual && this.vs.enabled) {\n      if (virtual.skip > 0 && areSame(item, data[0], dataItemKey)) {\n        this.triggerOnPageChange(state, virtual.skip - 1, virtual.pageSize);\n      } else if (!opened && virtual.skip + virtual.pageSize < virtual.total && areSame(item, data[data.length - 1], dataItemKey)) {\n        this.triggerOnPageChange(state, virtual.skip + 1, virtual.pageSize);\n      }\n    }\n  };\n\n  DropDownBase.prototype.getPopupSettings = function () {\n    return Object.assign({}, DropDownBase.defaultProps.popupSettings, this.component.props.popupSettings);\n  };\n\n  DropDownBase.basicPropTypes = {\n    opened: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.string,\n    tabIndex: PropTypes.number,\n    accessKey: PropTypes.string,\n    data: PropTypes.array,\n    textField: PropTypes.string,\n    className: PropTypes.string,\n    label: PropTypes.string,\n    loading: PropTypes.bool,\n    popupSettings: PropTypes.shape({\n      animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n        openDuration: PropTypes.number,\n        closeDuration: PropTypes.number\n      })]),\n      popupClass: PropTypes.string,\n      className: PropTypes.string,\n      appendTo: PropTypes.any,\n      width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    }),\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    itemRender: PropTypes.func,\n    listNoDataRender: PropTypes.func,\n    focusedItemIndex: PropTypes.func,\n    header: PropTypes.node,\n    footer: PropTypes.node\n  };\n  DropDownBase.propTypes = __assign(__assign({}, DropDownBase.basicPropTypes), {\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    filterable: PropTypes.bool,\n    filter: PropTypes.string,\n    virtual: PropTypes.shape({\n      pageSize: PropTypes.number.isRequired,\n      skip: PropTypes.number.isRequired,\n      total: PropTypes.number.isRequired\n    }),\n    onFilterChange: PropTypes.func,\n    onPageChange: PropTypes.func\n  });\n  DropDownBase.defaultProps = {\n    popupSettings: {\n      height: '200px'\n    },\n    required: false,\n    validityStyles: true\n  };\n  return DropDownBase;\n}();\n\nexport default DropDownBase;","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-dropdowns/dist/es/common/DropDownBase.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","PropTypes","VirtualScroll","Navigation","scrollToItem","areSame","guid","DropDownBase","component","_this","wrapper","list","vs","navigation","handleItemClick","index","event","state","initState","syntheticEvent","stopPropagation","handleItemSelect","togglePopup","applyState","handleFocus","focused","data","events","push","type","filterChanged","text","_a","props","textField","filterable","filter","field","operator","ignoreCase","value","opened","undefined","calculatePopupWidth","pageChange","page","triggerOnPageChange","skip","take","scrollToVirtualItem","virtual","selectedItemIndex","enabled","reset","pageSize","total","scrollToEnd","scrollTop","translate","calcScrollElementHeight","itemHeight","translateTo","container","window","setTimeout","renderScrollElement","createElement","ref","element","scrollElement","key","listBoxId","PageChange","didMount","popupSettings","style","popupWidth","width","shouldUpdate","dir","direction","calculateDir","forceUpdate","ownerDocument","defaultView","dirCalculated","getComputedStyle","offsetWidth","itemIndex","vsEnabled","parentNode","virtualScroll","keys","setState","eventArgs","nativeEvent","target","forEach","eventData","handler","newSkip","Math","min","max","triggerPageChangeCornerItems","item","dataItemKey","getPopupSettings","defaultProps","basicPropTypes","bool","disabled","string","tabIndex","number","accessKey","array","className","label","loading","shape","animate","oneOfType","openDuration","closeDuration","popupClass","appendTo","any","height","onOpen","func","onClose","onFocus","onBlur","onChange","itemRender","listNoDataRender","focusedItemIndex","header","node","footer","propTypes","defaultValue","isRequired","onFilterChange","onPageChange","required","validityStyles"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport VirtualScroll from './VirtualScroll';\nimport { Navigation } from './Navigation';\nimport { scrollToItem, areSame } from './utils';\nimport { guid } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\nvar DropDownBase = /** @class */ (function () {\n    function DropDownBase(component) {\n        var _this = this;\n        this.wrapper = null;\n        this.list = null;\n        this.vs = new VirtualScroll();\n        this.navigation = new Navigation();\n        this.handleItemClick = function (index, event) {\n            var state = _this.initState();\n            state.syntheticEvent = event;\n            event.stopPropagation();\n            _this.component.handleItemSelect(index, state);\n            _this.togglePopup(state);\n            _this.applyState(state);\n        };\n        this.handleFocus = function (event) {\n            if (!_this.component.state.focused) {\n                var state = _this.initState();\n                state.data.focused = true;\n                state.events.push({ type: 'onFocus' });\n                state.syntheticEvent = event;\n                _this.applyState(state);\n            }\n        };\n        this.filterChanged = function (text, state) {\n            var _a = _this.component.props, textField = _a.textField, filterable = _a.filterable;\n            if (filterable) {\n                state.events.push({\n                    type: 'onFilterChange',\n                    filter: {\n                        field: textField,\n                        operator: 'contains',\n                        ignoreCase: true,\n                        value: text\n                    }\n                });\n            }\n        };\n        this.togglePopup = function (state) {\n            var props = _this.component.props;\n            var opened = props.opened !== undefined ? props.opened : _this.component.state.opened;\n            if (props.opened === undefined) {\n                state.data.opened = !opened;\n            }\n            if (opened) {\n                state.events.push({ type: 'onClose' });\n            }\n            else {\n                state.events.push({ type: 'onOpen' });\n                _this.calculatePopupWidth();\n            }\n        };\n        this.pageChange = function (page, syntheticEvent) {\n            var state = _this.initState();\n            state.syntheticEvent = syntheticEvent;\n            _this.triggerOnPageChange(state, page.skip, page.take);\n            _this.applyState(state);\n        };\n        this.scrollToVirtualItem = function (virtual, selectedItemIndex) {\n            var vs = _this.vs;\n            vs.enabled = false;\n            if (virtual.skip === 0) {\n                vs.reset();\n            }\n            else if (virtual.skip + virtual.pageSize === virtual.total) {\n                vs.scrollToEnd();\n            }\n            else {\n                var scrollTop = vs.translate;\n                if (scrollTop === 0) {\n                    vs.calcScrollElementHeight();\n                    scrollTop = (vs.itemHeight * virtual.skip);\n                    vs.translateTo(scrollTop - vs.itemHeight);\n                }\n                if (vs.container) {\n                    vs.container.scrollTop = scrollTop;\n                }\n                _this.scrollToItem(selectedItemIndex, true);\n            }\n            window.setTimeout(function () { return vs.enabled = true; }, 10);\n        };\n        this.renderScrollElement = function () {\n            var vs = _this.vs;\n            return vs.enabled && (React.createElement(\"div\", { ref: function (element) { return vs.scrollElement = element; }, key: 'scrollElementKey' }));\n        };\n        this.listBoxId = guid();\n        this.guid = guid();\n        this.component = component;\n        this.vs.PageChange = this.pageChange;\n    }\n    DropDownBase.prototype.didMount = function () {\n        var props = this.component.props;\n        var popupSettings = props.popupSettings || {};\n        var style = props.style || {};\n        var popupWidth = popupSettings.width;\n        var shouldUpdate = props.opened === true;\n        if (popupWidth === undefined) {\n            this.calculatePopupWidth();\n        }\n        if (props.dir === undefined && style.direction === undefined) {\n            this.calculateDir();\n            shouldUpdate = true;\n        }\n        if (shouldUpdate) {\n            this.component.forceUpdate();\n        }\n    };\n    DropDownBase.prototype.calculateDir = function () {\n        var element = this.component.element;\n        if (element && element.ownerDocument && element.ownerDocument.defaultView) {\n            this.dirCalculated = element.ownerDocument.defaultView.getComputedStyle(element).direction || undefined;\n        }\n    };\n    DropDownBase.prototype.calculatePopupWidth = function () {\n        if (this.wrapper) {\n            this.popupWidth = this.wrapper.offsetWidth + 'px';\n        }\n    };\n    DropDownBase.prototype.scrollToItem = function (itemIndex, vsEnabled) {\n        var list = this.list || this.vs.list;\n        if (list && itemIndex >= 0) {\n            var vs = this.vs;\n            var scrollElement = (vs.container || list.parentNode);\n            var virtualScroll = vsEnabled !== undefined ? vsEnabled : vs.enabled;\n            scrollToItem(scrollElement, list, itemIndex, vs.translate, virtualScroll);\n        }\n    };\n    DropDownBase.prototype.initState = function () {\n        var state = {\n            data: {},\n            events: [],\n            syntheticEvent: undefined\n        };\n        return state;\n    };\n    DropDownBase.prototype.applyState = function (state) {\n        var _this = this;\n        if (Object.keys(state.data).length > 0) {\n            this.component.setState(state.data);\n        }\n        var eventArgs = {\n            syntheticEvent: state.syntheticEvent,\n            nativeEvent: state.syntheticEvent ? state.syntheticEvent.nativeEvent : undefined,\n            target: this.component,\n            value: this.component.value\n        };\n        state.events.forEach(function (eventData) {\n            var type = eventData.type;\n            delete eventData.type;\n            var handler = type && _this.component.props[type];\n            if (handler) {\n                handler.call(undefined, __assign(__assign({}, eventArgs), eventData));\n            }\n        });\n    };\n    DropDownBase.prototype.triggerOnPageChange = function (state, skip, take) {\n        var virtual = this.component.props.virtual;\n        if (virtual) {\n            var newSkip = Math.min(Math.max(0, skip), Math.max(0, virtual.total - take));\n            if (newSkip !== virtual.skip) {\n                state.events.push({\n                    type: 'onPageChange',\n                    page: { skip: newSkip, take: take }\n                });\n            }\n        }\n    };\n    DropDownBase.prototype.triggerPageChangeCornerItems = function (item, state) {\n        var props = this.component.props;\n        var _a = props.data, data = _a === void 0 ? [] : _a, dataItemKey = props.dataItemKey, virtual = props.virtual;\n        var opened = props.opened !== undefined ? props.opened : this.component.state.opened;\n        if (item && virtual && this.vs.enabled) {\n            if (virtual.skip > 0 && areSame(item, data[0], dataItemKey)) {\n                this.triggerOnPageChange(state, virtual.skip - 1, virtual.pageSize);\n            }\n            else if (!opened && virtual.skip + virtual.pageSize < virtual.total &&\n                areSame(item, data[data.length - 1], dataItemKey)) {\n                this.triggerOnPageChange(state, virtual.skip + 1, virtual.pageSize);\n            }\n        }\n    };\n    DropDownBase.prototype.getPopupSettings = function () {\n        return Object\n            .assign({}, DropDownBase.defaultProps.popupSettings, this.component.props.popupSettings);\n    };\n    DropDownBase.basicPropTypes = {\n        opened: PropTypes.bool,\n        disabled: PropTypes.bool,\n        dir: PropTypes.string,\n        tabIndex: PropTypes.number,\n        accessKey: PropTypes.string,\n        data: PropTypes.array,\n        textField: PropTypes.string,\n        className: PropTypes.string,\n        label: PropTypes.string,\n        loading: PropTypes.bool,\n        popupSettings: PropTypes.shape({\n            animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n                    openDuration: PropTypes.number,\n                    closeDuration: PropTypes.number\n                })]),\n            popupClass: PropTypes.string,\n            className: PropTypes.string,\n            appendTo: PropTypes.any,\n            width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        }),\n        onOpen: PropTypes.func,\n        onClose: PropTypes.func,\n        onFocus: PropTypes.func,\n        onBlur: PropTypes.func,\n        onChange: PropTypes.func,\n        itemRender: PropTypes.func,\n        listNoDataRender: PropTypes.func,\n        focusedItemIndex: PropTypes.func,\n        header: PropTypes.node,\n        footer: PropTypes.node\n    };\n    DropDownBase.propTypes = __assign(__assign({}, DropDownBase.basicPropTypes), { value: PropTypes.any, defaultValue: PropTypes.any, filterable: PropTypes.bool, filter: PropTypes.string, virtual: PropTypes.shape({\n            pageSize: PropTypes.number.isRequired,\n            skip: PropTypes.number.isRequired,\n            total: PropTypes.number.isRequired\n        }), onFilterChange: PropTypes.func, onPageChange: PropTypes.func });\n    DropDownBase.defaultProps = {\n        popupSettings: {\n            height: '200px'\n        },\n        required: false,\n        validityStyles: true\n    };\n    return DropDownBase;\n}());\nexport default DropDownBase;\n"]},"metadata":{},"sourceType":"module"}