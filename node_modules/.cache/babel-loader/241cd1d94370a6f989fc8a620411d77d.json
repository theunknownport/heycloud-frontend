{"ast":null,"code":"var normalize = function (x) {\n  return Math.max(x, 0);\n};\n/**\n * @hidden\n */\n\n\nvar ScrollAction =\n/** @class */\nfunction () {\n  function ScrollAction(offset) {\n    this.offset = offset;\n  }\n\n  return ScrollAction;\n}();\n\nexport { ScrollAction };\n/**\n * @hidden\n */\n\nvar PageAction =\n/** @class */\nfunction () {\n  function PageAction(skip) {\n    this.skip = skip;\n  }\n\n  return PageAction;\n}();\n\nexport { PageAction };\n/**\n * @hidden\n */\n\nvar ScrollerService =\n/** @class */\nfunction () {\n  function ScrollerService(onScrollAction, onPageAction) {\n    this.onScrollAction = onScrollAction;\n    this.onPageAction = onPageAction;\n    this.direction = 'vertical';\n    this.firstLoaded = 0;\n    this.lastLoaded = 0;\n    this.lastScrollTop = 0;\n    this.take = 0;\n    this.total = 0;\n    this.rowHeightService = null;\n    this.bottomOffset = 0;\n    this.topOffset = 0;\n  }\n\n  ScrollerService.prototype.create = function (rowHeightService, skip, take, total, topOffset, bottomOffset, direction) {\n    if (topOffset === void 0) {\n      topOffset = 0;\n    }\n\n    if (bottomOffset === void 0) {\n      bottomOffset = 0;\n    }\n\n    if (direction === void 0) {\n      direction = 'vertical';\n    }\n\n    this.rowHeightService = rowHeightService;\n    this.firstLoaded = skip;\n    this.lastLoaded = skip + take;\n    this.take = take;\n    this.total = total;\n    this.lastScrollTop = 0;\n    this.topOffset = topOffset;\n    this.bottomOffset = bottomOffset;\n    this.direction = direction;\n    var offsetBufferRows = this.rowsForHeight(topOffset);\n    var skipWithOffset = normalize(skip - offsetBufferRows);\n    this.onScrollAction(new ScrollAction(this.rowOffset(skipWithOffset)));\n    this.onPageAction(new PageAction(skipWithOffset));\n  };\n\n  ScrollerService.prototype.onScroll = function (_a) {\n    var scrollLeft = _a.scrollLeft,\n        scrollTop = _a.scrollTop,\n        offsetHeight = _a.offsetHeight,\n        offsetWidth = _a.offsetWidth;\n    var scrollPosition = this.direction === 'vertical' ? scrollTop : scrollLeft;\n    var offsetSize = this.direction === 'vertical' ? offsetHeight : offsetWidth;\n\n    if (this.lastScrollTop === scrollPosition || !this.rowHeightService) {\n      return;\n    }\n\n    var up = this.lastScrollTop >= scrollPosition;\n    this.lastScrollTop = scrollPosition;\n    var firstItemIndex = this.rowHeightService.index(normalize(scrollPosition - this.topOffset));\n    var lastItemIndex = this.rowHeightService.index(normalize(scrollPosition + offsetSize - this.bottomOffset));\n\n    if (!up && lastItemIndex >= this.lastLoaded && this.lastLoaded < this.total) {\n      this.firstLoaded = firstItemIndex;\n      this.onScrollAction(new ScrollAction(this.rowOffset(firstItemIndex)));\n      this.lastLoaded = Math.min(this.firstLoaded + this.take, this.total);\n      this.onPageAction(new PageAction(this.firstLoaded));\n    }\n\n    if (up && firstItemIndex <= this.firstLoaded) {\n      var nonVisibleBuffer = Math.floor(this.take * 0.3);\n      this.firstLoaded = normalize(firstItemIndex - nonVisibleBuffer);\n      this.onScrollAction(new ScrollAction(this.rowOffset(this.firstLoaded)));\n      this.lastLoaded = Math.min(this.firstLoaded + this.take, this.total);\n      this.onPageAction(new PageAction(this.firstLoaded));\n    }\n  };\n\n  ScrollerService.prototype.rowOffset = function (index) {\n    return this.rowHeightService ? this.rowHeightService.offset(index) + this.topOffset : 0;\n  };\n\n  ScrollerService.prototype.rowsForHeight = function (height) {\n    return this.rowHeightService ? Math.ceil(height / this.rowHeightService.height(0)) : 0;\n  };\n\n  return ScrollerService;\n}();\n\nexport { ScrollerService };","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-dateinputs/dist/es/virtualization/services/ScrollerService.js"],"names":["normalize","x","Math","max","ScrollAction","offset","PageAction","skip","ScrollerService","onScrollAction","onPageAction","direction","firstLoaded","lastLoaded","lastScrollTop","take","total","rowHeightService","bottomOffset","topOffset","prototype","create","offsetBufferRows","rowsForHeight","skipWithOffset","rowOffset","onScroll","_a","scrollLeft","scrollTop","offsetHeight","offsetWidth","scrollPosition","offsetSize","up","firstItemIndex","index","lastItemIndex","min","nonVisibleBuffer","floor","height","ceil"],"mappings":"AAAA,IAAIA,SAAS,GAAG,UAAUC,CAAV,EAAa;AAAE,SAAOC,IAAI,CAACC,GAAL,CAASF,CAAT,EAAY,CAAZ,CAAP;AAAwB,CAAvD;AACA;AACA;AACA;;;AACA,IAAIG,YAAY;AAAG;AAAe,YAAY;AAC1C,WAASA,YAAT,CAAsBC,MAAtB,EAA8B;AAC1B,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACD,SAAOD,YAAP;AACH,CALiC,EAAlC;;AAMA,SAASA,YAAT;AACA;AACA;AACA;;AACA,IAAIE,UAAU;AAAG;AAAe,YAAY;AACxC,WAASA,UAAT,CAAoBC,IAApB,EAA0B;AACtB,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AACD,SAAOD,UAAP;AACH,CAL+B,EAAhC;;AAMA,SAASA,UAAT;AACA;AACA;AACA;;AACA,IAAIE,eAAe;AAAG;AAAe,YAAY;AAC7C,WAASA,eAAT,CAAyBC,cAAzB,EAAyCC,YAAzC,EAAuD;AACnD,SAAKD,cAAL,GAAsBA,cAAtB;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKC,SAAL,GAAiB,UAAjB;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,IAAL,GAAY,CAAZ;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,gBAAL,GAAwB,IAAxB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACH;;AACDX,EAAAA,eAAe,CAACY,SAAhB,CAA0BC,MAA1B,GAAmC,UAAUJ,gBAAV,EAA4BV,IAA5B,EAAkCQ,IAAlC,EAAwCC,KAAxC,EAA+CG,SAA/C,EAA0DD,YAA1D,EAAwEP,SAAxE,EAAmF;AAClH,QAAIQ,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,CAAZ;AAAgB;;AAC5C,QAAID,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,MAAAA,YAAY,GAAG,CAAf;AAAmB;;AAClD,QAAIP,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,UAAZ;AAAyB;;AACrD,SAAKM,gBAAL,GAAwBA,gBAAxB;AACA,SAAKL,WAAL,GAAmBL,IAAnB;AACA,SAAKM,UAAL,GAAkBN,IAAI,GAAGQ,IAAzB;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKF,aAAL,GAAqB,CAArB;AACA,SAAKK,SAAL,GAAiBA,SAAjB;AACA,SAAKD,YAAL,GAAoBA,YAApB;AACA,SAAKP,SAAL,GAAiBA,SAAjB;AACA,QAAIW,gBAAgB,GAAG,KAAKC,aAAL,CAAmBJ,SAAnB,CAAvB;AACA,QAAIK,cAAc,GAAGxB,SAAS,CAACO,IAAI,GAAGe,gBAAR,CAA9B;AACA,SAAKb,cAAL,CAAoB,IAAIL,YAAJ,CAAiB,KAAKqB,SAAL,CAAeD,cAAf,CAAjB,CAApB;AACA,SAAKd,YAAL,CAAkB,IAAIJ,UAAJ,CAAekB,cAAf,CAAlB;AACH,GAjBD;;AAkBAhB,EAAAA,eAAe,CAACY,SAAhB,CAA0BM,QAA1B,GAAqC,UAAUC,EAAV,EAAc;AAC/C,QAAIC,UAAU,GAAGD,EAAE,CAACC,UAApB;AAAA,QAAgCC,SAAS,GAAGF,EAAE,CAACE,SAA/C;AAAA,QAA0DC,YAAY,GAAGH,EAAE,CAACG,YAA5E;AAAA,QAA0FC,WAAW,GAAGJ,EAAE,CAACI,WAA3G;AACA,QAAIC,cAAc,GAAG,KAAKrB,SAAL,KAAmB,UAAnB,GAAgCkB,SAAhC,GAA4CD,UAAjE;AACA,QAAIK,UAAU,GAAG,KAAKtB,SAAL,KAAmB,UAAnB,GAAgCmB,YAAhC,GAA+CC,WAAhE;;AACA,QAAI,KAAKjB,aAAL,KAAuBkB,cAAvB,IAAyC,CAAC,KAAKf,gBAAnD,EAAqE;AACjE;AACH;;AACD,QAAIiB,EAAE,GAAG,KAAKpB,aAAL,IAAsBkB,cAA/B;AACA,SAAKlB,aAAL,GAAqBkB,cAArB;AACA,QAAIG,cAAc,GAAG,KAAKlB,gBAAL,CAAsBmB,KAAtB,CAA4BpC,SAAS,CAACgC,cAAc,GAAG,KAAKb,SAAvB,CAArC,CAArB;AACA,QAAIkB,aAAa,GAAG,KAAKpB,gBAAL,CAAsBmB,KAAtB,CAA4BpC,SAAS,CAACgC,cAAc,GAAGC,UAAjB,GAA8B,KAAKf,YAApC,CAArC,CAApB;;AACA,QAAI,CAACgB,EAAD,IAAOG,aAAa,IAAI,KAAKxB,UAA7B,IAA2C,KAAKA,UAAL,GAAkB,KAAKG,KAAtE,EAA6E;AACzE,WAAKJ,WAAL,GAAmBuB,cAAnB;AACA,WAAK1B,cAAL,CAAoB,IAAIL,YAAJ,CAAiB,KAAKqB,SAAL,CAAeU,cAAf,CAAjB,CAApB;AACA,WAAKtB,UAAL,GAAkBX,IAAI,CAACoC,GAAL,CAAS,KAAK1B,WAAL,GAAmB,KAAKG,IAAjC,EAAuC,KAAKC,KAA5C,CAAlB;AACA,WAAKN,YAAL,CAAkB,IAAIJ,UAAJ,CAAe,KAAKM,WAApB,CAAlB;AACH;;AACD,QAAIsB,EAAE,IAAIC,cAAc,IAAI,KAAKvB,WAAjC,EAA8C;AAC1C,UAAI2B,gBAAgB,GAAGrC,IAAI,CAACsC,KAAL,CAAW,KAAKzB,IAAL,GAAY,GAAvB,CAAvB;AACA,WAAKH,WAAL,GAAmBZ,SAAS,CAACmC,cAAc,GAAGI,gBAAlB,CAA5B;AACA,WAAK9B,cAAL,CAAoB,IAAIL,YAAJ,CAAiB,KAAKqB,SAAL,CAAe,KAAKb,WAApB,CAAjB,CAApB;AACA,WAAKC,UAAL,GAAkBX,IAAI,CAACoC,GAAL,CAAS,KAAK1B,WAAL,GAAmB,KAAKG,IAAjC,EAAuC,KAAKC,KAA5C,CAAlB;AACA,WAAKN,YAAL,CAAkB,IAAIJ,UAAJ,CAAe,KAAKM,WAApB,CAAlB;AACH;AACJ,GAxBD;;AAyBAJ,EAAAA,eAAe,CAACY,SAAhB,CAA0BK,SAA1B,GAAsC,UAAUW,KAAV,EAAiB;AACnD,WAAO,KAAKnB,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBZ,MAAtB,CAA6B+B,KAA7B,IAAsC,KAAKjB,SAAnE,GAA+E,CAAtF;AACH,GAFD;;AAGAX,EAAAA,eAAe,CAACY,SAAhB,CAA0BG,aAA1B,GAA0C,UAAUkB,MAAV,EAAkB;AACxD,WAAO,KAAKxB,gBAAL,GAAwBf,IAAI,CAACwC,IAAL,CAAUD,MAAM,GAAG,KAAKxB,gBAAL,CAAsBwB,MAAtB,CAA6B,CAA7B,CAAnB,CAAxB,GAA8E,CAArF;AACH,GAFD;;AAGA,SAAOjC,eAAP;AACH,CAhEoC,EAArC;;AAiEA,SAASA,eAAT","sourcesContent":["var normalize = function (x) { return Math.max(x, 0); };\n/**\n * @hidden\n */\nvar ScrollAction = /** @class */ (function () {\n    function ScrollAction(offset) {\n        this.offset = offset;\n    }\n    return ScrollAction;\n}());\nexport { ScrollAction };\n/**\n * @hidden\n */\nvar PageAction = /** @class */ (function () {\n    function PageAction(skip) {\n        this.skip = skip;\n    }\n    return PageAction;\n}());\nexport { PageAction };\n/**\n * @hidden\n */\nvar ScrollerService = /** @class */ (function () {\n    function ScrollerService(onScrollAction, onPageAction) {\n        this.onScrollAction = onScrollAction;\n        this.onPageAction = onPageAction;\n        this.direction = 'vertical';\n        this.firstLoaded = 0;\n        this.lastLoaded = 0;\n        this.lastScrollTop = 0;\n        this.take = 0;\n        this.total = 0;\n        this.rowHeightService = null;\n        this.bottomOffset = 0;\n        this.topOffset = 0;\n    }\n    ScrollerService.prototype.create = function (rowHeightService, skip, take, total, topOffset, bottomOffset, direction) {\n        if (topOffset === void 0) { topOffset = 0; }\n        if (bottomOffset === void 0) { bottomOffset = 0; }\n        if (direction === void 0) { direction = 'vertical'; }\n        this.rowHeightService = rowHeightService;\n        this.firstLoaded = skip;\n        this.lastLoaded = skip + take;\n        this.take = take;\n        this.total = total;\n        this.lastScrollTop = 0;\n        this.topOffset = topOffset;\n        this.bottomOffset = bottomOffset;\n        this.direction = direction;\n        var offsetBufferRows = this.rowsForHeight(topOffset);\n        var skipWithOffset = normalize(skip - offsetBufferRows);\n        this.onScrollAction(new ScrollAction(this.rowOffset(skipWithOffset)));\n        this.onPageAction(new PageAction(skipWithOffset));\n    };\n    ScrollerService.prototype.onScroll = function (_a) {\n        var scrollLeft = _a.scrollLeft, scrollTop = _a.scrollTop, offsetHeight = _a.offsetHeight, offsetWidth = _a.offsetWidth;\n        var scrollPosition = this.direction === 'vertical' ? scrollTop : scrollLeft;\n        var offsetSize = this.direction === 'vertical' ? offsetHeight : offsetWidth;\n        if (this.lastScrollTop === scrollPosition || !this.rowHeightService) {\n            return;\n        }\n        var up = this.lastScrollTop >= scrollPosition;\n        this.lastScrollTop = scrollPosition;\n        var firstItemIndex = this.rowHeightService.index(normalize(scrollPosition - this.topOffset));\n        var lastItemIndex = this.rowHeightService.index(normalize(scrollPosition + offsetSize - this.bottomOffset));\n        if (!up && lastItemIndex >= this.lastLoaded && this.lastLoaded < this.total) {\n            this.firstLoaded = firstItemIndex;\n            this.onScrollAction(new ScrollAction(this.rowOffset(firstItemIndex)));\n            this.lastLoaded = Math.min(this.firstLoaded + this.take, this.total);\n            this.onPageAction(new PageAction(this.firstLoaded));\n        }\n        if (up && firstItemIndex <= this.firstLoaded) {\n            var nonVisibleBuffer = Math.floor(this.take * 0.3);\n            this.firstLoaded = normalize(firstItemIndex - nonVisibleBuffer);\n            this.onScrollAction(new ScrollAction(this.rowOffset(this.firstLoaded)));\n            this.lastLoaded = Math.min(this.firstLoaded + this.take, this.total);\n            this.onPageAction(new PageAction(this.firstLoaded));\n        }\n    };\n    ScrollerService.prototype.rowOffset = function (index) {\n        return this.rowHeightService ? this.rowHeightService.offset(index) + this.topOffset : 0;\n    };\n    ScrollerService.prototype.rowsForHeight = function (height) {\n        return this.rowHeightService ? Math.ceil(height / this.rowHeightService.height(0)) : 0;\n    };\n    return ScrollerService;\n}());\nexport { ScrollerService };\n"]},"metadata":{},"sourceType":"module"}