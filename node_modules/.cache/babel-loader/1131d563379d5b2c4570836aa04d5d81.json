{"ast":null,"code":"var _jsxFileName = \"/home/finn/Documents/heycloud-frontend/heycloud-frontend/src/components/SendCode.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport { sendCode } from \"../actions/auth\";\nimport illustration from './../assets/img/illustrations/secure1.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      role: \"alert\",\n      style: {\n        \"marginTop\": \"5px\",\n        \"color\": \"red\"\n      },\n      children: \"This field is required!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nconst SendCode = props => {\n  _s();\n\n  const form = useRef();\n  const checkBtn = useRef();\n  const [phone, setPhone] = useState(\"\");\n  const [successful, setSuccessful] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const {\n    isLoggedIn\n  } = useSelector(state => state.auth);\n  const {\n    message\n  } = useSelector(state => state.message);\n  const dispatch = useDispatch();\n\n  const onChangePhone = e => {\n    const phone = e.target.value;\n    setPhone(phone);\n  };\n\n  const handleSendCode = e => {\n    e.preventDefault();\n    setSuccessful(false);\n    setLoading(true);\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      dispatch(sendCode(phone)).then(() => {\n        setSuccessful(true);\n        setLoading(false);\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/reset-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 18\n        }, this);\n      }).catch(() => {\n        setSuccessful(false);\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  };\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row justify-content-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-9 col-lg-12 col-xl-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-lg o-hidden border-0 my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body p-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-5 col-xl-6 d-none d-lg-flex\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow-1 align-items-center bg-register-image\",\n                style: {\n                  'background-size': 'contain',\n                  'background-image': `url(${illustration})`,\n                  'background-repeat': 'no-repeat'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-7 col-xl-6 offset-xl-0\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"align-items-center align-content-center p-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    class: \"text-dark mb-2\",\n                    children: \"Forgot Your Password?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    class: \"mb-4\",\n                    children: \"We get it, stuff happens. Just enter your phone number below and we'll send you a code to start resetting your password!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(Form, {\n                  className: \"user\",\n                  onSubmit: handleSendCode,\n                  ref: form,\n                  style: {\n                    margin: '18px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(Input, {\n                      id: \"exampleInputPhone\",\n                      type: \"phone\",\n                      className: \"form-control  form-control-user\",\n                      placeholder: \"Phone\",\n                      name: \"phone\",\n                      value: phone,\n                      onChange: onChangePhone,\n                      validations: [required]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary d-block btn-user w-100\",\n                    type: \"submit\",\n                    disabled: loading,\n                    children: \"Send code\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 35\n                  }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm\",\n                    style: {\n                      'margin': 'auto'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 35\n                  }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: successful ? \"alert alert-success\" : \"alert alert-danger\",\n                      role: \"alert\",\n                      children: message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 39\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(CheckButton, {\n                    style: {\n                      display: \"none\"\n                    },\n                    ref: checkBtn\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SendCode, \"CiFi1HLN05h/ceqD7fjsnE54Ubs=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = SendCode;\nexport default SendCode;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendCode\");","map":{"version":3,"sources":["/home/finn/Documents/heycloud-frontend/heycloud-frontend/src/components/SendCode.js"],"names":["React","useState","useRef","useDispatch","useSelector","Redirect","Form","Input","CheckButton","sendCode","illustration","required","value","SendCode","props","form","checkBtn","phone","setPhone","successful","setSuccessful","loading","setLoading","isLoggedIn","state","auth","message","dispatch","onChangePhone","e","target","handleSendCode","preventDefault","current","validateAll","context","_errors","length","then","catch","margin","display"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { Redirect } from \"react-router-dom\";\n\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\n\n\n\nimport { sendCode } from \"../actions/auth\";\n\nimport illustration from './../assets/img/illustrations/secure1.png'\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div role=\"alert\" style={{\"marginTop\":\"5px\",\"color\":\"red\"}}>\n        This field is required!\n      </div>\n    );\n  }\n};\n\n\nconst SendCode = (props) => {\n  const form = useRef();\n  const checkBtn = useRef();\n\n  const [phone, setPhone] = useState(\"\");\n  const [successful, setSuccessful] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const { isLoggedIn } = useSelector(state => state.auth);\n  const { message } = useSelector(state => state.message);\n  const dispatch = useDispatch();\n\n  const onChangePhone = (e) => {\n    const phone = e.target.value;\n    setPhone(phone);\n  };\n\n\n\n  \n\n  \n\n  const handleSendCode = (e) => {\n    e.preventDefault();\n    setSuccessful(false);\n\n    setLoading(true);\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      dispatch(sendCode(phone))\n        .then(() => {\n          setSuccessful(true);\n          setLoading(false);\n          \n          return <Redirect to=\"/reset-password\" />;\n        })\n        .catch(() => {\n          setSuccessful(false);\n          setLoading(false);\n        });\n    } else {\n      setLoading(false);\n    }\n    \n  };\n\n\n  if (isLoggedIn) {\n    return <Redirect to=\"/dashboard\" />;\n  }\n  \n  return (\n        <div className=\"row justify-content-center\">\n          <div className=\"col-md-9 col-lg-12 col-xl-10\">\n          <div className=\"card shadow-lg o-hidden border-0 my-5\">\n              <div className=\"card-body p-0\">\n                  <div className=\"row\">\n                      <div className=\"col-lg-5 col-xl-6 d-none d-lg-flex\">\n                          <div className=\"flex-grow-1 align-items-center bg-register-image\" style={{'background-size': 'contain','background-image': `url(${illustration})`, 'background-repeat': 'no-repeat'}}></div>\n                      </div>\n                      <div className=\"col-lg-7 col-xl-6 offset-xl-0\">\n                          <div className=\"align-items-center align-content-center p-5\">\n                              <div className=\"text-center\">\n                              <h4 class=\"text-dark mb-2\">Forgot Your Password?</h4>\n                                        <p class=\"mb-4\">We get it, stuff happens. Just enter your phone number below and we'll send you a code to start resetting your password!</p>\n                              </div>\n                              <Form className=\"user\" onSubmit={handleSendCode} ref={form} style={{margin: '18px'}}>\n                                  <div className=\"mb-3\">\n                                    <Input\n                                    id=\"exampleInputPhone\"\n                                    type=\"phone\"\n                                    className=\"form-control  form-control-user\"\n                                    placeholder=\"Phone\"\n                                    name=\"phone\"\n                                    value={phone}\n                                    onChange={onChangePhone}\n                                    validations={[required]}\n                                    />\n                                  </div>\n                                    \n                                  \n                                  <button className=\"btn btn-primary d-block btn-user w-100\" type=\"submit\" disabled={loading}>Send code</button>\n                                  {loading && (\n                                    <span className=\"spinner-border spinner-border-sm\" style={{'margin':'auto'}}></span>\n                                  )}\n                                  <hr></hr>\n                                  {message && (\n                                    <div className=\"form-group\">\n                                      <div className={ successful ? \"alert alert-success\" : \"alert alert-danger\" } role=\"alert\">\n                                        {message}\n                                      </div>\n                                    </div>\n                                  )}\n                                <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n                                </Form>\n                                \n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n        </div>\n        </div>\n\n  );\n};\n\nexport default SendCode;"]},"metadata":{},"sourceType":"module"}