{"ast":null,"code":"import Class from '../class';\nimport support from '../support';\nimport namedColors from './named-colors';\nvar browser = support.browser;\n\nvar matchNamedColor = function (color) {\n  var colorNames = Object.keys(namedColors);\n  colorNames.push(\"transparent\");\n  var regexp = new RegExp(\"^(\" + colorNames.join(\"|\") + \")(\\\\W|$)\", \"i\");\n\n  matchNamedColor = function (color) {\n    return regexp.exec(color);\n  };\n\n  return regexp.exec(color);\n};\n\nvar BaseColor = function (Class) {\n  function BaseColor() {\n    Class.call(this);\n  }\n\n  if (Class) BaseColor.__proto__ = Class;\n  BaseColor.prototype = Object.create(Class && Class.prototype);\n  BaseColor.prototype.constructor = BaseColor;\n\n  BaseColor.prototype.toHSV = function toHSV() {\n    return this;\n  };\n\n  BaseColor.prototype.toRGB = function toRGB() {\n    return this;\n  };\n\n  BaseColor.prototype.toHex = function toHex(options) {\n    return this.toBytes().toHex(options);\n  };\n\n  BaseColor.prototype.toBytes = function toBytes() {\n    return this;\n  };\n\n  BaseColor.prototype.toCss = function toCss(options) {\n    return \"#\" + this.toHex(options);\n  };\n\n  BaseColor.prototype.toCssRgba = function toCssRgba() {\n    var rgb = this.toBytes();\n    return \"rgba(\" + rgb.r + \", \" + rgb.g + \", \" + rgb.b + \", \" + parseFloat(Number(this.a).toFixed(3)) + \")\";\n  };\n\n  BaseColor.prototype.toDisplay = function toDisplay() {\n    if (browser.msie && browser.version < 9) {\n      return this.toCss(); // no RGBA support; does it support any opacity in colors?\n    }\n\n    return this.toCssRgba();\n  };\n\n  BaseColor.prototype.equals = function equals(c) {\n    return c === this || c !== null && c !== undefined && this.toCssRgba() === parseColor(c).toCssRgba();\n  };\n\n  BaseColor.prototype.diff = function diff(other) {\n    if (other === null) {\n      return NaN;\n    }\n\n    var c1 = this.toBytes();\n    var c2 = other.toBytes();\n    return Math.sqrt(Math.pow((c1.r - c2.r) * 0.30, 2) + Math.pow((c1.g - c2.g) * 0.59, 2) + Math.pow((c1.b - c2.b) * 0.11, 2));\n  };\n\n  BaseColor.prototype.clone = function clone() {\n    var c = this.toBytes();\n\n    if (c === this) {\n      c = new Bytes(c.r, c.g, c.b, c.a);\n    }\n\n    return c;\n  };\n\n  return BaseColor;\n}(Class);\n\nvar RGB = function (BaseColor) {\n  function RGB(r, g, b, a) {\n    BaseColor.call(this);\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n  }\n\n  if (BaseColor) RGB.__proto__ = BaseColor;\n  RGB.prototype = Object.create(BaseColor && BaseColor.prototype);\n  RGB.prototype.constructor = RGB;\n\n  RGB.prototype.toHSV = function toHSV() {\n    var ref = this;\n    var r = ref.r;\n    var g = ref.g;\n    var b = ref.b;\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var v = max;\n    var h, s;\n\n    if (delta === 0) {\n      return new HSV(0, 0, v, this.a);\n    }\n\n    if (max !== 0) {\n      s = delta / max;\n\n      if (r === max) {\n        h = (g - b) / delta;\n      } else if (g === max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n\n      h *= 60;\n\n      if (h < 0) {\n        h += 360;\n      }\n    } else {\n      s = 0;\n      h = -1;\n    }\n\n    return new HSV(h, s, v, this.a);\n  };\n\n  RGB.prototype.toHSL = function toHSL() {\n    var ref = this;\n    var r = ref.r;\n    var g = ref.g;\n    var b = ref.b;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h,\n        s,\n        l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      var d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return new HSL(h * 60, s * 100, l * 100, this.a);\n  };\n\n  RGB.prototype.toBytes = function toBytes() {\n    return new Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\n  };\n\n  return RGB;\n}(BaseColor);\n\nvar Bytes = function (RGB) {\n  function Bytes(r, g, b, a) {\n    RGB.call(this, Math.round(r), Math.round(g), Math.round(b), a);\n  }\n\n  if (RGB) Bytes.__proto__ = RGB;\n  Bytes.prototype = Object.create(RGB && RGB.prototype);\n  Bytes.prototype.constructor = Bytes;\n\n  Bytes.prototype.toRGB = function toRGB() {\n    return new RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\n  };\n\n  Bytes.prototype.toHSV = function toHSV() {\n    return this.toRGB().toHSV();\n  };\n\n  Bytes.prototype.toHSL = function toHSL() {\n    return this.toRGB().toHSL();\n  };\n\n  Bytes.prototype.toHex = function toHex(options) {\n    var value = hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\n\n    if (options && options.alpha) {\n      value += hex(Math.round(this.a * 255), 2);\n    }\n\n    return value;\n  };\n\n  Bytes.prototype.toBytes = function toBytes() {\n    return this;\n  };\n\n  return Bytes;\n}(RGB);\n\nfunction hex(n, width, pad) {\n  if (pad === void 0) pad = \"0\";\n  var result = n.toString(16);\n\n  while (width > result.length) {\n    result = pad + result;\n  }\n\n  return result;\n}\n\nvar HSV = function (BaseColor) {\n  function HSV(h, s, v, a) {\n    BaseColor.call(this);\n    this.h = h;\n    this.s = s;\n    this.v = v;\n    this.a = a;\n  }\n\n  if (BaseColor) HSV.__proto__ = BaseColor;\n  HSV.prototype = Object.create(BaseColor && BaseColor.prototype);\n  HSV.prototype.constructor = HSV;\n\n  HSV.prototype.toRGB = function toRGB() {\n    var ref = this;\n    var h = ref.h;\n    var s = ref.s;\n    var v = ref.v;\n    var r, g, b;\n\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      h /= 60;\n      var i = Math.floor(h);\n      var f = h - i;\n      var p = v * (1 - s);\n      var q = v * (1 - s * f);\n      var t = v * (1 - s * (1 - f));\n\n      switch (i) {\n        case 0:\n          r = v;\n          g = t;\n          b = p;\n          break;\n\n        case 1:\n          r = q;\n          g = v;\n          b = p;\n          break;\n\n        case 2:\n          r = p;\n          g = v;\n          b = t;\n          break;\n\n        case 3:\n          r = p;\n          g = q;\n          b = v;\n          break;\n\n        case 4:\n          r = t;\n          g = p;\n          b = v;\n          break;\n\n        default:\n          r = v;\n          g = p;\n          b = q;\n          break;\n      }\n    }\n\n    return new RGB(r, g, b, this.a);\n  };\n\n  HSV.prototype.toHSL = function toHSL() {\n    return this.toRGB().toHSL();\n  };\n\n  HSV.prototype.toBytes = function toBytes() {\n    return this.toRGB().toBytes();\n  };\n\n  return HSV;\n}(BaseColor);\n\nvar HSL = function (BaseColor) {\n  function HSL(h, s, l, a) {\n    BaseColor.call(this);\n    this.h = h;\n    this.s = s;\n    this.l = l;\n    this.a = a;\n  }\n\n  if (BaseColor) HSL.__proto__ = BaseColor;\n  HSL.prototype = Object.create(BaseColor && BaseColor.prototype);\n  HSL.prototype.constructor = HSL;\n\n  HSL.prototype.toRGB = function toRGB() {\n    var h = this.h / 360;\n    var s = this.s / 100;\n    var l = this.l / 100;\n    var r, g, b;\n\n    if (s === 0) {\n      r = g = b = l; // achromatic\n    } else {\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      var p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return new RGB(r, g, b, this.a);\n  };\n\n  HSL.prototype.toHSV = function toHSV() {\n    return this.toRGB().toHSV();\n  };\n\n  HSL.prototype.toBytes = function toBytes() {\n    return this.toRGB().toBytes();\n  };\n\n  return HSL;\n}(BaseColor);\n\nfunction hue2rgb(p, q, s) {\n  var t = s;\n\n  if (t < 0) {\n    t += 1;\n  }\n\n  if (t > 1) {\n    t -= 1;\n  }\n\n  if (t < 1 / 6) {\n    return p + (q - p) * 6 * t;\n  }\n\n  if (t < 1 / 2) {\n    return q;\n  }\n\n  if (t < 2 / 3) {\n    return p + (q - p) * (2 / 3 - t) * 6;\n  }\n\n  return p;\n}\n\nfunction alphaFromHex(a) {\n  return parseFloat(parseFloat(parseInt(a, 16) / 255).toFixed(3));\n}\n\nexport { RGB, Bytes, HSV, HSL };\nexport default function parseColor(value, safe) {\n  var m, ret;\n\n  if (value == null || value === \"none\") {\n    return null;\n  }\n\n  if (value instanceof BaseColor) {\n    return value;\n  }\n\n  var color = value.toLowerCase();\n\n  if (m = matchNamedColor(color)) {\n    if (m[1] === \"transparent\") {\n      color = new RGB(1, 1, 1, 0);\n    } else {\n      color = parseColor(namedColors[m[1]], safe);\n    }\n\n    color.match = [m[1]];\n    return color;\n  }\n\n  if (m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color)) {\n    ret = new Bytes(parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16), 1);\n  } else if (m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color)) {\n    ret = new Bytes(parseInt(m[1] + m[1], 16), parseInt(m[2] + m[2], 16), parseInt(m[3] + m[3], 16), 1);\n  } else if (m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color)) {\n    // Parse 4 digit hex color\n    ret = new Bytes(parseInt(m[1] + m[1], 16), parseInt(m[2] + m[2], 16), parseInt(m[3] + m[3], 16), alphaFromHex(m[4] + m[4]));\n  } else if (m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color)) {\n    // Parse 8 digit hex color\n    ret = new Bytes(parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16), alphaFromHex(m[4]));\n  } else if (m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color)) {\n    ret = new Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), 1);\n  } else if (m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\n    ret = new Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), parseFloat(m[4]));\n  } else if (m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color)) {\n    ret = new RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, 1);\n  } else if (m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\n    ret = new RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, parseFloat(m[4]));\n  }\n\n  if (ret) {\n    ret.match = m;\n  } else if (!safe) {\n    throw new Error(\"Cannot parse color: \" + color);\n  }\n\n  return ret;\n}","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-drawing/dist/es/common/color/parse-color.js"],"names":["Class","support","namedColors","browser","matchNamedColor","color","colorNames","Object","keys","push","regexp","RegExp","join","exec","BaseColor","call","__proto__","prototype","create","constructor","toHSV","toRGB","toHex","options","toBytes","toCss","toCssRgba","rgb","r","g","b","parseFloat","Number","a","toFixed","toDisplay","msie","version","equals","c","undefined","parseColor","diff","other","NaN","c1","c2","Math","sqrt","pow","clone","Bytes","RGB","ref","min","max","delta","v","h","s","HSV","toHSL","l","d","HSL","round","value","hex","alpha","n","width","pad","result","toString","length","i","floor","f","p","q","t","hue2rgb","alphaFromHex","parseInt","safe","m","ret","toLowerCase","match","Error"],"mappings":"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","sourcesContent":["import Class from '../class';\nimport support from '../support';\nimport namedColors from './named-colors';\n\nvar browser = support.browser;\n\nvar matchNamedColor = function (color) {\n    var colorNames = Object.keys(namedColors);\n    colorNames.push(\"transparent\");\n\n    var regexp = new RegExp(\"^(\" + colorNames.join(\"|\") + \")(\\\\W|$)\", \"i\");\n    matchNamedColor = function (color) { return regexp.exec(color); };\n\n    return regexp.exec(color);\n};\n\nvar BaseColor = (function (Class) {\n    function BaseColor() { Class.call(this); }\n\n    if ( Class ) BaseColor.__proto__ = Class;\n    BaseColor.prototype = Object.create( Class && Class.prototype );\n    BaseColor.prototype.constructor = BaseColor;\n    BaseColor.prototype.toHSV = function toHSV () { return this; };\n\n    BaseColor.prototype.toRGB = function toRGB () { return this; };\n\n    BaseColor.prototype.toHex = function toHex (options) { return this.toBytes().toHex(options); };\n\n    BaseColor.prototype.toBytes = function toBytes () { return this; };\n\n    BaseColor.prototype.toCss = function toCss (options) { return \"#\" + this.toHex(options); };\n\n    BaseColor.prototype.toCssRgba = function toCssRgba () {\n        var rgb = this.toBytes();\n        return (\"rgba(\" + (rgb.r) + \", \" + (rgb.g) + \", \" + (rgb.b) + \", \" + (parseFloat((Number(this.a)).toFixed(3))) + \")\");\n    };\n\n    BaseColor.prototype.toDisplay = function toDisplay () {\n        if (browser.msie && browser.version < 9) {\n            return this.toCss(); // no RGBA support; does it support any opacity in colors?\n        }\n        return this.toCssRgba();\n    };\n\n    BaseColor.prototype.equals = function equals (c) {\n        return c === this || ((c !== null && c !== undefined) && this.toCssRgba() === parseColor(c).toCssRgba());\n    };\n\n    BaseColor.prototype.diff = function diff (other) {\n        if (other === null) {\n            return NaN;\n        }\n\n        var c1 = this.toBytes();\n        var c2 = other.toBytes();\n\n        return Math.sqrt(Math.pow((c1.r - c2.r) * 0.30, 2) +\n                         Math.pow((c1.g - c2.g) * 0.59, 2) +\n                         Math.pow((c1.b - c2.b) * 0.11, 2));\n    };\n\n    BaseColor.prototype.clone = function clone () {\n        var c = this.toBytes();\n        if (c === this) {\n            c = new Bytes(c.r, c.g, c.b, c.a);\n        }\n\n        return c;\n    };\n\n    return BaseColor;\n}(Class));\n\nvar RGB = (function (BaseColor) {\n    function RGB(r, g, b, a) {\n        BaseColor.call(this);\n\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    if ( BaseColor ) RGB.__proto__ = BaseColor;\n    RGB.prototype = Object.create( BaseColor && BaseColor.prototype );\n    RGB.prototype.constructor = RGB;\n\n    RGB.prototype.toHSV = function toHSV () {\n        var ref = this;\n        var r = ref.r;\n        var g = ref.g;\n        var b = ref.b;\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var delta = max - min;\n        var v = max;\n        var h, s;\n\n        if (delta === 0) {\n            return new HSV(0, 0, v, this.a);\n        }\n\n        if (max !== 0) {\n            s = delta / max;\n            if (r === max) {\n                h = (g - b) / delta;\n            } else if (g === max) {\n                h = 2 + (b - r) / delta;\n            } else {\n                h = 4 + (r - g) / delta;\n            }\n\n            h *= 60;\n            if (h < 0) {\n                h += 360;\n            }\n        } else {\n            s = 0;\n            h = -1;\n        }\n\n        return new HSV(h, s, v, this.a);\n    };\n\n    RGB.prototype.toHSL = function toHSL () {\n        var ref = this;\n        var r = ref.r;\n        var g = ref.g;\n        var b = ref.b;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if (max === min) {\n            h = s = 0;\n        } else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n                default: break;\n            }\n        }\n\n        return new HSL(h * 60, s * 100, l * 100, this.a);\n    };\n\n    RGB.prototype.toBytes = function toBytes () {\n        return new Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\n    };\n\n    return RGB;\n}(BaseColor));\n\nvar Bytes = (function (RGB) {\n    function Bytes(r, g, b, a) {\n        RGB.call(this, Math.round(r), Math.round(g), Math.round(b), a);\n    }\n\n    if ( RGB ) Bytes.__proto__ = RGB;\n    Bytes.prototype = Object.create( RGB && RGB.prototype );\n    Bytes.prototype.constructor = Bytes;\n\n    Bytes.prototype.toRGB = function toRGB () {\n        return new RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\n    };\n\n    Bytes.prototype.toHSV = function toHSV () {\n        return this.toRGB().toHSV();\n    };\n\n    Bytes.prototype.toHSL = function toHSL () {\n        return this.toRGB().toHSL();\n    };\n\n    Bytes.prototype.toHex = function toHex (options) {\n        var value = hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\n\n        if (options && options.alpha) {\n            value += hex(Math.round(this.a * 255), 2);\n        }\n\n        return value;\n    };\n\n    Bytes.prototype.toBytes = function toBytes () {\n        return this;\n    };\n\n    return Bytes;\n}(RGB));\n\nfunction hex(n, width, pad) {\n    if ( pad === void 0 ) pad = \"0\";\n\n    var result = n.toString(16);\n    while (width > result.length) {\n        result = pad + result;\n    }\n\n    return result;\n}\n\nvar HSV = (function (BaseColor) {\n    function HSV(h, s, v, a) {\n        BaseColor.call(this);\n\n        this.h = h;\n        this.s = s;\n        this.v = v;\n        this.a = a;\n    }\n\n    if ( BaseColor ) HSV.__proto__ = BaseColor;\n    HSV.prototype = Object.create( BaseColor && BaseColor.prototype );\n    HSV.prototype.constructor = HSV;\n\n    HSV.prototype.toRGB = function toRGB () {\n        var ref = this;\n        var h = ref.h;\n        var s = ref.s;\n        var v = ref.v;\n        var r, g, b;\n\n        if (s === 0) {\n            r = g = b = v;\n        } else {\n            h /= 60;\n\n            var i = Math.floor(h);\n            var f = h - i;\n            var p = v * (1 - s);\n            var q = v * (1 - s * f);\n            var t = v * (1 - s * (1 - f));\n\n            switch (i) {\n                case 0: r = v; g = t; b = p; break;\n                case 1: r = q; g = v; b = p; break;\n                case 2: r = p; g = v; b = t; break;\n                case 3: r = p; g = q; b = v; break;\n                case 4: r = t; g = p; b = v; break;\n                default: r = v; g = p; b = q; break;\n            }\n        }\n\n        return new RGB(r, g, b, this.a);\n    };\n\n    HSV.prototype.toHSL = function toHSL () {\n        return this.toRGB().toHSL();\n    };\n\n    HSV.prototype.toBytes = function toBytes () {\n        return this.toRGB().toBytes();\n    };\n\n    return HSV;\n}(BaseColor));\n\nvar HSL = (function (BaseColor) {\n    function HSL(h, s, l, a) {\n        BaseColor.call(this);\n\n        this.h = h;\n        this.s = s;\n        this.l = l;\n        this.a = a;\n    }\n\n    if ( BaseColor ) HSL.__proto__ = BaseColor;\n    HSL.prototype = Object.create( BaseColor && BaseColor.prototype );\n    HSL.prototype.constructor = HSL;\n\n    HSL.prototype.toRGB = function toRGB () {\n        var h = this.h / 360;\n        var s = this.s / 100;\n        var l = this.l / 100;\n        var r, g, b;\n\n        if (s === 0) {\n            r = g = b = l; // achromatic\n        } else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1 / 3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1 / 3);\n        }\n\n        return new RGB(r, g, b, this.a);\n    };\n\n    HSL.prototype.toHSV = function toHSV () {\n        return this.toRGB().toHSV();\n    };\n\n    HSL.prototype.toBytes = function toBytes () {\n        return this.toRGB().toBytes();\n    };\n\n    return HSL;\n}(BaseColor));\n\nfunction hue2rgb(p, q, s) {\n    var t = s;\n\n    if (t < 0) {\n        t += 1;\n    }\n\n    if (t > 1) {\n        t -= 1;\n    }\n\n    if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n    }\n\n    if (t < 1 / 2) {\n        return q;\n    }\n\n    if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n    }\n\n    return p;\n}\n\nfunction alphaFromHex(a) {\n    return parseFloat(parseFloat(parseInt(a, 16) / 255 ).toFixed(3));\n}\n\nexport { RGB, Bytes, HSV, HSL };\n\nexport default function parseColor(value, safe) {\n    var m, ret;\n\n    if (value == null || value === \"none\") {\n        return null;\n    }\n\n    if (value instanceof BaseColor) {\n        return value;\n    }\n\n    var color = value.toLowerCase();\n    if ((m = matchNamedColor(color))) {\n        if (m[1] === \"transparent\") {\n            color = new RGB(1, 1, 1, 0);\n        } else {\n            color = parseColor(namedColors[m[1]], safe);\n        }\n        color.match = [ m[1] ];\n        return color;\n    }\n    if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 16),\n                        parseInt(m[2], 16),\n                        parseInt(m[3], 16), 1);\n    } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) {\n        ret = new Bytes(parseInt(m[1] + m[1], 16),\n                        parseInt(m[2] + m[2], 16),\n                        parseInt(m[3] + m[3], 16), 1);\n    } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) { // Parse 4 digit hex color\n        ret = new Bytes(parseInt(m[1] + m[1], 16),\n                        parseInt(m[2] + m[2], 16),\n                        parseInt(m[3] + m[3], 16),\n                        alphaFromHex(m[4] + m[4]));\n    } else if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) { // Parse 8 digit hex color\n        ret = new Bytes(parseInt(m[1], 16),\n                        parseInt(m[2], 16),\n                        parseInt(m[3], 16),\n                        alphaFromHex(m[4]));\n    } else if ((m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 10),\n                        parseInt(m[2], 10),\n                        parseInt(m[3], 10), 1);\n    } else if ((m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 10),\n                        parseInt(m[2], 10),\n                        parseInt(m[3], 10), parseFloat(m[4]));\n    } else if ((m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color))) {\n        ret = new RGB(parseFloat(m[1]) / 100,\n                      parseFloat(m[2]) / 100,\n                      parseFloat(m[3]) / 100, 1);\n    } else if ((m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n        ret = new RGB(parseFloat(m[1]) / 100,\n                      parseFloat(m[2]) / 100,\n                      parseFloat(m[3]) / 100, parseFloat(m[4]));\n    }\n\n    if (ret) {\n        ret.match = m;\n    } else if (!safe) {\n        throw new Error(\"Cannot parse color: \" + color);\n    }\n\n    return ret;\n}\n"]},"metadata":{},"sourceType":"module"}