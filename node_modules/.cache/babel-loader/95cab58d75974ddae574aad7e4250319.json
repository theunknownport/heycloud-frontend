{"ast":null,"code":"var DEFAULT_LIMIT = 10000;\n\nvar BoundedBuffer =\n/** @class */\nfunction () {\n  function BoundedBuffer(limit) {\n    if (limit === void 0) {\n      limit = DEFAULT_LIMIT;\n    }\n\n    this.limit = limit;\n    this.buffer = [];\n  }\n\n  BoundedBuffer.prototype.add = function (callback) {\n    var length = this.buffer.push(callback);\n\n    if (length > this.limit) {\n      this.buffer.splice(0, 1);\n    }\n  };\n\n  BoundedBuffer.prototype.drain = function () {\n    this.buffer.forEach(function (callback) {\n      return callback();\n    });\n    this.buffer.length = 0;\n  };\n\n  return BoundedBuffer;\n}();\n\nexport { BoundedBuffer };","map":{"version":3,"sources":["../../src/tools/boundedBuffer.ts"],"names":[],"mappings":"AAAA,IAAM,aAAa,GAAG,KAAtB;;AAEA,IAAA,aAAA;AAAA;AAAA,YAAA;AAGE,WAAA,aAAA,CAAoB,KAApB,EAAiD;AAA7B,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,aAAA;AAA6B;;AAA7B,SAAA,KAAA,GAAA,KAAA;AAFZ,SAAA,MAAA,GAA4B,EAA5B;AAE6C;;AAErD,EAAA,aAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,QAAJ,EAAwB;AACtB,QAAM,MAAM,GAAG,KAAK,MAAL,CAAY,IAAZ,CAAiB,QAAjB,CAAf;;AACA,QAAI,MAAM,GAAG,KAAK,KAAlB,EAAyB;AACvB,WAAK,MAAL,CAAY,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB;AACD;AACF,GALD;;AAOA,EAAA,aAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,SAAK,MAAL,CAAY,OAAZ,CAAoB,UAAC,QAAD,EAAS;AAAK,aAAA,QAAA,EAAA;AAAU,KAA5C;AACA,SAAK,MAAL,CAAY,MAAZ,GAAqB,CAArB;AACD,GAHD;;AAIF,SAAA,aAAA;AAAC,CAhBD,EAAA","sourceRoot":"","sourcesContent":["var DEFAULT_LIMIT = 10000;\nvar BoundedBuffer = /** @class */ (function () {\n    function BoundedBuffer(limit) {\n        if (limit === void 0) { limit = DEFAULT_LIMIT; }\n        this.limit = limit;\n        this.buffer = [];\n    }\n    BoundedBuffer.prototype.add = function (callback) {\n        var length = this.buffer.push(callback);\n        if (length > this.limit) {\n            this.buffer.splice(0, 1);\n        }\n    };\n    BoundedBuffer.prototype.drain = function () {\n        this.buffer.forEach(function (callback) { return callback(); });\n        this.buffer.length = 0;\n    };\n    return BoundedBuffer;\n}());\nexport { BoundedBuffer };\n//# sourceMappingURL=boundedBuffer.js.map"]},"metadata":{},"sourceType":"module"}