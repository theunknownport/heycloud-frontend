{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { cloneDate } from '@progress/kendo-date-math';\nimport { classNames, Keys } from '@progress/kendo-react-common';\nimport { provideIntlService, provideLocalizationService, registerForIntl, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, now, selectNow } from '../messages';\nimport { TimeList } from './TimeList';\nimport { MIDNIGHT_DATE, MIN_TIME, MAX_TIME } from '../utils';\nimport { TIME_PART } from './models/TimePart';\nimport { generateSnappers, getNow, isInTimeRange, snapTime, timeInRange } from './utils';\nimport { Button } from '@progress/kendo-react-buttons';\nvar formatRegExp = new RegExp(\"\".concat(TIME_PART.hour, \"|\").concat(TIME_PART.minute, \"|\").concat(TIME_PART.second, \"|\").concat(TIME_PART.dayperiod, \"|literal\"));\n/**\n * @hidden\n */\n\nexport var Direction;\n\n(function (Direction) {\n  Direction[Direction[\"Left\"] = 0] = \"Left\";\n  Direction[Direction[\"Right\"] = 1] = \"Right\";\n})(Direction || (Direction = {}));\n/**\n * @hidden\n */\n\n\nvar TimePart =\n/** @class */\nfunction (_super) {\n  __extends(TimePart, _super);\n\n  function TimePart(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._element = null;\n    _this._nowButton = null;\n    _this.dateFormatParts = [];\n    _this.timeLists = [];\n\n    _this.focus = function (args) {\n      Promise.resolve().then(function () {\n        var timeList = _this.timeLists[0];\n\n        if (_this.state.activeListIndex === -1 && !_this.hasActiveButton() && timeList && timeList.element) {\n          timeList.focus(args);\n        }\n      });\n    };\n\n    _this.timeFormatReducer = function (acc, current) {\n      return acc + current.pattern;\n    }; // Filtering only the time part of the format.\n    // Literal types are added if the previous part is\n    // part of a time format.\n\n\n    _this.timeFormatFilter = function (part, index, all) {\n      var prevItem = index >= 1 && all[index - 1];\n\n      if (!prevItem) {\n        return formatRegExp.test(part.type || '');\n      }\n\n      if (prevItem && part.type === 'literal') {\n        return formatRegExp.test(prevItem.type || '');\n      }\n\n      return formatRegExp.test(part.type || '');\n    };\n\n    _this.focusList = function (dir) {\n      if (!_this.timeLists.length) {\n        return;\n      }\n\n      _this.timeLists.reduce(_this.listReducer, []).map(function (state) {\n        return dir === Direction.Right ? state.next : state.prev;\n      }).map(function (list) {\n        return list && list.element && list.element.focus({\n          preventScroll: true\n        });\n      });\n    };\n\n    _this.listReducer = function (state, list, idx, all) {\n      if (state.length || list.props.id !== _this.state.activeListIndex) {\n        return state;\n      }\n\n      return [{\n        next: all[idx + 1] || list,\n        prev: all[idx - 1] || list\n      }];\n    };\n\n    _this.showNowButton = function () {\n      return !_this.hasSteps() && _this.props.nowButton && isInTimeRange(getNow(), _this.min, _this.max);\n    };\n\n    _this.handleKeyDown = function (event) {\n      var keyCode = event.keyCode;\n\n      switch (keyCode) {\n        case Keys.left:\n          event.preventDefault();\n\n          _this.focusList(Direction.Left);\n\n          return;\n\n        case Keys.right:\n          event.preventDefault();\n\n          _this.focusList(Direction.Right);\n\n          return;\n\n        default:\n          return;\n      }\n    };\n\n    _this.handleListBlur = function () {\n      _this.nextTick(function () {\n        _this.setState({\n          activeListIndex: -1\n        });\n      });\n    };\n\n    _this.handleListFocus = function (idx) {\n      clearTimeout(_this.nextTickId);\n\n      _this.setState({\n        activeListIndex: idx\n      });\n    };\n\n    _this.handleChange = function (candidate) {\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.call(undefined, candidate);\n      }\n    };\n\n    _this.snapTime = snapTime(generateSnappers(_this.props.steps, _this.props.min || TimePart.defaultProps.min));\n    _this.state = {\n      activeListIndex: -1\n    };\n    _this.hasActiveButton = _this.hasActiveButton.bind(_this);\n    return _this;\n  }\n\n  Object.defineProperty(TimePart.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"value\", {\n    get: function () {\n      return timeInRange(this.snapTime(cloneDate(this.props.value || MIDNIGHT_DATE)), this.min, this.max);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"intl\", {\n    get: function () {\n      return provideIntlService(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"min\", {\n    get: function () {\n      return this.snapTime(this.props.min || TimePart.defaultProps.min);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"max\", {\n    get: function () {\n      return this.snapTime(this.props.max || TimePart.defaultProps.max);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"steps\", {\n    get: function () {\n      return this.props.steps || TimePart.defaultProps.steps;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TimePart.prototype, \"boundRange\", {\n    get: function () {\n      return this.props.boundRange !== undefined ? this.props.boundRange : TimePart.defaultProps.boundRange;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  TimePart.prototype.componentWillUnmount = function () {\n    clearTimeout(this.nextTickId);\n  };\n\n  TimePart.prototype.componentDidMount = function () {\n    var onMount = this.props.onMount;\n\n    if (onMount) {\n      onMount.call(undefined, this.value);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  TimePart.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        format = _a.format,\n        smoothScroll = _a.smoothScroll,\n        onNowClick = _a.onNowClick,\n        className = _a.className,\n        disabled = _a.disabled;\n    this.snapTime = snapTime(generateSnappers(this.steps, this.min));\n    this.dateFormatParts = this.intl.splitDateFormat(format || TimePart.defaultProps.format).filter(this.timeFormatFilter);\n    var rootClassName = classNames({\n      'k-disabled': disabled\n    }, className, 'k-time-part');\n    this.timeLists = [];\n    var localizationService = provideLocalizationService(this);\n    var selectNowMessage = localizationService.toLanguageString(selectNow, messages[selectNow]);\n    return React.createElement(\"div\", {\n      className: rootClassName\n    }, React.createElement(\"div\", {\n      className: \"k-time-header\"\n    }, React.createElement(\"span\", {\n      className: \"k-title\"\n    }, this.intl.formatDate(this.value, this.dateFormatParts.reduce(this.timeFormatReducer, ''))), this.showNowButton() && React.createElement(Button, __assign({\n      type: \"button\",\n      ref: function (btn) {\n        _this._nowButton = btn;\n      },\n      className: \"k-time-now\",\n      fillMode: \"flat\",\n      themeColor: 'primary',\n      title: selectNowMessage\n    }, {\n      'aria-label': selectNowMessage\n    }, {\n      onClick: onNowClick,\n      tabIndex: disabled ? -1 : 0\n    }), localizationService.toLanguageString(now, messages[now]))), React.createElement(\"div\", {\n      className: \"k-time-list-container\",\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"span\", {\n      className: \"k-time-highlight\"\n    }), this.dateFormatParts.map(function (part, idx) {\n      return part.type !== 'literal' ? React.createElement(\"div\", {\n        key: idx,\n        className: classNames('k-time-list-wrapper', {\n          'k-focus': idx === _this.state.activeListIndex\n        }),\n        role: \"presentation\",\n        tabIndex: -1\n      }, React.createElement(\"span\", {\n        className: \"k-title\",\n        onMouseDown: function (e) {\n          e.preventDefault();\n        }\n      }, _this.intl.dateFieldName(part)), React.createElement(TimeList, {\n        min: _this.min,\n        max: _this.max,\n        boundRange: _this.boundRange,\n        part: part,\n        step: part.type ? _this.steps[part.type] : 1,\n        smoothScroll: smoothScroll,\n        ref: function (el) {\n          if (!el) {\n            return;\n          }\n\n          _this.timeLists.push(el);\n        },\n        id: idx,\n        onFocus: function () {\n          _this.handleListFocus(idx);\n        },\n        onBlur: _this.handleListBlur,\n        onChange: _this.handleChange,\n        value: _this.value,\n        disabled: disabled,\n        show: _this.props.show\n      })) : React.createElement(\"div\", {\n        key: idx,\n        className: \"k-time-separator\"\n      }, part.pattern);\n    })));\n  };\n\n  TimePart.prototype.nextTick = function (f) {\n    // XXX: use window.setTimeout due to async focus/blur events in IE, and missing relatedTarget prop.\n    // XXX: https://github.com/facebook/react/issues/3751\n    clearTimeout(this.nextTickId);\n    this.nextTickId = window.setTimeout(function () {\n      return f();\n    });\n  };\n\n  TimePart.prototype.hasActiveButton = function () {\n    return this._nowButton && document.activeElement === this._nowButton.element;\n  };\n\n  TimePart.prototype.hasSteps = function () {\n    var _this = this;\n\n    var keys = Object.keys(this.steps);\n    return keys.length !== keys.reduce(function (acc, k) {\n      return acc + _this.steps[k];\n    }, 0);\n  };\n\n  TimePart.propTypes = {\n    cancelButton: PropTypes.bool,\n    disabled: PropTypes.bool,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\n      skeleton: PropTypes.string,\n      pattern: PropTypes.string,\n      date: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n      time: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n      datetime: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n      era: PropTypes.oneOf(['narrow', 'short', 'long']),\n      year: PropTypes.oneOf(['numeric', '2-digit']),\n      month: PropTypes.oneOf(['numeric', '2-digit', 'narrow', 'short', 'long']),\n      day: PropTypes.oneOf(['numeric', '2-digit']),\n      weekday: PropTypes.oneOf(['narrow', 'short', 'long']),\n      hour: PropTypes.oneOf(['numeric', '2-digit']),\n      hour12: PropTypes.bool,\n      minute: PropTypes.oneOf(['numeric', '2-digit']),\n      second: PropTypes.oneOf(['numeric', '2-digit']),\n      timeZoneName: PropTypes.oneOf(['short', 'long'])\n    })]),\n    max: PropTypes.instanceOf(Date),\n    min: PropTypes.instanceOf(Date),\n    nowButton: PropTypes.bool,\n    steps: PropTypes.shape({\n      hour: PropTypes.number,\n      minute: PropTypes.number,\n      second: PropTypes.number\n    }),\n    smoothScroll: PropTypes.bool,\n    tabIndex: PropTypes.number,\n    value: PropTypes.instanceOf(Date),\n    show: PropTypes.bool\n  };\n  TimePart.defaultProps = {\n    value: null,\n    disabled: false,\n    nowButton: true,\n    cancelButton: true,\n    format: 'hh:mm a',\n    min: MIN_TIME,\n    max: MAX_TIME,\n    steps: {},\n    boundRange: false\n  };\n  return TimePart;\n}(React.Component);\n\nexport { TimePart };\nregisterForIntl(TimePart);\nregisterForLocalization(TimePart);","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-dateinputs/dist/es/timepicker/TimePart.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","React","PropTypes","cloneDate","classNames","Keys","provideIntlService","provideLocalizationService","registerForIntl","registerForLocalization","messages","now","selectNow","TimeList","MIDNIGHT_DATE","MIN_TIME","MAX_TIME","TIME_PART","generateSnappers","getNow","isInTimeRange","snapTime","timeInRange","Button","formatRegExp","RegExp","concat","hour","minute","second","dayperiod","Direction","TimePart","_super","props","_this","_element","_nowButton","dateFormatParts","timeLists","focus","args","Promise","resolve","then","timeList","state","activeListIndex","hasActiveButton","element","timeFormatReducer","acc","current","pattern","timeFormatFilter","part","index","all","prevItem","test","type","focusList","dir","reduce","listReducer","map","Right","next","prev","list","preventScroll","idx","id","showNowButton","hasSteps","nowButton","min","max","handleKeyDown","event","keyCode","left","preventDefault","Left","right","handleListBlur","nextTick","setState","handleListFocus","clearTimeout","nextTickId","handleChange","candidate","onChange","undefined","steps","defaultProps","bind","defineProperty","get","enumerable","configurable","value","boundRange","componentWillUnmount","componentDidMount","onMount","render","_a","format","smoothScroll","onNowClick","className","disabled","intl","splitDateFormat","filter","rootClassName","localizationService","selectNowMessage","toLanguageString","createElement","formatDate","ref","btn","fillMode","themeColor","title","onClick","tabIndex","onKeyDown","key","role","onMouseDown","e","dateFieldName","step","el","push","onFocus","onBlur","show","f","window","setTimeout","document","activeElement","keys","k","propTypes","cancelButton","bool","oneOfType","string","shape","skeleton","date","oneOf","time","datetime","era","year","month","day","weekday","hour12","timeZoneName","instanceOf","Date","number","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { cloneDate } from '@progress/kendo-date-math';\nimport { classNames, Keys } from '@progress/kendo-react-common';\nimport { provideIntlService, provideLocalizationService, registerForIntl, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, now, selectNow } from '../messages';\nimport { TimeList } from './TimeList';\nimport { MIDNIGHT_DATE, MIN_TIME, MAX_TIME } from '../utils';\nimport { TIME_PART } from './models/TimePart';\nimport { generateSnappers, getNow, isInTimeRange, snapTime, timeInRange } from './utils';\nimport { Button } from '@progress/kendo-react-buttons';\nvar formatRegExp = new RegExp(\"\".concat(TIME_PART.hour, \"|\").concat(TIME_PART.minute, \"|\").concat(TIME_PART.second, \"|\").concat(TIME_PART.dayperiod, \"|literal\"));\n/**\n * @hidden\n */\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Left\"] = 0] = \"Left\";\n    Direction[Direction[\"Right\"] = 1] = \"Right\";\n})(Direction || (Direction = {}));\n/**\n * @hidden\n */\nvar TimePart = /** @class */ (function (_super) {\n    __extends(TimePart, _super);\n    function TimePart(props) {\n        var _this = _super.call(this, props) || this;\n        _this._element = null;\n        _this._nowButton = null;\n        _this.dateFormatParts = [];\n        _this.timeLists = [];\n        _this.focus = function (args) {\n            Promise.resolve().then(function () {\n                var timeList = _this.timeLists[0];\n                if ((_this.state.activeListIndex === -1) && !_this.hasActiveButton() && timeList && timeList.element) {\n                    timeList.focus(args);\n                }\n            });\n        };\n        _this.timeFormatReducer = function (acc, current) { return acc + current.pattern; };\n        // Filtering only the time part of the format.\n        // Literal types are added if the previous part is\n        // part of a time format.\n        _this.timeFormatFilter = function (part, index, all) {\n            var prevItem = index >= 1 && all[index - 1];\n            if (!prevItem) {\n                return formatRegExp.test(part.type || '');\n            }\n            if (prevItem && part.type === 'literal') {\n                return formatRegExp.test(prevItem.type || '');\n            }\n            return formatRegExp.test(part.type || '');\n        };\n        _this.focusList = function (dir) {\n            if (!_this.timeLists.length) {\n                return;\n            }\n            _this.timeLists.reduce(_this.listReducer, ([]))\n                .map(function (state) { return dir === Direction.Right ? state.next : state.prev; })\n                .map(function (list) { return list && list.element && list.element.focus({ preventScroll: true }); });\n        };\n        _this.listReducer = function (state, list, idx, all) {\n            if (state.length || list.props.id !== _this.state.activeListIndex) {\n                return state;\n            }\n            return [{\n                    next: all[idx + 1] || list,\n                    prev: all[idx - 1] || list\n                }];\n        };\n        _this.showNowButton = function () {\n            return !_this.hasSteps() && _this.props.nowButton && isInTimeRange(getNow(), _this.min, _this.max);\n        };\n        _this.handleKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            switch (keyCode) {\n                case Keys.left:\n                    event.preventDefault();\n                    _this.focusList(Direction.Left);\n                    return;\n                case Keys.right:\n                    event.preventDefault();\n                    _this.focusList(Direction.Right);\n                    return;\n                default:\n                    return;\n            }\n        };\n        _this.handleListBlur = function () {\n            _this.nextTick(function () {\n                _this.setState({ activeListIndex: -1 });\n            });\n        };\n        _this.handleListFocus = function (idx) {\n            clearTimeout(_this.nextTickId);\n            _this.setState({\n                activeListIndex: idx\n            });\n        };\n        _this.handleChange = function (candidate) {\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                onChange.call(undefined, candidate);\n            }\n        };\n        _this.snapTime = snapTime(generateSnappers(_this.props.steps, _this.props.min || TimePart.defaultProps.min));\n        _this.state = {\n            activeListIndex: -1\n        };\n        _this.hasActiveButton = _this.hasActiveButton.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(TimePart.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"value\", {\n        get: function () {\n            return timeInRange(this.snapTime(cloneDate(this.props.value || MIDNIGHT_DATE)), this.min, this.max);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"intl\", {\n        get: function () {\n            return provideIntlService(this);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"min\", {\n        get: function () {\n            return this.snapTime(this.props.min || TimePart.defaultProps.min);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"max\", {\n        get: function () {\n            return this.snapTime(this.props.max || TimePart.defaultProps.max);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"steps\", {\n        get: function () {\n            return this.props.steps || TimePart.defaultProps.steps;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TimePart.prototype, \"boundRange\", {\n        get: function () {\n            return this.props.boundRange !== undefined\n                ? this.props.boundRange\n                : TimePart.defaultProps.boundRange;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    TimePart.prototype.componentWillUnmount = function () {\n        clearTimeout(this.nextTickId);\n    };\n    TimePart.prototype.componentDidMount = function () {\n        var onMount = this.props.onMount;\n        if (onMount) {\n            onMount.call(undefined, this.value);\n        }\n    };\n    /**\n     * @hidden\n     */\n    TimePart.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, format = _a.format, smoothScroll = _a.smoothScroll, onNowClick = _a.onNowClick, className = _a.className, disabled = _a.disabled;\n        this.snapTime = snapTime(generateSnappers(this.steps, this.min));\n        this.dateFormatParts = this.intl\n            .splitDateFormat(format || TimePart.defaultProps.format)\n            .filter(this.timeFormatFilter);\n        var rootClassName = classNames({\n            'k-disabled': disabled\n        }, className, 'k-time-part');\n        this.timeLists = [];\n        var localizationService = provideLocalizationService(this);\n        var selectNowMessage = localizationService.toLanguageString(selectNow, messages[selectNow]);\n        return (React.createElement(\"div\", { className: rootClassName },\n            React.createElement(\"div\", { className: \"k-time-header\" },\n                React.createElement(\"span\", { className: \"k-title\" }, this.intl.formatDate(this.value, this.dateFormatParts.reduce(this.timeFormatReducer, ''))),\n                this.showNowButton() &&\n                    React.createElement(Button, __assign({ type: \"button\", ref: function (btn) { _this._nowButton = btn; }, className: \"k-time-now\", fillMode: \"flat\", themeColor: 'primary', title: selectNowMessage }, { 'aria-label': selectNowMessage }, { onClick: onNowClick, tabIndex: disabled ? -1 : 0 }), localizationService.toLanguageString(now, messages[now]))),\n            React.createElement(\"div\", { className: \"k-time-list-container\", onKeyDown: this.handleKeyDown },\n                React.createElement(\"span\", { className: \"k-time-highlight\" }),\n                this.dateFormatParts.map(function (part, idx) {\n                    return (part.type !== 'literal'\n                        ? React.createElement(\"div\", { key: idx, className: classNames('k-time-list-wrapper', {\n                                'k-focus': idx === _this.state.activeListIndex\n                            }), role: \"presentation\", tabIndex: -1 },\n                            React.createElement(\"span\", { className: \"k-title\", onMouseDown: function (e) { e.preventDefault(); } }, _this.intl.dateFieldName(part)),\n                            React.createElement(TimeList, { min: _this.min, max: _this.max, boundRange: _this.boundRange, part: part, step: part.type ? _this.steps[part.type] : 1, smoothScroll: smoothScroll, ref: function (el) { if (!el) {\n                                    return;\n                                } _this.timeLists.push(el); }, id: idx, onFocus: function () { _this.handleListFocus(idx); }, onBlur: _this.handleListBlur, onChange: _this.handleChange, value: _this.value, disabled: disabled, show: _this.props.show }))\n                        : React.createElement(\"div\", { key: idx, className: \"k-time-separator\" }, part.pattern));\n                }))));\n    };\n    TimePart.prototype.nextTick = function (f) {\n        // XXX: use window.setTimeout due to async focus/blur events in IE, and missing relatedTarget prop.\n        // XXX: https://github.com/facebook/react/issues/3751\n        clearTimeout(this.nextTickId);\n        this.nextTickId = window.setTimeout(function () { return f(); });\n    };\n    TimePart.prototype.hasActiveButton = function () {\n        return (this._nowButton && document.activeElement === this._nowButton.element);\n    };\n    TimePart.prototype.hasSteps = function () {\n        var _this = this;\n        var keys = Object.keys(this.steps);\n        return keys.length !== keys.reduce(function (acc, k) { return acc + _this.steps[k]; }, 0);\n    };\n    TimePart.propTypes = {\n        cancelButton: PropTypes.bool,\n        disabled: PropTypes.bool,\n        format: PropTypes.oneOfType([\n            PropTypes.string,\n            PropTypes.shape({\n                skeleton: PropTypes.string,\n                pattern: PropTypes.string,\n                date: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n                time: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n                datetime: PropTypes.oneOf(['short', 'medium', 'long', 'full']),\n                era: PropTypes.oneOf(['narrow', 'short', 'long']),\n                year: PropTypes.oneOf(['numeric', '2-digit']),\n                month: PropTypes.oneOf(['numeric', '2-digit', 'narrow', 'short', 'long']),\n                day: PropTypes.oneOf(['numeric', '2-digit']),\n                weekday: PropTypes.oneOf(['narrow', 'short', 'long']),\n                hour: PropTypes.oneOf(['numeric', '2-digit']),\n                hour12: PropTypes.bool,\n                minute: PropTypes.oneOf(['numeric', '2-digit']),\n                second: PropTypes.oneOf(['numeric', '2-digit']),\n                timeZoneName: PropTypes.oneOf(['short', 'long'])\n            })\n        ]),\n        max: PropTypes.instanceOf(Date),\n        min: PropTypes.instanceOf(Date),\n        nowButton: PropTypes.bool,\n        steps: PropTypes.shape({\n            hour: PropTypes.number,\n            minute: PropTypes.number,\n            second: PropTypes.number\n        }),\n        smoothScroll: PropTypes.bool,\n        tabIndex: PropTypes.number,\n        value: PropTypes.instanceOf(Date),\n        show: PropTypes.bool\n    };\n    TimePart.defaultProps = {\n        value: null,\n        disabled: false,\n        nowButton: true,\n        cancelButton: true,\n        format: 'hh:mm a',\n        min: MIN_TIME,\n        max: MAX_TIME,\n        steps: {},\n        boundRange: false\n    };\n    return TimePart;\n}(React.Component));\nexport { TimePart };\nregisterForIntl(TimePart);\nregisterForLocalization(TimePart);\n"]},"metadata":{},"sourceType":"module"}