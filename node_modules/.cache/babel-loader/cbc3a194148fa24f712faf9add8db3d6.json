{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Button, Toolbar, ToolbarItem } from '@progress/kendo-react-buttons';\nimport { DropDownList } from '@progress/kendo-react-dropdowns';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { unaryOperator, stringOperator } from './operators';\nimport { messages, filterClose, filterExpressionAriaLabel, filterExpressionDropdownAriaLabel, filterExpressionOperatorDropdownAriaLabel } from '../messages';\n\nvar setInitialValue = function (filter) {\n  if (filter.value === undefined && !unaryOperator(filter.operator)) {\n    filter.value = stringOperator(filter.operator) ? '' : null;\n  }\n};\n/**\n * @hidden\n */\n\n\nvar Expression =\n/** @class */\nfunction (_super) {\n  __extends(Expression, _super);\n\n  function Expression() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.onFieldChange = function (event) {\n      var nextFieldName = event.value.name;\n\n      var nextField = _this.props.fields.find(function (f) {\n        return f.name === nextFieldName;\n      });\n\n      var prevFilter = _this.props.filter;\n      var operator = nextField && !nextField.operators.some(function (o) {\n        return o.operator === prevFilter.operator;\n      }) ? nextField.operators[0].operator : prevFilter.operator;\n      var nextFilter = {\n        field: nextFieldName,\n        operator: operator\n      };\n      setInitialValue(nextFilter);\n\n      _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n    };\n\n    _this.onOperatorChange = function (event) {\n      var operator = event.value.operator;\n      var prevFilter = _this.props.filter;\n      var nextFilter;\n\n      if (unaryOperator(operator)) {\n        var value = prevFilter.value,\n            prevFilterNoValue = __rest(prevFilter, [\"value\"]);\n\n        nextFilter = __assign(__assign({}, prevFilterNoValue), {\n          operator: operator\n        });\n      } else {\n        nextFilter = __assign(__assign({}, prevFilter), {\n          operator: operator\n        });\n      }\n\n      setInitialValue(nextFilter);\n\n      _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n    };\n\n    _this.onInputChange = function (event) {\n      var prevFilter = _this.props.filter;\n      var nextFilter = event.nextFilter;\n\n      if (unaryOperator(nextFilter.operator)) {\n        var field = _this.props.fields.find(function (f) {\n          return f.name === nextFilter.field;\n        });\n\n        nextFilter = __assign(__assign({}, nextFilter), {\n          operator: field && field.operators[0].operator || nextFilter.operator\n        });\n      }\n\n      _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n    };\n\n    _this.triggerOnFilterChange = function (prevFilter, nextFilter, event) {\n      var changeEvent = {\n        prevFilter: prevFilter,\n        nextFilter: nextFilter,\n        syntheticEvent: event.syntheticEvent,\n        nativeEvent: event.nativeEvent,\n        target: _this\n      };\n\n      _this.props.onChange.call(undefined, changeEvent);\n    };\n\n    _this.onFilterRemove = function (event) {\n      var removeEvent = {\n        filter: _this.props.filter,\n        syntheticEvent: event.syntheticEvent,\n        nativeEvent: event.nativeEvent,\n        target: _this\n      };\n\n      _this.props.onRemove.call(undefined, removeEvent);\n    };\n\n    return _this;\n  }\n\n  Expression.prototype.render = function () {\n    var locService = provideLocalizationService(this);\n    var _a = this.props,\n        fields = _a.fields,\n        filter = _a.filter,\n        _b = _a.ariaLabel,\n        ariaLabel = _b === void 0 ? locService.toLanguageString(filterExpressionAriaLabel, messages[filterExpressionAriaLabel]) : _b;\n    var field = fields.find(function (f) {\n      return f.name === filter.field;\n    });\n    var operators = (field && field.operators || []).map(function (o) {\n      return __assign(__assign({}, o), {\n        text: locService.toLanguageString(o.text, messages[o.text] || o.text)\n      });\n    });\n    return React.createElement(\"div\", {\n      className: \"k-filter-toolbar\",\n      role: \"group\",\n      \"aria-label\": ariaLabel\n    }, React.createElement(Toolbar, {\n      keyboardNavigation: false,\n      role: \"\"\n    }, React.createElement(ToolbarItem, {\n      className: \"k-filter-field\"\n    }, React.createElement(DropDownList, {\n      className: \"k-filter-dropdown\",\n      data: fields,\n      textField: \"label\",\n      value: fields.find(function (f) {\n        return f.name === filter.field;\n      }),\n      onChange: this.onFieldChange,\n      ariaLabel: locService.toLanguageString(filterExpressionDropdownAriaLabel, messages[filterExpressionDropdownAriaLabel])\n    })), React.createElement(ToolbarItem, {\n      className: \"k-filter-operator\"\n    }, React.createElement(DropDownList, {\n      data: operators,\n      textField: \"text\",\n      value: operators.find(function (o) {\n        return o.operator === filter.operator;\n      }),\n      onChange: this.onOperatorChange,\n      ariaLabel: locService.toLanguageString(filterExpressionOperatorDropdownAriaLabel, messages[filterExpressionOperatorDropdownAriaLabel])\n    })), React.createElement(ToolbarItem, {\n      className: \"k-filter-value\"\n    }, field && React.createElement(field.filter, {\n      filter: filter,\n      onFilterChange: this.onInputChange\n    })), React.createElement(ToolbarItem, null, React.createElement(Button, {\n      title: locService.toLanguageString(filterClose, messages[filterClose]),\n      icon: \"close\",\n      fillMode: \"flat\",\n      type: \"button\",\n      onClick: this.onFilterRemove\n    }))));\n  };\n\n  Expression.propTypes = {\n    filter: PropTypes.object.isRequired,\n    fields: PropTypes.array.isRequired,\n    ariaLabel: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired\n  };\n  return Expression;\n}(React.Component);\n\nexport { Expression };\nregisterForLocalization(Expression);","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-data-tools/dist/es/filter/Expression.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","PropTypes","Button","Toolbar","ToolbarItem","DropDownList","provideLocalizationService","registerForLocalization","unaryOperator","stringOperator","messages","filterClose","filterExpressionAriaLabel","filterExpressionDropdownAriaLabel","filterExpressionOperatorDropdownAriaLabel","setInitialValue","filter","value","undefined","operator","Expression","_super","_this","onFieldChange","event","nextFieldName","name","nextField","props","fields","find","f","prevFilter","operators","some","o","nextFilter","field","triggerOnFilterChange","onOperatorChange","prevFilterNoValue","onInputChange","changeEvent","syntheticEvent","nativeEvent","target","onChange","onFilterRemove","removeEvent","onRemove","render","locService","_a","_b","ariaLabel","toLanguageString","map","text","createElement","className","role","keyboardNavigation","data","textField","onFilterChange","title","icon","fillMode","type","onClick","propTypes","object","isRequired","array","string","func","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Button, Toolbar, ToolbarItem } from '@progress/kendo-react-buttons';\nimport { DropDownList } from '@progress/kendo-react-dropdowns';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { unaryOperator, stringOperator } from './operators';\nimport { messages, filterClose, filterExpressionAriaLabel, filterExpressionDropdownAriaLabel, filterExpressionOperatorDropdownAriaLabel } from '../messages';\nvar setInitialValue = function (filter) {\n    if (filter.value === undefined && !unaryOperator(filter.operator)) {\n        filter.value = stringOperator(filter.operator) ? '' : null;\n    }\n};\n/**\n * @hidden\n */\nvar Expression = /** @class */ (function (_super) {\n    __extends(Expression, _super);\n    function Expression() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onFieldChange = function (event) {\n            var nextFieldName = event.value.name;\n            var nextField = _this.props.fields.find(function (f) { return f.name === nextFieldName; });\n            var prevFilter = _this.props.filter;\n            var operator = (nextField && !nextField.operators.some(function (o) { return o.operator === prevFilter.operator; })) ?\n                nextField.operators[0].operator : prevFilter.operator;\n            var nextFilter = {\n                field: nextFieldName,\n                operator: operator\n            };\n            setInitialValue(nextFilter);\n            _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n        };\n        _this.onOperatorChange = function (event) {\n            var operator = event.value.operator;\n            var prevFilter = _this.props.filter;\n            var nextFilter;\n            if (unaryOperator(operator)) {\n                var value = prevFilter.value, prevFilterNoValue = __rest(prevFilter, [\"value\"]);\n                nextFilter = __assign(__assign({}, prevFilterNoValue), { operator: operator });\n            }\n            else {\n                nextFilter = __assign(__assign({}, prevFilter), { operator: operator });\n            }\n            setInitialValue(nextFilter);\n            _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n        };\n        _this.onInputChange = function (event) {\n            var prevFilter = _this.props.filter;\n            var nextFilter = event.nextFilter;\n            if (unaryOperator(nextFilter.operator)) {\n                var field = _this.props.fields.find(function (f) { return f.name === nextFilter.field; });\n                nextFilter = __assign(__assign({}, nextFilter), { operator: (field && field.operators[0].operator) || nextFilter.operator });\n            }\n            _this.triggerOnFilterChange(prevFilter, nextFilter, event);\n        };\n        _this.triggerOnFilterChange = function (prevFilter, nextFilter, event) {\n            var changeEvent = {\n                prevFilter: prevFilter,\n                nextFilter: nextFilter,\n                syntheticEvent: event.syntheticEvent,\n                nativeEvent: event.nativeEvent,\n                target: _this\n            };\n            _this.props.onChange.call(undefined, changeEvent);\n        };\n        _this.onFilterRemove = function (event) {\n            var removeEvent = {\n                filter: _this.props.filter,\n                syntheticEvent: event.syntheticEvent,\n                nativeEvent: event.nativeEvent,\n                target: _this\n            };\n            _this.props.onRemove.call(undefined, removeEvent);\n        };\n        return _this;\n    }\n    Expression.prototype.render = function () {\n        var locService = provideLocalizationService(this);\n        var _a = this.props, fields = _a.fields, filter = _a.filter, _b = _a.ariaLabel, ariaLabel = _b === void 0 ? locService.toLanguageString(filterExpressionAriaLabel, messages[filterExpressionAriaLabel]) : _b;\n        var field = fields.find(function (f) { return f.name === filter.field; });\n        var operators = ((field && field.operators) || [])\n            .map(function (o) { return (__assign(__assign({}, o), { text: locService.toLanguageString(o.text, messages[o.text] || o.text) })); });\n        return (React.createElement(\"div\", { className: \"k-filter-toolbar\", role: \"group\", \"aria-label\": ariaLabel },\n            React.createElement(Toolbar, { keyboardNavigation: false, role: \"\" },\n                React.createElement(ToolbarItem, { className: \"k-filter-field\" },\n                    React.createElement(DropDownList, { className: \"k-filter-dropdown\", data: fields, textField: \"label\", value: fields.find(function (f) { return f.name === filter.field; }), onChange: this.onFieldChange, ariaLabel: locService.toLanguageString(filterExpressionDropdownAriaLabel, messages[filterExpressionDropdownAriaLabel]) })),\n                React.createElement(ToolbarItem, { className: \"k-filter-operator\" },\n                    React.createElement(DropDownList, { data: operators, textField: \"text\", value: operators.find(function (o) { return o.operator === filter.operator; }), onChange: this.onOperatorChange, ariaLabel: locService.toLanguageString(filterExpressionOperatorDropdownAriaLabel, messages[filterExpressionOperatorDropdownAriaLabel]) })),\n                React.createElement(ToolbarItem, { className: \"k-filter-value\" }, field && React.createElement(field.filter, { filter: filter, onFilterChange: this.onInputChange })),\n                React.createElement(ToolbarItem, null,\n                    React.createElement(Button, { title: locService.toLanguageString(filterClose, messages[filterClose]), icon: \"close\", fillMode: \"flat\", type: \"button\", onClick: this.onFilterRemove })))));\n    };\n    Expression.propTypes = {\n        filter: PropTypes.object.isRequired,\n        fields: PropTypes.array.isRequired,\n        ariaLabel: PropTypes.string,\n        onChange: PropTypes.func.isRequired,\n        onRemove: PropTypes.func.isRequired\n    };\n    return Expression;\n}(React.Component));\nexport { Expression };\nregisterForLocalization(Expression);\n"]},"metadata":{},"sourceType":"module"}