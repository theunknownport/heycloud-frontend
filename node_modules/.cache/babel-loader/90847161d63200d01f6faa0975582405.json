{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar _a, _b, _c;\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames } from '@progress/kendo-react-common';\nimport { RowHeightService, ScrollerService } from './services';\n/**\n * @hidden\n */\n\nexport var ScrollDirection;\n\n(function (ScrollDirection) {\n  ScrollDirection[ScrollDirection[\"Backward\"] = 0] = \"Backward\";\n  ScrollDirection[ScrollDirection[\"Forward\"] = 1] = \"Forward\";\n})(ScrollDirection || (ScrollDirection = {}));\n\nvar differenceToScroll = function (scrollTop, staticOffset, maxScrollDifference) {\n  return Math.min(Math.abs(staticOffset - scrollTop), maxScrollDifference);\n};\n\nvar FRAME_DURATION = 17;\nvar scrollModifiers = (_a = {}, _a[ScrollDirection.Forward] = function (step) {\n  return function (value) {\n    return value + step;\n  };\n}, _a[ScrollDirection.Backward] = function (step) {\n  return function (value) {\n    return value - step;\n  };\n}, _a);\nvar scrollNormalizers = (_b = {}, _b[ScrollDirection.Forward] = function (end) {\n  return function (value) {\n    return Math.min(value, end);\n  };\n}, _b[ScrollDirection.Backward] = function (end) {\n  return function (value) {\n    return Math.max(value, end);\n  };\n}, _b);\nvar scrollValidators = (_c = {}, _c[ScrollDirection.Forward] = function (end) {\n  return function (start) {\n    return start < end;\n  };\n}, _c[ScrollDirection.Backward] = function (end) {\n  return function (start) {\n    return start > end;\n  };\n}, _c);\n/**\n * @hidden\n */\n\nvar Virtualization =\n/** @class */\nfunction (_super) {\n  __extends(Virtualization, _super);\n\n  function Virtualization(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.rowHeightService = null;\n    _this.scrollContainer = null;\n    _this.lastDirection = null;\n    _this.lastTotal = 0;\n    _this.lastTake = 0;\n    _this.animationInProgress = false;\n    _this.scrollToIndexTimeout = 0;\n\n    _this.scrollTo = function (value) {\n      var scrollProperty = _this.direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n\n      if (!_this.scrollContainer) {\n        return;\n      }\n\n      _this.scrollContainer[scrollProperty] = value;\n    };\n\n    _this.scrollToIndex = function (index) {\n      if (_this.scrollToIndexTimeout !== undefined) {\n        window.cancelAnimationFrame(_this.scrollToIndexTimeout);\n      }\n\n      if (!_this.rowHeightService) {\n        return;\n      }\n\n      _this.scrollToIndexTimeout = window.requestAnimationFrame(function () {\n        _this.animationInProgress = false;\n\n        if (_this.rowHeightService) {\n          _this.scrollTo(_this.rowHeightService.offset(index));\n        }\n      });\n    };\n\n    _this.animateToIndex = function (index) {\n      if (!_this.rowHeightService || !window) {\n        return;\n      }\n\n      window.cancelAnimationFrame(_this.cancelAnimation);\n\n      var indexOffset = _this.rowHeightService.offset(index);\n\n      var direction = _this.getContainerScrollDirection(indexOffset);\n\n      var _a = _this.scrollRange(indexOffset, direction),\n          start = _a.start,\n          end = _a.end;\n\n      if (start === end) {\n        return;\n      }\n\n      var step = _this.scrollStep(start, end);\n\n      var modifyScroll = scrollModifiers[direction](step);\n      var normalizeScroll = scrollNormalizers[direction](end);\n      var isScrollValid = scrollValidators[direction](modifyScroll(end));\n\n      var animate = function (progress) {\n        _this.animationInProgress = true;\n        var next = modifyScroll(progress);\n\n        _this.scrollTo(normalizeScroll(next));\n\n        isScrollValid(next) ? _this.cancelAnimation = window.requestAnimationFrame(function () {\n          animate(next);\n        }) : _this.animationInProgress = false;\n      };\n\n      _this.cancelAnimation = window.requestAnimationFrame(function () {\n        animate(start);\n      });\n    };\n\n    _this.scrollToBottom = function () {\n      if (!_this.rowHeightService) {\n        return;\n      }\n\n      _this.scrollTo(_this.rowHeightService.totalHeight() + _this.props.bottomOffset);\n    };\n\n    _this.scrollStep = function (start, end) {\n      var duration = _this.props.scrollDuration || Virtualization.defaultProps.scrollDuration;\n      return Math.abs(end - start) / (duration / FRAME_DURATION);\n    };\n\n    _this.scrollRange = function (indexOffset, direction) {\n      var containerScroll = _this.containerScrollPosition;\n\n      if (parseInt(\"\".concat(indexOffset), 10) === parseInt(\"\".concat(containerScroll), 10)) {\n        return {\n          start: indexOffset,\n          end: indexOffset\n        };\n      }\n\n      var maxScroll = _this.containerMaxScroll();\n\n      var sign = direction === ScrollDirection.Backward ? 1 : -1;\n      var difference = differenceToScroll(containerScroll, indexOffset, _this.props.maxScrollDifference || 0);\n      var end = Math.min(indexOffset, maxScroll);\n      var start = Math.min(Math.max(end + sign * difference, 0), maxScroll);\n      return {\n        start: start,\n        end: end\n      };\n    };\n\n    _this.containerMaxScroll = function () {\n      return _this.containerScrollSize - _this.containerOffsetSize;\n    };\n\n    _this.getContainerScrollDirection = function (indexOffset) {\n      return indexOffset < _this.containerScrollPosition ? ScrollDirection.Backward : ScrollDirection.Forward;\n    };\n\n    _this.initServices = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var dimension = _this.direction === 'vertical' ? props.itemHeight : props.itemWidth;\n\n      if (dimension === undefined) {\n        return;\n      }\n\n      _this.rowHeightService = new RowHeightService(props.total, dimension, 0);\n\n      _this.scrollerService.create(_this.rowHeightService, props.skip, props.take, props.total, props.topOffset, _this.scrollOffsetSize, _this.direction);\n    };\n\n    _this.getContainerProperty = function (propertyName) {\n      if (!_this.scrollContainer) {\n        return 0;\n      }\n\n      return _this.scrollContainer[propertyName];\n    };\n\n    _this.handleScroll = function (event) {\n      if (!_this.scrollContainer || !_this.rowHeightService) {\n        return;\n      }\n\n      var target = event.target;\n\n      _this.scrollerService.onScroll({\n        scrollLeft: target.scrollLeft,\n        scrollTop: target.scrollTop,\n        offsetHeight: target.offsetHeight,\n        offsetWidth: target.offsetWidth\n      });\n\n      var index = _this.rowHeightService.index(_this.containerScrollPosition - _this.props.topOffset);\n\n      var onScrollAction = _this.props.onScrollAction;\n      var args = {\n        index: index,\n        target: target,\n        scrollAction: _this.scrollAction,\n        pageAction: _this.pageAction,\n        animationInProgress: _this.animationInProgress\n      };\n\n      if (_this.props.onScroll) {\n        _this.props.onScroll.call(undefined, event);\n      }\n\n      if (onScrollAction) {\n        onScrollAction.call(undefined, args);\n      }\n\n      _this.scrollAction = undefined;\n      _this.pageAction = undefined;\n    };\n\n    _this.handleScrollAction = function (action) {\n      _this.scrollAction = action;\n    };\n\n    _this.handlePageAction = function (action) {\n      _this.pageAction = action;\n    };\n\n    _this.scrollerService = new ScrollerService(_this.handleScrollAction, _this.handlePageAction);\n    return _this;\n  }\n\n  Object.defineProperty(Virtualization.prototype, \"element\", {\n    get: function () {\n      return this.scrollContainer;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Virtualization.prototype, \"containerOffsetSize\", {\n    get: function () {\n      return this.getContainerProperty(this.direction === 'vertical' ? 'offsetHeight' : 'offsetWidth');\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Virtualization.prototype, \"containerScrollSize\", {\n    get: function () {\n      return this.getContainerProperty(this.direction === 'vertical' ? 'scrollHeight' : 'scrollWidth');\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Virtualization.prototype, \"containerScrollPosition\", {\n    get: function () {\n      return this.getContainerProperty(this.direction === 'vertical' ? 'scrollTop' : 'scrollLeft');\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Virtualization.prototype, \"direction\", {\n    get: function () {\n      return this.props.direction !== undefined ? this.props.direction : Virtualization.defaultProps.direction;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Virtualization.prototype, \"scrollOffsetSize\", {\n    get: function () {\n      return this.props.scrollOffsetSize !== undefined ? this.props.scrollOffsetSize : Virtualization.defaultProps.scrollOffsetSize;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Virtualization.prototype.activeIndex = function () {\n    return this.itemIndex(Math.ceil(this.containerScrollPosition));\n  };\n\n  Virtualization.prototype.itemIndex = function (offset) {\n    if (!this.rowHeightService) {\n      return 0;\n    }\n\n    return this.rowHeightService.index(offset);\n  };\n\n  Virtualization.prototype.itemOffset = function (index) {\n    if (!this.rowHeightService) {\n      return 0;\n    }\n\n    return this.rowHeightService.offset(index);\n  };\n\n  Virtualization.prototype.isIndexVisible = function (index) {\n    if (!this.rowHeightService) {\n      return false;\n    }\n\n    var containerTop = this.containerScrollPosition;\n    var containerBottom = containerTop + this.containerOffsetSize;\n    var top = this.rowHeightService.offset(index);\n    var bottom = top + this.rowHeightService.height(index);\n    return top >= containerTop && bottom <= containerBottom;\n  };\n\n  Virtualization.prototype.isListScrolled = function (index) {\n    if (!this.rowHeightService) {\n      return false;\n    }\n\n    return this.containerScrollPosition !== this.rowHeightService.offset(index);\n  };\n\n  Virtualization.prototype.componentDidMount = function () {\n    var onMount = this.props.onMount;\n\n    if (onMount) {\n      onMount.call(undefined, this);\n    }\n  };\n\n  Virtualization.prototype.render = function () {\n    var _this = this;\n\n    if (this.lastTotal !== this.props.total || this.lastDirection !== this.direction || this.lastTake !== this.props.take) {\n      this.initServices();\n      this.lastTotal = this.props.total;\n      this.lastDirection = this.direction;\n      this.lastTake = this.props.take;\n    }\n\n    var vertexLength = \"\".concat((this.rowHeightService ? this.rowHeightService.totalHeight() : 0) + this.props.bottomOffset);\n    var placeholderStyle = this.direction === 'vertical' ? {\n      height: \"\".concat(vertexLength, \"px\")\n    } : {\n      width: \"\".concat(vertexLength, \"px\")\n    };\n    var rootClassNames = classNames('k-content k-calendar-content k-scrollable', {\n      'k-scrollable-horizontal': this.direction === 'horizontal'\n    }, this.props.className);\n    var scrollableClassNames = classNames('k-scrollable-placeholder', {\n      'k-scrollable-horizontal-placeholder': this.direction === 'horizontal'\n    });\n    return React.createElement(\"div\", {\n      ref: function (el) {\n        _this.scrollContainer = el;\n      },\n      onScroll: this.handleScroll,\n      className: rootClassNames,\n      tabIndex: this.props.tabIndex,\n      role: this.props.role\n    }, this.props.children, React.createElement(\"div\", {\n      style: placeholderStyle,\n      className: scrollableClassNames\n    }));\n  };\n\n  Virtualization.propTypes = {\n    bottomOffset: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    direction: PropTypes.oneOf(['horizontal', 'vertical']),\n    forceScroll: PropTypes.bool,\n    itemHeight: PropTypes.number,\n    itemWidth: PropTypes.number,\n    maxScrollDifference: PropTypes.number,\n    onScroll: PropTypes.func,\n    onScrollAction: PropTypes.func,\n    scrollDuration: PropTypes.number,\n    scrollOffsetSize: PropTypes.number,\n    skip: PropTypes.number.isRequired,\n    tabIndex: PropTypes.number,\n    take: PropTypes.number.isRequired,\n    topOffset: PropTypes.number.isRequired,\n    total: PropTypes.number.isRequired,\n    role: PropTypes.string\n  };\n  Virtualization.defaultProps = {\n    direction: 'vertical',\n    forceScroll: false,\n    scrollOffsetSize: 0,\n    maxScrollDifference: 100,\n    scrollDuration: 100\n  };\n  return Virtualization;\n}(React.Component);\n\nexport { Virtualization };","map":{"version":3,"sources":["C:/Projects/React/heycloud-frontent-2/node_modules/@progress/kendo-react-dateinputs/dist/es/virtualization/Virtualization.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","_a","_b","_c","React","PropTypes","classNames","RowHeightService","ScrollerService","ScrollDirection","differenceToScroll","scrollTop","staticOffset","maxScrollDifference","Math","min","abs","FRAME_DURATION","scrollModifiers","Forward","step","value","Backward","scrollNormalizers","end","max","scrollValidators","start","Virtualization","_super","props","_this","rowHeightService","scrollContainer","lastDirection","lastTotal","lastTake","animationInProgress","scrollToIndexTimeout","scrollTo","scrollProperty","direction","scrollToIndex","index","undefined","window","cancelAnimationFrame","requestAnimationFrame","offset","animateToIndex","cancelAnimation","indexOffset","getContainerScrollDirection","scrollRange","scrollStep","modifyScroll","normalizeScroll","isScrollValid","animate","progress","next","scrollToBottom","totalHeight","bottomOffset","duration","scrollDuration","defaultProps","containerScroll","containerScrollPosition","parseInt","concat","maxScroll","containerMaxScroll","sign","difference","containerScrollSize","containerOffsetSize","initServices","dimension","itemHeight","itemWidth","total","scrollerService","skip","take","topOffset","scrollOffsetSize","getContainerProperty","propertyName","handleScroll","event","target","onScroll","scrollLeft","offsetHeight","offsetWidth","onScrollAction","args","scrollAction","pageAction","handleScrollAction","action","handlePageAction","defineProperty","get","enumerable","configurable","activeIndex","itemIndex","ceil","itemOffset","isIndexVisible","containerTop","containerBottom","top","bottom","height","isListScrolled","componentDidMount","onMount","render","vertexLength","placeholderStyle","width","rootClassNames","className","scrollableClassNames","createElement","ref","el","tabIndex","role","children","style","propTypes","number","isRequired","string","oneOf","forceScroll","bool","func","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a, _b, _c;\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames } from '@progress/kendo-react-common';\nimport { RowHeightService, ScrollerService } from './services';\n/**\n * @hidden\n */\nexport var ScrollDirection;\n(function (ScrollDirection) {\n    ScrollDirection[ScrollDirection[\"Backward\"] = 0] = \"Backward\";\n    ScrollDirection[ScrollDirection[\"Forward\"] = 1] = \"Forward\";\n})(ScrollDirection || (ScrollDirection = {}));\nvar differenceToScroll = function (scrollTop, staticOffset, maxScrollDifference) {\n    return Math.min(Math.abs(staticOffset - scrollTop), maxScrollDifference);\n};\nvar FRAME_DURATION = 17;\nvar scrollModifiers = (_a = {},\n    _a[ScrollDirection.Forward] = function (step) { return function (value) { return value + step; }; },\n    _a[ScrollDirection.Backward] = function (step) { return function (value) { return value - step; }; },\n    _a);\nvar scrollNormalizers = (_b = {},\n    _b[ScrollDirection.Forward] = function (end) { return function (value) { return Math.min(value, end); }; },\n    _b[ScrollDirection.Backward] = function (end) { return function (value) { return Math.max(value, end); }; },\n    _b);\nvar scrollValidators = (_c = {},\n    _c[ScrollDirection.Forward] = function (end) { return function (start) { return start < end; }; },\n    _c[ScrollDirection.Backward] = function (end) { return function (start) { return start > end; }; },\n    _c);\n/**\n * @hidden\n */\nvar Virtualization = /** @class */ (function (_super) {\n    __extends(Virtualization, _super);\n    function Virtualization(props) {\n        var _this = _super.call(this, props) || this;\n        _this.rowHeightService = null;\n        _this.scrollContainer = null;\n        _this.lastDirection = null;\n        _this.lastTotal = 0;\n        _this.lastTake = 0;\n        _this.animationInProgress = false;\n        _this.scrollToIndexTimeout = 0;\n        _this.scrollTo = function (value) {\n            var scrollProperty = _this.direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n            if (!_this.scrollContainer) {\n                return;\n            }\n            _this.scrollContainer[scrollProperty] = value;\n        };\n        _this.scrollToIndex = function (index) {\n            if (_this.scrollToIndexTimeout !== undefined) {\n                window.cancelAnimationFrame(_this.scrollToIndexTimeout);\n            }\n            if (!_this.rowHeightService) {\n                return;\n            }\n            _this.scrollToIndexTimeout = window.requestAnimationFrame(function () {\n                _this.animationInProgress = false;\n                if (_this.rowHeightService) {\n                    _this.scrollTo(_this.rowHeightService.offset(index));\n                }\n            });\n        };\n        _this.animateToIndex = function (index) {\n            if (!_this.rowHeightService || !window) {\n                return;\n            }\n            window.cancelAnimationFrame(_this.cancelAnimation);\n            var indexOffset = _this.rowHeightService.offset(index);\n            var direction = _this.getContainerScrollDirection(indexOffset);\n            var _a = _this.scrollRange(indexOffset, direction), start = _a.start, end = _a.end;\n            if (start === end) {\n                return;\n            }\n            var step = _this.scrollStep(start, end);\n            var modifyScroll = scrollModifiers[direction](step);\n            var normalizeScroll = scrollNormalizers[direction](end);\n            var isScrollValid = scrollValidators[direction](modifyScroll(end));\n            var animate = function (progress) {\n                _this.animationInProgress = true;\n                var next = modifyScroll(progress);\n                _this.scrollTo(normalizeScroll(next));\n                isScrollValid(next)\n                    ? _this.cancelAnimation = window.requestAnimationFrame(function () { animate(next); })\n                    : _this.animationInProgress = false;\n            };\n            _this.cancelAnimation = window.requestAnimationFrame(function () { animate(start); });\n        };\n        _this.scrollToBottom = function () {\n            if (!_this.rowHeightService) {\n                return;\n            }\n            _this.scrollTo(_this.rowHeightService.totalHeight() + _this.props.bottomOffset);\n        };\n        _this.scrollStep = function (start, end) {\n            var duration = _this.props.scrollDuration || Virtualization.defaultProps.scrollDuration;\n            return Math.abs(end - start) / (duration / FRAME_DURATION);\n        };\n        _this.scrollRange = function (indexOffset, direction) {\n            var containerScroll = _this.containerScrollPosition;\n            if (parseInt(\"\".concat(indexOffset), 10) === parseInt(\"\".concat(containerScroll), 10)) {\n                return { start: indexOffset, end: indexOffset };\n            }\n            var maxScroll = _this.containerMaxScroll();\n            var sign = direction === ScrollDirection.Backward ? 1 : -1;\n            var difference = differenceToScroll(containerScroll, indexOffset, _this.props.maxScrollDifference || 0);\n            var end = Math.min(indexOffset, maxScroll);\n            var start = Math.min(Math.max(end + (sign * difference), 0), maxScroll);\n            return { start: start, end: end };\n        };\n        _this.containerMaxScroll = function () {\n            return _this.containerScrollSize - _this.containerOffsetSize;\n        };\n        _this.getContainerScrollDirection = function (indexOffset) {\n            return indexOffset < _this.containerScrollPosition ? ScrollDirection.Backward : ScrollDirection.Forward;\n        };\n        _this.initServices = function (props) {\n            if (props === void 0) { props = _this.props; }\n            var dimension = _this.direction === 'vertical' ? props.itemHeight : props.itemWidth;\n            if (dimension === undefined) {\n                return;\n            }\n            _this.rowHeightService = new RowHeightService(props.total, dimension, 0);\n            _this.scrollerService.create(_this.rowHeightService, props.skip, props.take, props.total, props.topOffset, _this.scrollOffsetSize, _this.direction);\n        };\n        _this.getContainerProperty = function (propertyName) {\n            if (!_this.scrollContainer) {\n                return 0;\n            }\n            return _this.scrollContainer[propertyName];\n        };\n        _this.handleScroll = function (event) {\n            if (!_this.scrollContainer || !_this.rowHeightService) {\n                return;\n            }\n            var target = event.target;\n            _this.scrollerService.onScroll({\n                scrollLeft: target.scrollLeft,\n                scrollTop: target.scrollTop,\n                offsetHeight: target.offsetHeight,\n                offsetWidth: target.offsetWidth\n            });\n            var index = _this.rowHeightService.index(_this.containerScrollPosition - _this.props.topOffset);\n            var onScrollAction = _this.props.onScrollAction;\n            var args = {\n                index: index,\n                target: target,\n                scrollAction: _this.scrollAction,\n                pageAction: _this.pageAction,\n                animationInProgress: _this.animationInProgress\n            };\n            if (_this.props.onScroll) {\n                _this.props.onScroll.call(undefined, event);\n            }\n            if (onScrollAction) {\n                onScrollAction.call(undefined, args);\n            }\n            _this.scrollAction = undefined;\n            _this.pageAction = undefined;\n        };\n        _this.handleScrollAction = function (action) {\n            _this.scrollAction = action;\n        };\n        _this.handlePageAction = function (action) {\n            _this.pageAction = action;\n        };\n        _this.scrollerService = new ScrollerService(_this.handleScrollAction, _this.handlePageAction);\n        return _this;\n    }\n    Object.defineProperty(Virtualization.prototype, \"element\", {\n        get: function () {\n            return this.scrollContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Virtualization.prototype, \"containerOffsetSize\", {\n        get: function () {\n            return this.getContainerProperty(this.direction === 'vertical' ? 'offsetHeight' : 'offsetWidth');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Virtualization.prototype, \"containerScrollSize\", {\n        get: function () {\n            return this.getContainerProperty(this.direction === 'vertical' ? 'scrollHeight' : 'scrollWidth');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Virtualization.prototype, \"containerScrollPosition\", {\n        get: function () {\n            return this.getContainerProperty(this.direction === 'vertical' ? 'scrollTop' : 'scrollLeft');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Virtualization.prototype, \"direction\", {\n        get: function () {\n            return this.props.direction !== undefined ? this.props.direction : Virtualization.defaultProps.direction;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Virtualization.prototype, \"scrollOffsetSize\", {\n        get: function () {\n            return this.props.scrollOffsetSize !== undefined\n                ? this.props.scrollOffsetSize : Virtualization.defaultProps.scrollOffsetSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Virtualization.prototype.activeIndex = function () {\n        return this.itemIndex(Math.ceil(this.containerScrollPosition));\n    };\n    Virtualization.prototype.itemIndex = function (offset) {\n        if (!this.rowHeightService) {\n            return 0;\n        }\n        return this.rowHeightService.index(offset);\n    };\n    Virtualization.prototype.itemOffset = function (index) {\n        if (!this.rowHeightService) {\n            return 0;\n        }\n        return this.rowHeightService.offset(index);\n    };\n    Virtualization.prototype.isIndexVisible = function (index) {\n        if (!this.rowHeightService) {\n            return false;\n        }\n        var containerTop = this.containerScrollPosition;\n        var containerBottom = containerTop + this.containerOffsetSize;\n        var top = this.rowHeightService.offset(index);\n        var bottom = top + this.rowHeightService.height(index);\n        return top >= containerTop && bottom <= containerBottom;\n    };\n    Virtualization.prototype.isListScrolled = function (index) {\n        if (!this.rowHeightService) {\n            return false;\n        }\n        return this.containerScrollPosition !== this.rowHeightService.offset(index);\n    };\n    Virtualization.prototype.componentDidMount = function () {\n        var onMount = this.props.onMount;\n        if (onMount) {\n            onMount.call(undefined, this);\n        }\n    };\n    Virtualization.prototype.render = function () {\n        var _this = this;\n        if (this.lastTotal !== this.props.total\n            || this.lastDirection !== this.direction\n            || this.lastTake !== this.props.take) {\n            this.initServices();\n            this.lastTotal = this.props.total;\n            this.lastDirection = this.direction;\n            this.lastTake = this.props.take;\n        }\n        var vertexLength = \"\".concat((this.rowHeightService ? this.rowHeightService.totalHeight() : 0) + this.props.bottomOffset);\n        var placeholderStyle = this.direction === 'vertical'\n            ? { height: \"\".concat(vertexLength, \"px\") }\n            : { width: \"\".concat(vertexLength, \"px\") };\n        var rootClassNames = classNames('k-content k-calendar-content k-scrollable', {\n            'k-scrollable-horizontal': this.direction === 'horizontal'\n        }, this.props.className);\n        var scrollableClassNames = classNames('k-scrollable-placeholder', {\n            'k-scrollable-horizontal-placeholder': this.direction === 'horizontal'\n        });\n        return (React.createElement(\"div\", { ref: function (el) { _this.scrollContainer = el; }, onScroll: this.handleScroll, className: rootClassNames, tabIndex: this.props.tabIndex, role: this.props.role },\n            this.props.children,\n            React.createElement(\"div\", { style: placeholderStyle, className: scrollableClassNames })));\n    };\n    Virtualization.propTypes = {\n        bottomOffset: PropTypes.number.isRequired,\n        className: PropTypes.string,\n        direction: PropTypes.oneOf(['horizontal', 'vertical']),\n        forceScroll: PropTypes.bool,\n        itemHeight: PropTypes.number,\n        itemWidth: PropTypes.number,\n        maxScrollDifference: PropTypes.number,\n        onScroll: PropTypes.func,\n        onScrollAction: PropTypes.func,\n        scrollDuration: PropTypes.number,\n        scrollOffsetSize: PropTypes.number,\n        skip: PropTypes.number.isRequired,\n        tabIndex: PropTypes.number,\n        take: PropTypes.number.isRequired,\n        topOffset: PropTypes.number.isRequired,\n        total: PropTypes.number.isRequired,\n        role: PropTypes.string\n    };\n    Virtualization.defaultProps = {\n        direction: 'vertical',\n        forceScroll: false,\n        scrollOffsetSize: 0,\n        maxScrollDifference: 100,\n        scrollDuration: 100\n    };\n    return Virtualization;\n}(React.Component));\nexport { Virtualization };\n"]},"metadata":{},"sourceType":"module"}